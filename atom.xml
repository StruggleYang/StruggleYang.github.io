<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>StruggleYang</title>
  
  <subtitle>ç§‹å¤©è¯¥å¾ˆå¥½ï¼Œä½ è‹¥å°šåœ¨åœºï¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://git66.com/"/>
  <updated>2018-03-16T09:44:36.000Z</updated>
  <id>http://git66.com/</id>
  
  <author>
    <name>StruggleYang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é¢†åŸŸäº‹ä»¶åŠäº‹ä»¶æ€»çº¿EventBusä½¿ç”¨å®è·µ</title>
    <link href="http://git66.com/2018/03/10/eventbus-archtech-0316/"/>
    <id>http://git66.com/2018/03/10/eventbus-archtech-0316/</id>
    <published>2018-03-10T15:49:49.000Z</published>
    <updated>2018-03-16T09:44:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>DDD-äº‹ä»¶æ€»çº¿å®ç°æ¶æ„åŸç†åˆ†æï¼ˆä¿®è®¢ç‰ˆï¼‰</p><p><a href="https://github.com/dapeng-soa" target="_blank" rel="noopener">@å¤§é¹å¼€æº</a>:åˆ«çœ‹æˆ‘æœ‰ç‚¹èŒï¼Œæˆ‘å¯ä»¥ç§’å˜å¤§é¹</p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="http://upload-images.jianshu.io/upload_images/6393906-b7ba572342b3e4ba..jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¤§é¹é¸Ÿ"></h2><blockquote><p>äº‹ä»¶æ€»çº¿(EventBus),è®¾è®¡åˆè¡·æ˜¯è§£è€¦ç³»ç»Ÿæ¨¡å—ï¼Œå°†ç³»ç»Ÿä¸­çš„å„ç±»ä¸šåŠ¡æ“ä½œæŠ½è±¡ä¸ºäº‹ä»¶æ¨¡å‹ï¼Œæˆ‘ä»¬æŠŠäº§ç”Ÿäº‹ä»¶çš„éƒ¨åˆ†ç§°ä¹‹ä¸ºäº‹ä»¶çš„å‘é€è€…(Publisher),æ¶ˆè´¹äº‹ä»¶çš„éƒ¨åˆ†ç§°ä¹‹ä¸ºè®¢é˜…è€…(Subcriber)ã€‚</p></blockquote><h2 id="DDDé¢†åŸŸäº‹ä»¶æ¶æ„ç®€æ"><a href="#DDDé¢†åŸŸäº‹ä»¶æ¶æ„ç®€æ" class="headerlink" title="DDDé¢†åŸŸäº‹ä»¶æ¶æ„ç®€æ"></a>DDDé¢†åŸŸäº‹ä»¶æ¶æ„ç®€æ</h2><ul><li>é¢†åŸŸäº‹ä»¶æ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡(Domain Driven Design)ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå®ƒç”¨æ¥è¡¨ç¤ºé¢†åŸŸä¸­å‘ç”Ÿçš„äº‹ä»¶ï¼Œç›®çš„æ˜¯æ•è·æˆ‘ä»¬æ‰€å»ºæ¨¡çš„é¢†åŸŸä¸­æ‰€å‘ç”Ÿè¿‡çš„å„ç±»äº‹ä»¶ï¼Œ</li><li><p>é¢†åŸŸäº‹ä»¶å¿½ç•¥ä¸ç›¸å…³çš„é¢†åŸŸæ´»åŠ¨ï¼Œæ˜ç¡®ä¸šåŠ¡éœ€æ±‚ï¼Œä½¿å¾—ä¸šåŠ¡å¼€å‘è€…åªå…³æ³¨å’Œè·Ÿè¸ªæœ‰ä¸šåŠ¡éœ€è¦çš„äº‹ä»¶æˆ–å¸Œæœ›è¢«é€šçŸ¥çš„äº‹ä»¶ã€‚</p></li><li><p>ç»“åˆé¢†åŸŸäº‹ä»¶å’ŒEventBusï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åŸºäºTodayä¸­å°æ¶æ„çš„EventBusæ¶æ„æ¨¡å‹ï¼š</p></li></ul><p><img src="https://upload-images.jianshu.io/upload_images/6393906-a0cdb1c3e8040895.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="eventbusæ¨¡å‹.png"></p><p>é¢†åŸŸäº‹ä»¶äº§ç”Ÿï¼Œç„¶åä¼šæœ‰ç›‘å¬è€…è¿›è¡Œäº‹ä»¶ç›‘å¬ã€‚åœ¨å¦‚æ­¤ä¼—å¤šçš„äº‹ä»¶ä¸­ï¼Œéœ€è¦ä¸€ä¸ªæ¶ˆæ¯æ€»çº¿å¯¹æ¶ˆæ¯è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ã€‚<br>æ¶ˆæ¯æ€»çº¿çš„ä½œç”¨æœ‰ï¼š</p><p> 1.ä¸€ä¸ªå¤§çš„é¢†åŸŸå†…çš„å„å°æ¨¡å—ä¹‹é—´çš„äº‹ä»¶çš„è§¦å‘å’Œè®¢é˜…</p><p> 2.è·¨é¢†åŸŸï¼ˆè·¨JVMè¿›ç¨‹ï¼‰ä¹‹é—´çš„äº‹ä»¶è®¢é˜…</p><p>é¦–å…ˆé¢†åŸŸå†…æŸä¸ªæ–¹æ³•å‘å¸ƒäº‹ä»¶ï¼Œä¾‹å¦‚<code>registerUser()</code>æ–¹æ³•æ‰§è¡ŒæˆåŠŸåï¼Œä¼šå‘å¸ƒä¸€ä¸ªç”¨æˆ·åˆ›å»ºçš„äº‹ä»¶ã€‚<br>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨<code>EventBus.fireEvent()</code>æ–¹æ³•ï¼Œå°±ä¼šå°†äº‹ä»¶å‘å¸ƒå‡ºå»ï¼Œåœ¨EventBuså†…éƒ¨ï¼Œå¦‚æœæœ¬é¢†åŸŸå†…æœ‰è®¢é˜…è€…è®¢é˜…æ­¤äº‹ä»¶ï¼ŒEventbuså°±ä¼šåŒ¹é…æ¶ˆæ¯çš„ç±»å‹ï¼Œç„¶åè¿›è¡Œç›¸åº”äº‹ä»¶çš„é€»è¾‘å¤„ç†ï¼Œè¿™æ ·å°±åšåˆ°äº†é¢†åŸŸå†…çš„äº‹ä»¶ç›‘å¬å’Œå¤„ç†ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäº‹ä»¶çš„å‘å¸ƒå’Œè®¢é˜…æ˜¯å¼ºä¸€è‡´æ€§çš„ï¼Œä¸¤è€…åœ¨åŒä¸€ä¸ªå¤„ç†è¿‡ç¨‹ä¸­ï¼Œå½“å‡ºç°é”™è¯¯ï¼Œè§¦å‘äº‹ä»¶æ–¹å’Œè®¢é˜…æ–¹çš„æ•°æ®ä¼šä¸€èµ·å›æ»šã€‚</p><p>ä¸ç®¡æ˜¯é¢†åŸŸå†…äº‹ä»¶è¿˜æ˜¯è·¨é¢†åŸŸäº‹ä»¶ï¼Œåœ¨EventBusè§¦å‘äº‹ä»¶ä¹‹åï¼Œéƒ½ä¼šé€‰æ‹©å°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ä¸šåŠ¡æ•°æ®åº“ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def fireEvent(event: Any): Unit = &#123;</span><br><span class="line">  // æœ¬åœ°äº‹ä»¶åˆ†å‘å¤„ç†</span><br><span class="line">  dispatchEvent(event)</span><br><span class="line"> //æŒä¹…åŒ–äº‹ä»¶</span><br><span class="line">  persistenceEvent(event)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><h2 id="è·¨é¢†åŸŸäº‹ä»¶æ¶ˆæ¯ä¿éšœ"><a href="#è·¨é¢†åŸŸäº‹ä»¶æ¶ˆæ¯ä¿éšœ" class="headerlink" title="è·¨é¢†åŸŸäº‹ä»¶æ¶ˆæ¯ä¿éšœ"></a>è·¨é¢†åŸŸäº‹ä»¶æ¶ˆæ¯ä¿éšœ</h2><p>è·¨é¢†åŸŸæ¶ˆæ¯éœ€è¦é€šè¿‡æ¶ˆæ¯ä¸­é—´ä»¶(MQ)æ¥è¿›è¡Œä¼ é€’ï¼Œè¿™æ ·åšçš„ç›®çš„å°±æ˜¯è§£é™¤ç³»ç»Ÿé—´çš„å¼ºä¾èµ–æ€§ï¼Œè§£è€¦ä¸šåŠ¡æ¨¡å—ã€‚</p><p>æˆ‘ä»¬çš„äº‹ä»¶æ€»çº¿å‘å¸ƒçš„è·¨é¢†åŸŸï¼ˆç³»ç»Ÿï¼‰æ¶ˆæ¯ï¼Œæ˜¯é€šè¿‡kafkaè¿™æ¬¾æ¶ˆæ¯ä¸­é—´ä»¶æ¥è¿›è¡Œå­˜å‚¨è½¬å‘çš„ã€‚å› ä¸ºæ¯ä¸€æ¡äº‹ä»¶æ¶ˆæ¯å¯¹ä¸šåŠ¡ç³»ç»Ÿéƒ½ååˆ†é‡è¦ï¼Œæˆ‘ä»¬è¦ç¡®ä¿å‘é€æ¶ˆæ¯ä¸å¯ä¸¢ï¼Œå¹¶æœ€ç»ˆèƒ½å¤Ÿè¢«è®¢é˜…è€…è®¢é˜…åˆ°ã€‚</p><h3 id="kafkaå¯¹æ¶ˆæ¯å‘é€çš„ä¿éšœ"><a href="#kafkaå¯¹æ¶ˆæ¯å‘é€çš„ä¿éšœ" class="headerlink" title="kafkaå¯¹æ¶ˆæ¯å‘é€çš„ä¿éšœ"></a>kafkaå¯¹æ¶ˆæ¯å‘é€çš„ä¿éšœ</h3><p>Kafkaçš„è¯­ä¹‰æ˜¯å¾ˆç›´æ¥çš„ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå½“å‘å¸ƒä¸€æ¡æ¶ˆæ¯æ—¶ï¼Œè¯¥æ¶ˆæ¯ç»™<code>kafka broker</code>æ”¶åˆ°åå¹¶ <code>committed</code>åˆ°äº†æ—¥å¿—ï¼Œé‚£ä¹ˆåœ¨<code>broker</code>çœ‹æ¥, è¿™ä¸ªæ¶ˆæ¯å·²ç»å‘å¸ƒæˆåŠŸäº†, åŒæ—¶ä¼šæœ‰ä¸€ä¸ªackæ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€…ã€‚<br></p><p>å½“ç½‘ç»œä¸å¯é æ—¶, æˆ‘ä»¬ä¼šç¢°åˆ°è¿™æ ·ä¸€ç§æƒ…å½¢ï¼š<br>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶ï¼Œå‘ç”Ÿç½‘ç»œé”™è¯¯ï¼Œè¿™æ—¶å°†æ— æ³•ç¡®ä¿é”™è¯¯å‘ç”Ÿåœ¨brokeræ”¶åˆ°æ¶ˆæ¯å‰è¿˜æ˜¯åœ¨æ”¶åˆ°æ¶ˆæ¯å(è¿”å›ackä¸¢å¤±)ã€‚</p><h5 id="Kafkaç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§è¯­ä¹‰ï¼š"><a href="#Kafkaç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§è¯­ä¹‰ï¼š" class="headerlink" title="Kafkaç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§è¯­ä¹‰ï¼š"></a>Kafkaç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§è¯­ä¹‰ï¼š</h5><ul><li><p>At most once  <br><br>æœ€å¤šä¸€æ¬¡ï¼šæ¶ˆæ¯å¯èƒ½ä¸¢å¤±ï¼Œä½†ç»ä¸ä¼šé‡å‘ã€‚</p></li><li><p>At least once <br><br>è‡³å°‘ä¸€æ¬¡ï¼šæ¶ˆæ¯ç»ä¸ä¼šä¸¢å¤±ï¼Œä½†æœ‰å¯èƒ½é‡æ–°å‘é€ã€‚</p></li></ul><ul><li>Exactly once  <br><br>æ­£å¥½ä¸€æ¬¡ï¼šè¿™æ˜¯æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„ï¼Œæ¯ä¸ªæ¶ˆæ¯ä¼ é€’ä¸€æ¬¡ä¸”ä»…ä¸€æ¬¡ã€‚</li></ul><p>è¿™é‡Œæˆ‘ä»¬ç»“åˆä¸Šè¿°ä¸‰ç§è¯­ä¹‰å¹¶ä»¥å‘é€ç«¯ï¼ˆç”Ÿäº§è€…ï¼‰å’Œæ¥æ”¶ç«¯ï¼ˆæ¶ˆè´¹è€…ï¼‰å¯¹æ¶ˆæ¯æ¶ˆè´¹è¯­ä¹‰çš„ä¿éšœåˆ†åˆ«è¿›è¡Œæ¢è®¨ã€‚å¯åˆ†è§£æˆä¸¤ä¸ªé—®é¢˜ï¼šå‘é€æ¶ˆæ¯æ—¶çš„æŒä¹…æ€§ä¿éšœå’Œæ¶ˆè´¹æ¶ˆæ¯çš„ä¿éšœã€‚</p><h4 id="ç”Ÿäº§è€…ç«¯ï¼ˆProducerï¼‰æ¶ˆæ¯ä¿éšœ"><a href="#ç”Ÿäº§è€…ç«¯ï¼ˆProducerï¼‰æ¶ˆæ¯ä¿éšœ" class="headerlink" title="ç”Ÿäº§è€…ç«¯ï¼ˆProducerï¼‰æ¶ˆæ¯ä¿éšœ"></a>ç”Ÿäº§è€…ç«¯ï¼ˆProducerï¼‰æ¶ˆæ¯ä¿éšœ</h4><ul><li>æœ€å¤šä¸€æ¬¡ï¼š<br>ä¸šåŠ¡ç³»ç»Ÿåˆ›å»ºkafkaç”Ÿäº§è€…å®ä¾‹æ—¶ï¼Œé…ç½®æ¶ˆæ¯å‘é€é‡è¯•æ¬¡æ•°ä¸º0ï¼Œå¦‚ä¸‹ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties.put(retries, 0);</span><br></pre></td></tr></table></figure><p>å½“æ¶ˆæ¯å‘é€å¤±è´¥æ—¶ï¼Œä¸ä¼šå†å°è¯•è¿›è¡Œæ¶ˆæ¯å‘é€ï¼Œè¿™æ ·è™½ç„¶ä¿è¯äº†æ¶ˆæ¯ä¸ä¼šé‡å¤å‘é€çš„é—®é¢˜ï¼Œä»£ä»·å´æ˜¯æœ‰å¯èƒ½ä¼šä¸¢å¤±æ¶ˆæ¯ï¼Œè¿™æ˜¯ç³»ç»Ÿä¸èƒ½å®¹å¿çš„ã€‚</p><ul><li><p>è‡³å°‘ä¸€æ¬¡ï¼š<br>åˆ›å»ºç”Ÿäº§è€…æ—¶ï¼Œé…ç½®é‡è¯•æ¬¡æ•°å¤§äºç­‰äº1ï¼Œå¦‚ä¸‹é…ç½®å°±æ˜¯é‡è¯•2æ¬¡ï¼Œå¦‚æœç”Ÿäº§è€…è¿ç»­å‘é€æ¶ˆæ¯æˆåŠŸè€Œæ²¡æœ‰æ”¶åˆ°ackï¼Œå°±ä¼šé‡è¯•ä¸¤æ¬¡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties.put(retries, 2);</span><br></pre></td></tr></table></figure></li><li><p>æ­£å¥½ä¸€æ¬¡</p></li></ul><p>åœ¨æ–°ç‰ˆæœ¬çš„kafkaç‰¹æ€§ä¸­ï¼Œå¢åŠ äº†kafkaå‘é€æ¶ˆæ¯çš„å¹‚ç­‰æ€§é…ç½®å’Œäº‹åŠ¡æ¶ˆæ¯ç‰¹æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties.put(enable.idempotence, &quot;true&quot;);</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·kafkaåœ¨è‡³å°‘ä¸€æ¬¡è¯­ä¹‰çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶ä¿è¯é‡å¤å‘é€çš„æ¶ˆæ¯ä¸ä¼šå¯¼è‡´æ—¥å¿—é‡å¤ï¼Œå®Œç¾åšåˆ°äº†å‘é€ç«¯æ­£å¥½ä¸€æ¬¡ã€‚</p><p>å®ƒçš„åŸç†å°±æ˜¯kafka-brokerä¸ºæ¯ä¸€ä¸ªç”Ÿäº§è€…åˆ†é…äº†ä¸€ä¸ª<code>PID</code>ï¼Œä»¥ä¾¿åŒºåˆ†ä¸åŒçš„ç”Ÿäº§è€…å®ä¾‹ï¼Œå½“ç„¶è¿™ä¸ª<code>PID</code>å¯¹ç”¨æˆ·ä¸é€æ˜ï¼Œç”¨æˆ·æ— éœ€è¿›è¡Œé…ç½®ã€‚</p><p>å¼€å¯äº†æ¶ˆæ¯å¹‚ç­‰åï¼Œproduceråœ¨å‘é€æ¯æ¡æ¶ˆæ¯æ—¶ï¼Œéƒ½ä¼šå¸¦ä¸Šä¸€ä¸ªåºåˆ—å·(sequnceId)ï¼Œè¿™æ ·å¯ä»¥åœ¨é‡å¤å‘é€æ—¶æ ¹æ®åºåˆ—å·è¿›è¡Œå»é‡ã€‚</p><h4 id="æ¶ˆè´¹è€…ç«¯ï¼ˆConsumerï¼‰æ¶ˆæ¯ä¿éšœ"><a href="#æ¶ˆè´¹è€…ç«¯ï¼ˆConsumerï¼‰æ¶ˆæ¯ä¿éšœ" class="headerlink" title="æ¶ˆè´¹è€…ç«¯ï¼ˆConsumerï¼‰æ¶ˆæ¯ä¿éšœ"></a>æ¶ˆè´¹è€…ç«¯ï¼ˆConsumerï¼‰æ¶ˆæ¯ä¿éšœ</h4><ul><li>æ¶ˆè´¹è€…æ¥æ”¶åˆ°brokerçš„æ¶ˆæ¯å,ä¼šæäº¤åç§»é‡åˆ°brokerä¸Šæ¥è¡¨ç¤ºæ¶ˆæ¯æ¶ˆè´¹æˆåŠŸã€‚</li><li>æˆ‘ä»¬å°†æ¶ˆè´¹è€…é…ç½®ä¸ºæ‰‹åŠ¨æäº¤åç§»é‡ï¼Œåœ¨æ•´ä¸ªæ¶ˆè´¹æ¶ˆæ¯é€»è¾‘å¤„ç†å®Œæˆï¼Œå¹¶æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸åï¼Œæ‰‹åŠ¨æäº¤åç§»é‡ã€‚</li><li>å¦‚æœåç§»é‡æœªæˆåŠŸæäº¤ï¼Œæ¶ˆæ¯å°†ä¼šå†æ¬¡å‘é€ç»™æ¶ˆè´¹è€…ç«¯ï¼Œè¿™æ ·å°±èƒ½å¤Ÿä¿éšœæ¶ˆæ¯ä¸ä¼šä¸¢å¤±ã€‚</li></ul><hr><h3 id="EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰æ”¶å‘æ¶ˆæ¯å…·ä½“å®ç°"><a href="#EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰æ”¶å‘æ¶ˆæ¯å…·ä½“å®ç°" class="headerlink" title="EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰æ”¶å‘æ¶ˆæ¯å…·ä½“å®ç°"></a>EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰æ”¶å‘æ¶ˆæ¯å…·ä½“å®ç°</h3><h4 id="EventBusç”Ÿäº§ç«¯ï¼ˆProducerï¼‰"><a href="#EventBusç”Ÿäº§ç«¯ï¼ˆProducerï¼‰" class="headerlink" title="EventBusç”Ÿäº§ç«¯ï¼ˆProducerï¼‰"></a>EventBusç”Ÿäº§ç«¯ï¼ˆProducerï¼‰</h4><h5 id="å®ç°ç”Ÿäº§è€…ç«¯è‡³å°‘ä¸€æ¬¡"><a href="#å®ç°ç”Ÿäº§è€…ç«¯è‡³å°‘ä¸€æ¬¡" class="headerlink" title="å®ç°ç”Ÿäº§è€…ç«¯è‡³å°‘ä¸€æ¬¡"></a>å®ç°ç”Ÿäº§è€…ç«¯è‡³å°‘ä¸€æ¬¡</h5><p>æˆ‘ä»¬ä¹Ÿä¼šè€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“ä¸šåŠ¡ç³»ç»Ÿéœ€è¦è¿›è¡Œæ‰¹é‡æ¶ˆæ¯å‘é€æ—¶,å¦‚æœä¸­é€”æŸæ¡æ¶ˆæ¯å‘é€å¤±è´¥åï¼Œéœ€è¦ä¹‹å‰å‘é€æˆåŠŸçš„æ¶ˆæ¯ä¸€èµ·å›æ»šï¼Œç±»ä¼¼äºæ•°æ®åº“ä¸Šçš„äº‹åŠ¡å›æ»šã€‚</p><h5 id="ç”Ÿäº§è€…é…ç½®ï¼š"><a href="#ç”Ÿäº§è€…é…ç½®ï¼š" class="headerlink" title="ç”Ÿäº§è€…é…ç½®ï¼š"></a>ç”Ÿäº§è€…é…ç½®ï¼š</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">properties.put(&quot;transactional.id&quot;,&quot;GOODS_1213&quot;);</span><br><span class="line">properties.put(&quot;enable.idempotence&quot;, &quot;true&quot;);</span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆkafkaå¯¹äº‹åŠ¡æ¶ˆæ¯çš„æ”¯æŒå‰ææ˜¯ï¼Œéœ€è¦ä¸ºæ¯ä¸ªç”Ÿäº§è€…å®ä¾‹æ˜¾å¼çš„é…ç½®å”¯ä¸€çš„äº‹åŠ¡idå·ï¼ˆå¦‚ä¸Šé…ç½®ï¼‰,</li><li>å…¶æ¬¡éœ€è¦å°†kafkaæ¶ˆæ¯å¹‚ç­‰åŠŸèƒ½è®¾ç½®ä¸ºtrue</li></ul><p>é€šè¿‡è¿™æ ·çš„é…ç½®ä¹‹åï¼Œæ¶ˆæ¯åœ¨æ‰¹é‡è¿›è¡Œå‘é€æ—¶ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸æ—¶ï¼Œæ”¾å¼ƒå½“å‰äº‹åŠ¡å³å¯ã€‚<br>æˆ‘ä»¬å®ç°çš„<code>eventbus</code>äº‹åŠ¡å‘é€ç«¯ä»£ç å¦‚ä¸‹:</p><h5 id="åˆ›å»ºäº‹åŠ¡ç”Ÿäº§è€…ï¼š"><a href="#åˆ›å»ºäº‹åŠ¡ç”Ÿäº§è€…ï¼š" class="headerlink" title="åˆ›å»ºäº‹åŠ¡ç”Ÿäº§è€…ï¼š"></a>åˆ›å»ºäº‹åŠ¡ç”Ÿäº§è€…ï¼š</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">private def initTransProducer(transId: String): Unit = &#123;</span><br><span class="line">    val builder = KafkaConfigBuilder.defaultProducer</span><br><span class="line">    val properties = builder</span><br><span class="line">      .withKeySerializer(classOf[LongSerializer])</span><br><span class="line">      .withValueSerializer(classOf[ByteArraySerializer])</span><br><span class="line">      .bootstrapServers(serverHost)</span><br><span class="line">      .withTransactions(transId)</span><br><span class="line">      .withIdempotence(&quot;true&quot;) //å¹‚ç­‰æ€§ä¿è¯</span><br><span class="line">      .build</span><br><span class="line"></span><br><span class="line">    producer = new KafkaProducer[Long, Array[Byte]](properties)</span><br><span class="line">    //åˆå§‹åŒ–äº‹åŠ¡</span><br><span class="line">    producer.initTransactions()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ‰¹é‡æ¶ˆæ¯å‘é€"><a href="#æ‰¹é‡æ¶ˆæ¯å‘é€" class="headerlink" title="æ‰¹é‡æ¶ˆæ¯å‘é€"></a>æ‰¹é‡æ¶ˆæ¯å‘é€</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">def batchSend(topic: String, eventMessage: util.List[EventStore]): Unit = &#123;</span><br><span class="line">try &#123;</span><br><span class="line">      producer.beginTransaction()</span><br><span class="line">      eventMessage.forEach((eventStore: EventStore) =&gt; &#123;</span><br><span class="line">        producer.send(new ProducerRecord[Long, Array[Byte]](topic, eventStore.id, eventStore.eventBinary), (metadata: RecordMetadata, exception: Exception) =&gt; &#123;</span><br><span class="line">          logger.info(</span><br><span class="line">            s&quot;&quot;&quot;in transaction per msg ,send message to broker successful,</span><br><span class="line">        id: $&#123;eventStore.id&#125;, topic: $&#123;metadata.topic&#125;, offset: $&#123;metadata.offset&#125;, partition: $&#123;metadata.partition&#125;&quot;&quot;&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">      //æ²¡æœ‰å¼‚å¸¸ï¼Œæäº¤äº‹åŠ¡</span><br><span class="line">producer.commitTransaction()</span><br><span class="line">    &#125; catch &#123;</span><br><span class="line">      case e: Exception =&gt;</span><br><span class="line">      //å›æ»šäº‹åŠ¡</span><br><span class="line">        producer.abortTransaction()</span><br><span class="line">        logger.error(e.getMessage, e)</span><br><span class="line">        logger.error(&quot;send message failed,topic: &#123;&#125;&quot;, topic)</span><br><span class="line">        throw e</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç èƒ½å¤Ÿä¿éšœåœ¨æ‰¹é‡å‘é€æ¶ˆæ¯æ—¶çš„äº‹åŠ¡ä¸€è‡´æ€§ï¼Œè¦ä¹ˆæ¶ˆæ¯å…¨éƒ¨å‘é€æˆåŠŸï¼Œæäº¤äº‹åŠ¡ï¼Œå¦‚æœå‡ºç°ä¸€æ¡å¤±è´¥ï¼Œåˆ™äº‹åŠ¡å›æ»šã€‚</p><p>å½“ç„¶ï¼Œä¸ºäº†é…åˆäº‹åŠ¡æ¶ˆæ¯ï¼Œæ¶ˆè´¹ç«¯éœ€è¦åœ¨åˆ›å»ºkafkaæ¶ˆè´¹è€…å®ä¾‹æ—¶ï¼Œé…ç½®æ¶ˆæ¯è·å–çš„éš”ç¦»çº§åˆ«ä¸ºï¼Œ<code>read_committed</code>ï¼ˆè¯»å–å·²ç»æäº¤çš„æ¶ˆæ¯ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties.put(&quot;isolation.level&quot;, &quot;read_committed&quot;);</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±å¯ä»¥å®Œæˆäº‹åŠ¡æ¶ˆæ¯çš„å‘é€ï¼Œæ—¢å¯ä»¥ä¿éšœäº‹åŠ¡æ¶ˆæ¯çš„å‘é€ï¼Œåˆèƒ½ä¿éšœå¹‚ç­‰æ€§ï¼Œåœ¨æ¶ˆæ¯å‘é€ç«¯ä¸è€ƒè™‘éå¸¸æç«¯çš„æƒ…å†µä¸‹ï¼Œæ˜¯å·²ç»åšåˆ°äº†<strong>æ­£å¥½ä¸€æ¬¡</strong>çš„è¯­ä¹‰,è€ƒè™‘æç«¯æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥åšåˆ°è‡³å°‘ä¸€æ¬¡ã€‚</p><hr><h4 id="æ¶ˆæ¯å®šæ—¶è½®è¯¢"><a href="#æ¶ˆæ¯å®šæ—¶è½®è¯¢" class="headerlink" title="æ¶ˆæ¯å®šæ—¶è½®è¯¢"></a>æ¶ˆæ¯å®šæ—¶è½®è¯¢</h4><blockquote><p>ä¸šåŠ¡ç³»ç»Ÿè§¦å‘äº‹ä»¶ä¹‹åï¼Œä¼šå°†äº‹ä»¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç„¶åä¼šæœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡çº¿ç¨‹å®šæ—¶å»è½®è¯¢æ•°æ®åº“è·å–æ¶ˆæ¯ï¼Œå¹¶ä½¿ç”¨kafkaå°†æ¶ˆæ¯å‘é€åˆ°brokerã€‚</p></blockquote><h5 id="è®¾è®¡ç›®çš„"><a href="#è®¾è®¡ç›®çš„" class="headerlink" title="è®¾è®¡ç›®çš„"></a>è®¾è®¡ç›®çš„</h5><p>ä½¿ç”¨æ•°æ®åº“çš„äº‹åŠ¡æ¥ä¿éšœä¸šåŠ¡æœåŠ¡æ¥å£äº§ç”Ÿçš„äº‹ä»¶è·Ÿä¸šåŠ¡è¡Œä¸ºä¿æŒå¼ºä¸€è‡´æ€§ï¼Œè€Œåœ¨å®šæ—¶å‘é€æ¶ˆæ¯æ—¶ï¼Œä¹Ÿä¼šä½¿ç”¨æ•°æ®åº“äº‹åŠ¡+kafkaçš„äº‹åŠ¡ï¼Œå°†æ¶ˆæ¯å‘é€å‡ºå»ï¼š</p><p>çœ‹ä¸‹é¢è¿™æ®µå‘é€æ¶ˆæ¯çš„é€»è¾‘ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">def doPublishMessages(): Unit = &#123;</span><br><span class="line">    // æ¶ˆæ¯æ€»æ¡æ•°è®¡æ•°å™¨</span><br><span class="line">    val counter = new AtomicInteger(0)</span><br><span class="line">    // æ‰¹é‡å¤„ç†, æ¯æ¬¡ä»æ•°æ®åº“å–å‡ºæ¶ˆæ¯çš„æœ€å¤§æ•°é‡(window)</span><br><span class="line">    val window = 100</span><br><span class="line">    // å•è½®å¤„ç†çš„æ¶ˆæ¯è®¡æ•°å™¨, ç”¨äºæ§åˆ¶å¾ªç¯é€€å‡º.</span><br><span class="line">    val resultSetCounter = new AtomicInteger(window)</span><br><span class="line">    //å½“ä¸€æ¬¡è½®è¯¢æ‹¿åˆ°çš„æ¶ˆæ¯è¾¾åˆ°äº†æœ€å¤§æ•°æ—¶ï¼Œä¼šå†æ¬¡è½®è¯¢æ•°æ®åº“ï¼Œä»¥ç¡®ä¿è¿˜æœ‰æ¶ˆæ¯æ²¡æœ‰è¢«å‘é€</span><br><span class="line">    while (resultSetCounter.get() == window) &#123;</span><br><span class="line">      resultSetCounter.set(0)</span><br><span class="line">      //æ•°æ®åº“äº‹åŠ¡å¼€å¯</span><br><span class="line">      dataSource.withTransaction[Unit](conn =&gt; &#123;</span><br><span class="line">        //AAA</span><br><span class="line">        conn.eachRow[EventStore](sql&quot;SELECT * FROM common_event limit $&#123;window&#125; FOR UPDATE&quot;)(event =&gt; &#123;</span><br><span class="line">          conn.executeUpdate(sql&quot;DELETE FROM common_event WHERE id = $&#123;event.id&#125;&quot;)</span><br><span class="line">          //Kafkaäº‹åŠ¡ç¡®ä¿sendå¤±è´¥ä¼šå›æ»šå¹¶æŠ›å¼‚å¸¸</span><br><span class="line">          producer.send(topic, event.id, event.eventBinary)</span><br><span class="line">          resultSetCounter.incrementAndGet()</span><br><span class="line">          counter.incrementAndGet()</span><br><span class="line">        //AAA</span><br><span class="line">           </span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>çœ‹ä¸Šé¢AAAå—çš„ä»£ç ï¼Œæˆ‘ä»¬å°†æ¶ˆæ¯è·å–å’Œkafkaç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ”¾åˆ°äº†ä¸€ä¸ªäº‹åŠ¡é‡Œ,é¦–å…ˆè·å–åˆ°æ¶ˆæ¯ï¼Œç„¶ååˆ é™¤å½“å‰æ¶ˆæ¯ï¼Œå†å°†æ¶ˆæ¯å‘é€åˆ°kafkaä¸Šï¼Œä¿éšœæ¶ˆæ¯åˆšå¥½ä¸€æ¬¡çš„å‘é€ã€‚<br></p><p>å¦‚æœè¿™æ—¶å€™å‡ºç°å¼‚å¸¸(kafkaå‘é€æ•°æ®å¼‚å¸¸æˆ–è€…åˆ é™¤æ•°æ®åº“è®°å½•å¼‚å¸¸)ï¼Œäº‹åŠ¡å°±ä¼šå›æ»šï¼Œæ¶ˆæ¯æ²¡æœ‰è¢«çœŸæ­£åˆ é™¤ï¼Œä¸‹ä¸€æ¬¡è½®è¯¢ä¼šå†æ¬¡æ‰§è¡Œè¿™ä¸ªè¿‡ç¨‹ã€‚<br>ä¸è€ƒè™‘æç«¯çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„åšæ³•å¯ä»¥ä¿è¯æ­£å¥½ä¸€æ¬¡çš„æ¶ˆæ¯å‘é€ã€‚<br></p><p>è€ƒè™‘æç«¯æƒ…å†µï¼Œå³æ¶ˆæ¯çš„åˆ é™¤å’Œkafkaå‘é€éƒ½æˆåŠŸäº†ï¼Œè€Œåœ¨äº‹åŠ¡æäº¤é‚£è¡Œä»£ç æ—¶ï¼Œå‡ºç°å¼‚å¸¸ã€‚è¿™æ—¶å€™ï¼Œæ•°æ®åº“ä¼šå›æ»šï¼Œä½†æ˜¯æ¶ˆæ¯å·²ç»è¢«å‘é€åˆ°äº†kafkaä¸Šï¼Œå› æ­¤è¿™é‡Œè¿˜æ˜¯ä¼šå‡ºç°æ¶ˆæ¯çš„é‡å¤å‘é€ï¼Œä½†æ˜¯åšåˆ°äº†è‡³å°‘ä¸€æ¬¡, è€Œä¸”è¿™ç§æƒ…å†µæ˜¯æå…¶æç«¯çš„ã€‚</p><h5 id="å‘é€ç«¯æ€»ç»“ï¼š"><a href="#å‘é€ç«¯æ€»ç»“ï¼š" class="headerlink" title="å‘é€ç«¯æ€»ç»“ï¼š"></a>å‘é€ç«¯æ€»ç»“ï¼š</h5><p>æˆ‘ä»¬å·²ç»åœ¨ä¸è€ƒè™‘æç«¯çš„æƒ…å†µä¸‹ï¼ˆæœåŠ¡å™¨å®•æœºï¼‰åšåˆ°äº†æ­£å¥½ä¸€æ¬¡ï¼Œè€ƒè™‘æç«¯çš„æƒ…å†µä¸‹ï¼Œåšåˆ°äº†è‡³å°‘ä¸€æ¬¡ã€‚<br></p><p>ç„¶è€Œï¼Œæç«¯æƒ…å†µè¿˜æ˜¯æœ‰å¯èƒ½ä¼šå‡ºç°ï¼Œå› æ­¤æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬è¿˜ä¼šåœ¨äº‹ä»¶æ¶ˆæ¯ä¸Šé¢æ ‡è®°ä¸€ä¸ªäº‹ä»¶å”¯ä¸€IDï¼Œä»¥æ”¯æŒç”¨æˆ·åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸Šæ¶ˆè´¹æ¶ˆæ¯çš„æ—¶å€™åšå¹‚ç­‰å¤„ç†ã€‚<br></p><p>å¦‚ä¸‹æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ä¸šåŠ¡äº‹ä»¶çš„å®šä¹‰ã€‚ï¼ˆè¯¦æƒ…å‚è€ƒæ¨æƒæ–‡ç« ï¼‰</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">PublishedSkuEvent</span>(<span class="params"></span></span></span><br><span class="line"><span class="class"><span class="params">   //äº‹ä»¶å”¯ä¸€id</span></span></span><br><span class="line"><span class="class"><span class="params">   id : <span class="type">Long</span>, </span></span></span><br><span class="line"><span class="class"><span class="params">   //äº‹ä»¶ä¸­æºå¸¦çš„å…·ä½“ä¸šåŠ¡</span></span></span><br><span class="line"><span class="class"><span class="params">   skuIds : <span class="type">List</span>[<span class="type">Long</span>]</span></span></span><br><span class="line"><span class="class"><span class="params"> </span>)</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½éœ€è¦è¿™ä¹ˆå¼ºåŠ›çš„ä¿éšœï¼Œæ¯”å¦‚å¯¹é‡å¤æ¶ˆæ¯ä¸æ˜¯å¾ˆæ•æ„Ÿçš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸éœ€è¦åšåˆ°æ¶ˆæ¯å¹‚ç­‰æ€§å’Œäº‹åŠ¡æ¶ˆæ¯ï¼Œåªéœ€è¦åšåˆ°æ¶ˆæ¯ä¸ä¼šä¸¢å¤±å³å¯ã€‚</p><hr><p>å¯¹äºå»¶è¿Ÿæ•æ„Ÿçš„ï¼Œæˆ‘ä»¬å…è®¸ç”Ÿäº§è€…æŒ‡å®šå®ƒæƒ³è¦çš„è€ç”¨æ€§æ°´å¹³ã€‚å¦‚ç”Ÿäº§è€…å¯ä»¥æŒ‡å®šå®ƒè·å–éœ€ç­‰å¾…10æ¯«ç§’é‡çº§ä¸Šçš„å“åº”ã€‚ç”Ÿäº§è€…ä¹Ÿå¯ä»¥æŒ‡å®šå¼‚æ­¥å‘é€ï¼Œæˆ–åªç­‰å¾…leaderï¼ˆä¸éœ€è¦å‰¯æœ¬çš„å“åº”ï¼‰æœ‰å“åº”ï¼Œ</p><hr><h4 id="Eventbusæ¶ˆæ¯ç«¯ï¼ˆConsumerï¼‰"><a href="#Eventbusæ¶ˆæ¯ç«¯ï¼ˆConsumerï¼‰" class="headerlink" title="Eventbusæ¶ˆæ¯ç«¯ï¼ˆConsumerï¼‰"></a>Eventbusæ¶ˆæ¯ç«¯ï¼ˆConsumerï¼‰</h4><blockquote><p>æ¶ˆè´¹ç«¯åˆ†ä¸ºé¢†åŸŸå†…äº‹ä»¶æ¶ˆè´¹å’Œè·¨é¢†åŸŸäº‹ä»¶æ¶ˆè´¹ï¼Œé¢†åŸŸå†…ç”±äºåœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…ï¼Œå¼ºä¸€è‡´æ€§ï¼Œå®ç°ç®€å•ï¼Œæˆ‘ä»¬è¿™é‡Œä¸å†èµ˜è¿°ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹å¦‚ä½•åšåˆ°è·¨é¢†åŸŸæ¶ˆæ¯è®¢é˜…å’Œæ¥æ”¶ã€‚</p></blockquote><h5 id="æ¶ˆæ¯çš„ç¼–è§£ç "><a href="#æ¶ˆæ¯çš„ç¼–è§£ç " class="headerlink" title="æ¶ˆæ¯çš„ç¼–è§£ç "></a>æ¶ˆæ¯çš„ç¼–è§£ç </h5><p>å‰æ–‡æ²¡æœ‰æåˆ°çš„ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†äº‹ä»¶å®šä¹‰ä¸ºthriftç»“æ„ä½“ï¼Œå¹¶å°†å…¶åºåˆ—åŒ–ä¸ºå­—èŠ‚æµä¹‹åæŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ï¼Œkafkaå‘é€çš„æ—¶å€™, æ¶ˆæ¯å†…å®¹æ˜¯åºåˆ—åŒ–ä¹‹åçš„äºŒè¿›åˆ¶byteæ•°ç»„ï¼Œæ¶ˆè´¹ç«¯åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œéœ€è¦è¿›è¡Œååºåˆ—åŒ–å’Œè§£ç åï¼Œæ‰èƒ½å¾—åˆ°æ¶ˆæ¯å¯¹è±¡ã€‚</p><p>å› æ­¤æˆ‘ä»¬è®¾è®¡çš„apiå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@KafkaConsumer(groupId = &quot;TEST01&quot;, topic =&quot;GOODS&quot;)</span><br><span class="line">public class EventConsumer &#123;</span><br><span class="line">   //å®šä¹‰æ¶ˆæ¯çš„è§£ç å™¨</span><br><span class="line">    @KafkaListener(serializer = GoodsCreatedEventSerializer.class)</span><br><span class="line">    public void onGoodsCreatedEvent(GoodsCreatedEvent event) &#123;</span><br><span class="line">        // dosomething</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @KafkaListener(serializer = GoodsRegisteredEventSerializer.class)</span><br><span class="line">    public void onGoodsRegisteredEvent(GoodsRegisteredEvent event) &#123;</span><br><span class="line">        // dosomething</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@KafkaConsumer(groupId = &quot;TEST01&quot;, topic =&quot;SUPPLIER&quot;)</span><br><span class="line">public class EventConsumer &#123;</span><br><span class="line">   </span><br><span class="line">    @KafkaListener(serializer = SupplierCreatedEventSerializer.class)</span><br><span class="line">    public void onSupplierCreatedEvent(SupplierCreatedEvent event) &#123;</span><br><span class="line">        // dosomething</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@KafkaConsumer</code>æ ‡äºç›‘å¬ç±»ä¸Šï¼Œå®šä¹‰æ¶ˆè´¹è€…ç»„å’Œå…³å¿ƒçš„topic<br><br><code>@KafkaListener</code>æ ‡äºç›‘å¬æ–¹æ³•ä¸Š,å®šä¹‰è¯¥æ–¹æ³•ç›‘å¬çš„æ¶ˆæ¯ç±»å‹æ‰€éœ€è¦çš„<strong>åºåˆ—åŒ–å™¨çš„class</strong>ã€‚</p><h5 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h5><ul><li>ä¸šåŠ¡ç³»ç»Ÿéœ€è¦æŠŠå¦‚ä¸Šä¸¤ä¸ªæ¶ˆæ¯ç›‘å¬ç±»äº¤ç»™Springè¿›è¡Œç®¡ç†ã€‚</li><li>åœ¨å¯åŠ¨å®¹å™¨æ—¶ï¼Œeventbusç±»åº“é‡Œçš„<code>MsgAnnotationBeanPostProcessor</code>ä¼šå¯¹springç®¡ç†çš„beanè¿›è¡Œæ‰«æï¼Œå¦‚æœå‘ç°æœ‰beanç±»ä¸Šé¢æœ‰<code>@KafkaConsumer</code>æ³¨è§£æ—¶ï¼Œå°±ä¼šå°†è¿›ä¸€æ­¥åˆ¤æ–­è¯¥ç±»ä¸‹é¢æ˜¯å¦æœ‰æ ‡æœ‰<code>@KafkaListener</code>çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼ˆåªæ˜¾ç¤ºä¸»è¦é€»è¾‘ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ä¾‹åŒ–åŠä¾èµ–æ³¨å…¥å®Œæˆåã€åœ¨ä»»ä½•åˆå§‹åŒ–ä»£ç ï¼ˆæ¯”å¦‚é…ç½®æ–‡ä»¶ä¸­çš„init-methodï¼‰è°ƒç”¨ä¹‹åè°ƒç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">    Class&lt;?&gt; targetClass = AopUtils.getTargetClass(bean);</span><br><span class="line">    <span class="comment">//è·å–ç±»ä¸Šæ˜¯å¦æœ‰æ³¨è§£ @KafkaConsumer</span></span><br><span class="line">    Optional&lt;KafkaConsumer&gt; kafkaConsumer = findListenerAnnotations(targetClass);</span><br><span class="line">    <span class="comment">//ç±»ä¸Šæ˜¯å¦æœ‰æ³¨è§£</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">boolean</span> hasKafkaConsumer = kafkaConsumer.isPresent();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (hasKafkaConsumer) &#123;</span><br><span class="line">        <span class="comment">//æ–¹æ³•åˆ—è¡¨ ï¼ŒæŸ¥æ‰¾æ–¹æ³•ä¸Šæ ‡æœ‰ @KafkaListener çš„æ³¨è§£</span></span><br><span class="line">        Map&lt;Method, Set&lt;KafkaListener&gt;&gt; annotatedMethods = MethodIntrospector.selectMethods(targetClass,</span><br><span class="line">            (MethodIntrospector.MetadataLookup&lt;Set&lt;KafkaListener&gt;&gt;) method -&gt; &#123;</span><br><span class="line">                Set&lt;KafkaListener&gt; listenerMethods = findListenerAnnotations(method);</span><br><span class="line">                <span class="keyword">return</span> (!listenerMethods.isEmpty() ? listenerMethods : <span class="keyword">null</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="keyword">if</span> (annotatedMethods.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">// throw Exception</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!annotatedMethods.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">// Non-empty set of methods</span></span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;Method, Set&lt;KafkaListener&gt;&gt; entry : annotatedMethods.entrySet()) &#123;</span><br><span class="line">                Method method = entry.getKey();</span><br><span class="line">                <span class="keyword">for</span> (KafkaListener listener : entry.getValue()) &#123;</span><br><span class="line">                    <span class="comment">// process annotation information</span></span><br><span class="line">                    processKafkaListener(kafkaConsumer.get(), listener, method, bean, beanName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            logger.info(<span class="string">"there are &#123;&#125; methods have @KafkaListener on This bean "</span>, binlogMethods.size());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.logger.info(<span class="string">"No @KafkaConsumer annotations found on bean type: "</span> + bean.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœå½“å‰beanæœ‰<code>@KafkaConsumer</code>æ³¨è§£å’Œ<code>@KafkaListener</code>æ³¨è§£ï¼Œå°±ä¼šåˆ›å»ºå½“å‰<code>consumer</code>ä¸Šä¸‹æ–‡ï¼Œä¿å­˜è¯¥ç±»çš„<code>groupId,topic,serializer</code>ç­‰ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯æ³¨å†Œåˆ°<code>KafkaListenerRegistrar</code>ä¸Šé¢ï¼ŒKafkaListenerRegistrarä¼šä»¥groupIdå’Œtopicè”åˆä½œä¸ºkeyï¼Œå¹¶åˆ›å»ºä¸€ä¸ª<code>kafkaConsumer</code>å®ä¾‹ï¼Œæ”¾å…¥ä¸€ä¸ªå®ä¾‹åˆ—è¡¨ä¸­ï¼Œç›¸åŒçš„groupIdå’Œtopicä¼šä½¿ç”¨åŒä¸€ä¸ªkafkaConsumerå®ä¾‹ã€‚ä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KafkaListenerRegistrar</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="comment">//kafkaConsumerå®ä¾‹åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, MsgKafkaConsumer&gt; EVENT_CONSUMERS = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ³¨å†Œä¸šåŠ¡consumer</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerEndpoint</span><span class="params">(ConsumerEndpoint endpoint)</span> </span>&#123;</span><br><span class="line">        Assert.notNull(endpoint, <span class="string">"Endpoint must be set"</span>);</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">            addConsumer(endpoint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ·»åŠ consumeråˆ°åˆ—è¡¨ï¼Œæ ¹æ®keyåˆ¤æ–­</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addConsumer</span><span class="params">(ConsumerEndpoint endpoint)</span> </span>&#123;</span><br><span class="line">        String groupId = endpoint.getGroupId();</span><br><span class="line">        String topic = endpoint.getTopic();</span><br><span class="line">        String kafkaHost = endpoint.getKafkaHost();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// é»˜è®¤ group id</span></span><br><span class="line">            String className = endpoint.getBean().getClass().getName();</span><br><span class="line">            groupId = <span class="string">""</span>.equals(groupId) ? className : groupId;</span><br><span class="line">            String consumerKey = groupId + <span class="string">":"</span> +   topic;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­key</span></span><br><span class="line">            <span class="keyword">if</span> (EVENT_CONSUMERS.containsKey(consumerKey)) &#123;</span><br><span class="line">                EVENT_CONSUMERS.get(consumerKey).addConsumer(endpoint);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                MsgKafkaConsumer consumer = <span class="keyword">new</span> MsgKafkaConsumer(kafkaHost, groupId, topic);</span><br><span class="line">                consumer.addConsumer(endpoint);</span><br><span class="line">                EVENT_CONSUMERS.put(consumerKey, consumer);</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(e.getMessage(), e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å½“æ‰€æœ‰beanè¢«æ‰«æå®Œåï¼Œä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯åŠ¨kafkaConsumerå®ä¾‹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"ready to start consumer ,event consumer size &#123;&#125;, binlog consumer size &#123;&#125;"</span>, EVENT_CONSUMERS.size(), BINLOG_CONSUMERS.size());</span><br><span class="line"></span><br><span class="line">        EVENT_CONSUMERS.values().forEach(Thread::start);</span><br><span class="line"></span><br><span class="line">        BINLOG_CONSUMERS.values().forEach(Thread::start);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œåˆ›å»ºçš„å®ä¾‹MsgKafkaConsumerå¤„ç†æ¶ˆæ¯æ¥æ”¶å’Œè§£ç çš„é€»è¾‘ï¼Œå¹¶å°†è§£ç åç”Ÿäº§çš„å…·ä½“äº‹ä»¶å†…å®¹ä½œä¸ºå‚æ•°ï¼Œé€šè¿‡åå°„è°ƒç”¨å…³æ³¨äº†è¯¥topicçš„æ–¹æ³•ï¼Œä¸»è¦é€»è¾‘å¦‚ä¸‹ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"> public void run() &#123;</span><br><span class="line">        logger.info(&quot;[KafkaConsumer][&#123;&#125;][run] &quot;, this.groupId + &quot;:&quot; + this.topic);</span><br><span class="line">        this.consumer.subscribe(Arrays.asList(this.topic));</span><br><span class="line">        while (true) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                ConsumerRecords&lt;Long, byte[]&gt; records = consumer.poll(100);</span><br><span class="line">                for (ConsumerRecord&lt;Long, byte[]&gt; record : records) &#123;</span><br><span class="line">                    logger.info(&quot;receive message,ready to process, topic: &#123;&#125; ,partition: &#123;&#125; ,offset: &#123;&#125;&quot;,</span><br><span class="line">                            record.topic(), record.partition(), record.offset());</span><br><span class="line"></span><br><span class="line">                    for (ConsumerEndpoint consumer : bizConsumers) &#123;</span><br><span class="line">                        dealMessage(consumer, record.value());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                try &#123;</span><br><span class="line">consumer.commitSync();</span><br><span class="line">                &#125; catch (CommitFailedException e) &#123;</span><br><span class="line">                    logger.error(&quot;commit failed&quot;, e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                logger.error(&quot;[KafkaConsumer][&#123;&#125;][run] &quot; + e.getMessage(), groupId + &quot;:&quot; + topic, e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ”¶åˆ°æ¶ˆæ¯åå…·ä½“å¤„ç†</span><br><span class="line">    protected void dealMessage(ConsumerEndpoint consumer, byte[] message) &#123;</span><br><span class="line">        logger.info(&quot;Iterator and process biz message groupId: &#123;&#125;, topic: &#123;&#125;&quot;, groupId, topic);</span><br><span class="line"></span><br><span class="line">        KafkaMessageProcessor processor = new KafkaMessageProcessor();</span><br><span class="line">        String eventType = processor.getEventType(message);</span><br><span class="line"></span><br><span class="line">        List&lt;Class&lt;?&gt;&gt; parameterTypes = consumer.getParameterTypes();</span><br><span class="line"></span><br><span class="line">        long count = parameterTypes.stream()</span><br><span class="line">                .filter(param -&gt; param.getName().equals(eventType))</span><br><span class="line">                .count();</span><br><span class="line"></span><br><span class="line">        if (count &gt; 0) &#123;</span><br><span class="line">            byte[] eventBinary = processor.getEventBinary();</span><br><span class="line"></span><br><span class="line">            try &#123;</span><br><span class="line">                Object event = processor.decodeMessage(eventBinary, consumer.getEventSerializer());</span><br><span class="line">                consumer.getMethod().invoke(consumer.getBean(), event);</span><br><span class="line">                logger.info(&quot;invoke message end ,bean: &#123;&#125;, method: &#123;&#125;&quot;, consumer.getBean(), consumer.getMethod());</span><br><span class="line">            &#125; catch (IllegalAccessException | InvocationTargetException | IllegalArgumentException e) &#123;</span><br><span class="line">                logger.error(&quot;å‚æ•°ä¸åˆæ³•ï¼Œå½“å‰æ–¹æ³•è™½ç„¶è®¢é˜…æ­¤topicï¼Œä½†æ˜¯ä¸æ¥æ”¶å½“å‰äº‹ä»¶:&quot; + eventType, e);</span><br><span class="line">            &#125; catch (TException e) &#123;</span><br><span class="line">                logger.error(e.getMessage(), e);</span><br><span class="line">                logger.error(&quot;ååºåˆ—åŒ–äº‹ä»¶&quot; + eventType + &quot;å‡ºé”™&quot;);</span><br><span class="line">            &#125; catch (InstantiationException e) &#123;</span><br><span class="line">                logger.error(e.getMessage(), e);</span><br><span class="line">                logger.error(&quot;å®ä¾‹åŒ–äº‹ä»¶&quot; + eventType + &quot;å¯¹åº”çš„ç¼–è§£ç å™¨å¤±è´¥&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            logger.debug(&quot;æ–¹æ³• [ &#123;&#125; ] ä¸æ¥æ”¶å½“å‰æ”¶åˆ°çš„æ¶ˆæ¯ç±»å‹ &#123;&#125; &quot;, consumer.getMethod(), eventType);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ul><p>æ¶ˆè´¹è€…è®¾ç½®ä¸ºæ‰‹åŠ¨æäº¤åç§»é‡ï¼Œåœ¨ä¸€æ¬¡pollè¯·æ±‚ä¸­ï¼Œå½“æ¶ˆæ¯æˆåŠŸæ¶ˆè´¹åï¼Œä¼šæ‰¹é‡æäº¤åç§»é‡ï¼Œå¹¶ä¸”æ˜¯åŒæ­¥çš„ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœå› ä¸ºæ¶ˆæ¯æ¶ˆè´¹æ—¶ï¼Œåœ¨æœªæäº¤åç§»é‡ä¹‹å‰ï¼Œæ¶ˆæ¯æ˜¯ä¸ä¼šä¸¢å¤±çš„ï¼ˆæœªå¤„ç†ï¼‰ï¼Œä½†æ˜¯å½“æ¶ˆæ¯æ¶ˆè´¹åï¼Œå‡†å¤‡æäº¤åç§»é‡æ˜¯ç³»ç»Ÿå‡ºé”™äº†ï¼Œè¿™æ—¶å€™ä¼šå¯¼è‡´é‡å¤æ¶ˆè´¹ï¼Œå› æ­¤ä¹Ÿæ˜¯è‡³å°‘ä¸€æ¬¡çš„è¯­ä¹‰ã€‚<br><br>æ‰€ä»¥è¿™é‡Œäº¤ç»™ä¸šåŠ¡ç³»ç»Ÿæ—¶ï¼Œè¿˜æ˜¯éœ€è¦ä¸šåŠ¡å»å®ç°ä¸šåŠ¡å»é‡ã€‚</p><h5 id="æ¶ˆè´¹ç«¯æ³¨æ„äº‹é¡¹"><a href="#æ¶ˆè´¹ç«¯æ³¨æ„äº‹é¡¹" class="headerlink" title="æ¶ˆè´¹ç«¯æ³¨æ„äº‹é¡¹"></a>æ¶ˆè´¹ç«¯æ³¨æ„äº‹é¡¹</h5><p>æˆ‘ä»¬åœ¨topicçš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ›´ç»†ç²’åŒ–çš„åŒºåˆ†,æ¶ˆæ¯èƒ½å¤Ÿæ ¹æ®è®¢é˜…è€…æ‰€æ„Ÿå…´è¶£çš„äº‹ä»¶ç±»å‹è¿›è¡Œé€‰æ‹©æ€§çš„å‘é€ã€‚<br></p><p>å› æ­¤ï¼Œå³ä½¿ä¸¤ä¸ªè®¢é˜…è€…æ–¹æ³•éƒ½è®¢é˜…äº†åŒä¸€ä¸ªtopicï¼Œkafkaæ¶ˆè´¹è€…ä»ç„¶ä¼šæ ¹æ®æ¥æ”¶åˆ°çš„æ¶ˆæ¯çš„ç±»å‹å’Œè®¢é˜…è€…æ–¹æ³•çš„æ‰€æ„Ÿå…´è¶£çš„äº‹ä»¶ç±»å‹è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœå½“å‰æ¥æ”¶åˆ°çš„äº‹ä»¶ä¸è®¢é˜…äº‹ä»¶ä¸€è‡´ï¼Œä¾¿ä¼šé€šè¿‡åå°„<strong>è°ƒç”¨è®¢é˜…è€…æ–¹æ³•</strong>ï¼Œå¹¶å°†æ”¶åˆ°çš„å…·ä½“äº‹ä»¶ä¹Ÿä¼ é€’è¿‡å»ï¼Œäº‹ä»¶æ¥æ”¶æˆåŠŸã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>å¦‚æœ<code>kafkaConsumer</code>ä»brokeræ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œè§£ç ä¹‹åå‘ç°äº‹ä»¶ç±»å‹ä¸º<code>UserCreated</code>,é‚£ä»–åªä¼šnotifyæ¥æ”¶å‚æ•°ä¸º<code>UserCreated</code>äº‹ä»¶çš„æ–¹æ³•ï¼Œè€Œä¸ä¼šå»è°ƒç”¨æ¥æ”¶<code>UserRegisted</code>çš„è®¢é˜…è€…æ–¹æ³•ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>DDDé¢†åŸŸäº‹ä»¶çš„æ¶ˆæ¯æ€»çº¿åˆ†æå°±åˆ°è¿™é‡Œï¼Œæœ¬æ–‡é‡ç‚¹è®²äº†è·¨é¢†åŸŸæ—¶ï¼Œé€šè¿‡kafkaæ¶ˆæ¯ä¸­é—´ä»¶å¦‚ä½•åšåˆ°æ¶ˆæ¯çš„ç¨³å®šå‘é€å’Œæ¥æ”¶ï¼Œä¸å‡ºç°æ¶ˆæ¯ä¸¢å¤±ï¼Œè§¦å‘äº‹ä»¶è€Œæœªå‘é€ç­‰æƒ…å†µã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;DDD-äº‹ä»¶æ€»çº¿å®ç°æ¶æ„åŸç†åˆ†æï¼ˆä¿®è®¢ç‰ˆï¼‰&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/dapeng-soa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;@å¤§é¹å¼€æº&lt;/a&gt;:åˆ«çœ‹æˆ‘æœ‰ç‚¹èŒï¼Œæˆ‘å¯ä»¥ç§’å˜å¤§é¹&lt;/p&gt;
&lt;h2 id=&quot;
      
    
    </summary>
    
    
      <category term="DDD" scheme="http://git66.com/tags/DDD/"/>
    
      <category term="é¢†åŸŸé©±åŠ¨è®¾è®¡" scheme="http://git66.com/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="é¢†åŸŸäº‹ä»¶" scheme="http://git66.com/tags/%E9%A2%86%E5%9F%9F%E4%BA%8B%E4%BB%B6/"/>
    
      <category term="eventbus" scheme="http://git66.com/tags/eventbus/"/>
    
      <category term="dapeng" scheme="http://git66.com/tags/dapeng/"/>
    
  </entry>
  
  <entry>
    <title>é¢†åŸŸäº‹ä»¶åŠäº‹ä»¶æ€»çº¿EventBusä½¿ç”¨å®è·µ</title>
    <link href="http://git66.com/2018/03/10/DDD-event-bus/"/>
    <id>http://git66.com/2018/03/10/DDD-event-bus/</id>
    <published>2018-03-10T15:49:49.000Z</published>
    <updated>2018-03-14T03:49:59.415Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://github.com/dapeng-soa" target="_blank" rel="noopener">@å¤§é¹å¼€æº</a>:åˆ«çœ‹æˆ‘æœ‰ç‚¹èŒï¼Œæˆ‘å¯ä»¥ç§’å˜å¤§é¹ğŸ˜„</p></blockquote><p><img src="http://oqr3htxnb.bkt.clouddn.com/18-3-10/59987509.jpg" alt=""></p><h1 id="äº†è§£-DDD-ä¸é¢†åŸŸäº‹ä»¶"><a href="#äº†è§£-DDD-ä¸é¢†åŸŸäº‹ä»¶" class="headerlink" title="äº†è§£ DDD ä¸é¢†åŸŸäº‹ä»¶"></a>äº†è§£ DDD ä¸é¢†åŸŸäº‹ä»¶</h1><blockquote><p>åœ¨è¿‡å»çš„ 30 å¤šå¹´ï¼Œå°±å·²ç»æœ‰é¢†åŸŸå»ºæ¨¡å’Œè®¾è®¡çš„æ€æ½®ï¼›Eric Evans å°†å…¶å®šä¹‰ä¸ºé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain-Driven Designï¼Œç®€ç§°DDDï¼‰ã€‚é¢†åŸŸæ¨¡å‹æ˜¯é¢†åŸŸé©±åŠ¨çš„æ ¸å¿ƒï¼Œè€Œé¢†åŸŸäº‹ä»¶åˆä½œä¸ºé¢†åŸŸæ¨¡å‹ä¸­çš„é‡è¦æ¨¡å—ï¼Œè§£å†³äº†å¼€å‘è€…æ—¥å¸¸å¼€å‘ä¸­çš„å¾ˆå¤šç—›ç‚¹ï¼Œæ¯”å¦‚ï¼Œä»£ç è€¦åˆé™ä½ï¼Œæ‹“å±•æ€§å¢å¼ºã€‚</p></blockquote><p>é¢†åŸŸæ¨¡å‹ä¸æ˜¯é«˜å¤§ä¸Šçš„ä¸œè¥¿ï¼Œæ‰€æœ‰çš„é¢†åŸŸæ¨¡å‹æŠ½è±¡éƒ½æ¥è‡ªäºå…·ä½“çš„ä¸šåŠ¡åŠä¸šåŠ¡çš„éœ€æ±‚,è€Œè„±ç¦»ä¸šåŠ¡éœ€æ±‚çš„åº”ç”¨è®¾è®¡æ˜¯æ²¡æœ‰ä»»ä½•ä»·å€¼çš„ï¼</p><p>æ¯”å¦‚åœ¨Todayçš„æ–°é›¶å”®ç”µå•†æ¶æ„ä¸­:é—¨åº—ã€é‡‡è´­ã€è®¢å•ã€ä¾›åº”å•†ã€ç‰©æµã€å•†å“ã€å°è´¦ç­‰ç­‰éƒ½æ˜¯åº”ç”¨è®¾è®¡ä¸­çš„ä¸åŒé¢†åŸŸæ¨¡å‹ï¼Œå¿…ç„¶è¿˜å­˜åœ¨æˆ–å¤šæˆ–å°‘çš„å­åŸŸæ¨¡å‹ã€‚è€Œå¯¹äºæŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œè¿™äº›æŠ½è±¡å‡ºæ¥çš„é¢†åŸŸï¼Œå°±ä»£è¡¨åº”ç”¨æ¶æ„å­˜åœ¨è‹¥å¹²å­ç³»ç»Ÿã€‚</p><p>ç³»ç»Ÿä¸ç³»ç»Ÿé—´ï¼ŒåŠ¿å¿…ä¼šå­˜åœ¨æŸäº›å…³è”ã€‚æ¯”å¦‚è¯´Aé¢†åŸŸâ€œå‘ç”ŸæŸä»¶äº‹æƒ…â€ã€â€œå½“ä»€ä¹ˆäº§ç”Ÿå˜åŒ–çš„æ—¶å€™â€ã€â€œå¦‚æœä»€ä¹ˆçŠ¶æ€å˜æ›´â€â€¦ï¼Œéƒ½å°†å¯èƒ½æˆä¸ºBé¢†åŸŸæ‰€è¦å…³å¿ƒçš„äº‹ä»¶ã€‚</p><a id="more"></a><h1 id="äº‹ä»¶æ€»çº¿"><a href="#äº‹ä»¶æ€»çº¿" class="headerlink" title="äº‹ä»¶æ€»çº¿"></a>äº‹ä»¶æ€»çº¿</h1><ul><li><p>æˆ‘ä»¬å°†å‘å‡ºäº‹ä»¶é€šçŸ¥çš„ä¸€æ–¹ç§°ä¸ºå‘é€è€… (Publisher) ,å…³å¿ƒäº‹ä»¶çš„ä¸€æ–¹ç§°ä¸ºè®¢é˜…è€… (Subscriber)ã€‚</p></li><li><p>å…³å¿ƒä¸€ä»¶äº‹ï¼Œä¾¿ä¼šæ”¶é›†è¿™ä»¶äº‹æƒ…ç›¸å…³çš„ä¿¡æ¯ã€‚è€Œè¿™äº›éƒ½å°†ä¼šè½¬æ¢ä¸ºæ¶ˆæ¯æµï¼Œåœ¨è®¢é˜…è¿™ä»¶äº‹æƒ…çš„é¢†åŸŸé—´ä¼ æ’­ï¼Œä¸€æ—¦å‘½ä¸­æ‰€è¦å…³å¿ƒçš„äº‹æƒ…ï¼Œå°±ç”±è®¢é˜…è€…è‡ªè¡Œå»å¤„ç†æ¥ä¸‹æ¥çš„äº‹æƒ…ã€‚</p></li></ul><p><img src="http://oqr3htxnb.bkt.clouddn.com/18-3-12/24835978.jpg" alt=""><br>ä»¥ä¸Ševentbusç¤ºæ„å›¾å¤§è‡´æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>æœåŠ¡æ¥å£è§¦å‘äº‹ä»¶</li><li>eventbus åˆ†å‘äº‹ä»¶ï¼Œå¦‚æœå­˜åœ¨é¢†åŸŸå†…è®¢é˜…è€…ï¼Œç›´æ¥åˆ†å‘åˆ°æŒ‡å®šè®¢é˜…è€…ï¼Œå†å°†äº‹ä»¶æ¶ˆæ¯å­˜åº“å®šæ—¶å‘é€è‡³ kafka</li><li>å¦‚æœä¸å­˜åœ¨é¢†åŸŸå†…è®¢é˜…è€…ï¼Œäº‹ä»¶æ¶ˆæ¯ç›´æ¥å­˜åº“å¹¶å®šæ—¶å‘é€ kafka</li><li>æ¶ˆæ¯åœ¨å‘é€æˆåŠŸä»¥åä¼šè¢«æ¸…é™¤ï¼Œä¸ºäº†ä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚å»ºè®®äº‹ä»¶dbå…±äº«ä¸šåŠ¡æ•°æ®æº</li><li>è®¢é˜…è€…åªéœ€è¦è®¢é˜…äº‹ä»¶åŒæ–¹è§„çº¦å¥½çš„ topic å’Œäº‹ä»¶ç±»å‹å°±å¯ä»¥å‘½ä¸­éœ€è¦çš„äº‹ä»¶æ¶ˆæ¯</li></ul><h1 id="å¼•å…¥äº‹ä»¶çš„ä¾æ®"><a href="#å¼•å…¥äº‹ä»¶çš„ä¾æ®" class="headerlink" title="å¼•å…¥äº‹ä»¶çš„ä¾æ®"></a>å¼•å…¥äº‹ä»¶çš„ä¾æ®</h1><p>å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨æŸä»¶äº‹æƒ…å®Œæˆåï¼Œæ ¹æ®ä¸šåŠ¡å®ŒæˆçŠ¶æ€æ¥åšä¸šåŠ¡è·¯ç”±ã€‚</p><blockquote><p>æ¯”å¦‚è¯´å•†å“é¢†åŸŸçš„çš„å˜ä»·å®¡æ ¸ä¸šåŠ¡ï¼Œåœ¨å•†å“å˜ä»·å®¡æ ¸é€šè¿‡ä¹‹åï¼Œå¯¹åº”çš„å•†å“ä»·æ ¼ä¹Ÿéšä¹‹ç”Ÿæ•ˆï¼›ä»·æ ¼çš„å˜åŠ¨å¯èƒ½ä¼šå¼•èµ·é‡‡è´­ï¼Œä¾›åº”å•†ï¼ŒæŠ‘æˆ–è€…é—¨åº—ç­‰é¢†åŸŸä½œå‡ºå“åº”çš„è°ƒæ•´ã€‚</p></blockquote><p>è€Œæˆ‘ä»¬åœ¨ä»£ç ä¸­é€šå¸¸è¿™æ ·å»æè¿°ä¸ä»¥ä¸Šç±»ä¼¼çš„ä¸šåŠ¡ï¼š<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> code = updateSkuPriceApproveStatus(skuId,status)</span><br><span class="line">code <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span> =&gt; </span><br><span class="line">        <span class="comment">// successful, do A</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span> =&gt; </span><br><span class="line">        <span class="comment">// failure, do B</span></span><br><span class="line">    <span class="keyword">case</span> _ =&gt; </span><br><span class="line">        <span class="comment">// do ...</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// If I am A</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">A</span></span>:<span class="type">Unit</span> = &#123;</span><br><span class="line"><span class="comment">// update Price</span></span><br><span class="line"><span class="comment">// do purchase work</span></span><br><span class="line"><span class="comment">// do supplier work</span></span><br><span class="line"><span class="comment">// do Store work</span></span><br><span class="line"><span class="comment">// or more</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå½“ä¸»çº¿ä¸šåŠ¡é­é‡æŸä¸ªçŠ¶æ€æ—¶ï¼Œéœ€è¦ç¬¬ä¸‰æ–¹ç³»ç»Ÿä½œå‡ºåº”å¯¹ï¼Œæˆ‘ä»¬åœ¨ä¸»çº¿ä»»åŠ¡ä¸­åŠ å…¥äº†å†—é•¿çš„ä»£ç ç”šè‡³å¼•å…¥åˆ«äººçš„ api ï¼Œè¿™ä½¿å¾—æˆ‘çš„å•ä¸ªä¸šåŠ¡å˜çš„è‡ƒè‚¿ã€è¿‡åº¦è€¦åˆã€ä¸æ˜“é˜…è¯»ã€‚æ°å¥½é¢†åŸŸäº‹ä»¶å¸®åŠ©æˆ‘ä»¬æ›´åŠ ä¼˜é›…çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼</p><blockquote><p>å½“å¼•å…¥äº‹ä»¶åï¼Œdo A å°†å˜æˆäº† send eventA</p></blockquote><h1 id="å®è·µäº‹ä»¶æ€»çº¿"><a href="#å®è·µäº‹ä»¶æ€»çº¿" class="headerlink" title="å®è·µäº‹ä»¶æ€»çº¿"></a>å®è·µäº‹ä»¶æ€»çº¿</h1><blockquote><p>åœ¨ today ä¸­å°æœåŠ¡å›¢é˜Ÿçš„å„é¢†åŸŸå®è·µä¸­ï¼Œå·²ç»å¼€å§‹æŠ•äº§ eventbus ï¼Œå¹¶ä¸”æ•ˆæœå¯è§‚ï¼Œä¸‰æ–¹ç³»ç»Ÿçš„è®¢é˜…å¯¹æ¥ç›¸å½“ä¾¿æ·.é‚£è¿™æ ·çš„äº‹ä»¶æœºåˆ¶è¯¥å¦‚ä½•å»ä½¿ç”¨ï¼Ÿ</p></blockquote><p>ä¸ºäº†ç»™ç¬¬ä¸‰æ–¹ç³»ç»Ÿå’Œæœ¬éƒ¨é—¨çš„ä¸šåŠ¡å¼€å‘äººå‘˜æä¾›ä¸€è‡´æ€§çš„å¼€å‘ä½“éªŒï¼Œæˆ‘ä»¬å°†äº‹ä»¶æ€»çº¿ä»dapengçš„æ¡†æ¶ä¸­å‰¥ç¦»å‡ºæ¥, å•ç‹¬æä¾›äº†ä¸€å¥—ç±»åº“ç”¨äºå®ç°äº‹ä»¶çš„å‘å¸ƒä»¥åŠè®¢é˜…ã€‚</p><ul><li>äº‹ä»¶æ€»çº¿eventBusçš„æ ¸å¿ƒåº“</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;com.today&quot; % &quot;event-bus_2.12&quot; % &quot;0.1-SNAPSHOT&quot;</span><br></pre></td></tr></table></figure><ul><li>äº‹ä»¶å†…å®¹åŠçŠ¶æ€æš‚å­˜æ”¯æŒ</li><li>éœ€è¦åœ¨ä¸šåŠ¡æ•°æ®åº“åŠ å…¥ä¸€å¼ å¦‚ä¸‹ç»“æ„æ•°æ®è¡¨,è¿™å°†ä½œä¸ºäº‹ä»¶æ¶ˆæ¯çš„æš‚å­˜é˜Ÿåˆ—å’Œäº‹ä»¶å‘é€çŠ¶æ€å­˜å‚¨è¡¨</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`common_event`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>  <span class="keyword">COMMENT</span> <span class="string">'äº‹ä»¶id'</span>,</span><br><span class="line">  <span class="string">`event_type`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'äº‹ä»¶ç±»å‹'</span>,</span><br><span class="line">  <span class="string">`event_binary`</span> <span class="built_in">blob</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'äº‹ä»¶å†…å®¹'</span>,</span><br><span class="line">  <span class="string">`updated_at`</span> <span class="keyword">timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">current_timestamp</span>() <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">current_timestamp</span>() <span class="keyword">COMMENT</span> <span class="string">'æ›´æ–°æ—¶é—´'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œä»¥å•†å“å˜ä»·å®¡æ ¸çš„çŠ¶æ€å˜æ›´ä¸ºä¾‹ï¼Œäº†è§£åœ¨å¼€å‘ä¸­å¦‚ä½•åšäº‹ä»¶å‘é€ä¸è®¢é˜….</p></blockquote><p>å…·ä½“æ¥è¯´,å°±æ˜¯å››æ­¥:</p><ol><li>å®šä¹‰äº‹ä»¶ç»“æ„ä½“</li><li>åœ¨æœåŠ¡æ¥å£æ–¹æ³•ä¸­å£°æ˜å¾…å‘å¸ƒçš„äº‹ä»¶</li><li>é€šè¿‡EventBuså‘å¸ƒäº‹ä»¶</li><li>é€šè¿‡EventBusæ¥æ”¶äº‹ä»¶</li></ol><p>ä¸‹é¢å…·ä½“è¯´æ˜ä¸€ä¸‹æ¯ä¸ªæ­¥éª¤:</p><h2 id="å®šä¹‰äº‹ä»¶ç»“æ„ä½“"><a href="#å®šä¹‰äº‹ä»¶ç»“æ„ä½“" class="headerlink" title="å®šä¹‰äº‹ä»¶ç»“æ„ä½“"></a>å®šä¹‰äº‹ä»¶ç»“æ„ä½“</h2><p>1.äº‹ä»¶æ”¶å‘åŒæ–¹å…±åŒåå®šå®šä¹‰äº‹ä»¶æ¶ˆæ¯çš„å†…å®¹, ä¸€ä¸ªé¢†åŸŸçš„æ‰€æœ‰æ¶ˆæ¯å®šä¹‰éƒ½åœ¨åŒä¸€ä¸ªç‹¬ç«‹çš„idlæ–‡ä»¶ä¸­. è¿™ä¸ªidlæ–‡ä»¶åº”è¯¥æ”¾åœ¨å‘å¸ƒè€…çš„APIåŒ…ä¸­.</p><p>2.æˆ‘ä»¬çš„äº‹ä»¶å¯¹è±¡éœ€è¦å®šä¹‰ä¸€ä¸ªäº‹ä»¶ id (å»ºè®®é€šè¿‡åˆ†å¸ƒå¼å–å·æœåŠ¡æ¥è·å–), è®¢é˜…è€…å¯ä»¥è‡ªå·±å†³å®šæ˜¯å¦éœ€è¦ç”¨è¿™ä¸ªäº‹ä»¶ id æ¥åšæ¶ˆæ¯çš„å¹‚ç­‰å¤„ç†</p><p><code>==&gt; goods_events.thrift</code></p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> java com.today.api.goods.events</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å•†å“å˜ä»·å®¡æ ¸é€šè¿‡äº‹ä»¶</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SkuPriceUpdateApprovedEvent</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * äº‹ä»¶id</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">    <span class="number">1</span>:<span class="built_in">i64</span> id,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * sku_id</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">    <span class="number">2</span>:<span class="built_in">i64</span> skuId</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...more</span><br></pre></td></tr></table></figure><h2 id="å£°æ˜å¾…å‘å¸ƒäº‹ä»¶"><a href="#å£°æ˜å¾…å‘å¸ƒäº‹ä»¶" class="headerlink" title="å£°æ˜å¾…å‘å¸ƒäº‹ä»¶"></a>å£°æ˜å¾…å‘å¸ƒäº‹ä»¶</h2><ul><li>ç§‰æ‰¿ä»£ç åŠæ–‡æ¡£ä¸€è‡´çš„ç†å¿µï¼Œæ‰€æœ‰çš„æœåŠ¡éƒ½ä¼šåœ¨ç»Ÿä¸€çš„æ–‡æ¡£ç«™ç‚¹è¿›è¡Œå¼€æ”¾å±•ç¤ºï¼Œæ¯ä¸ªæœåŠ¡/æ¯ä¸ªæ¥å£çš„æè¿°,åŒ…æ‹¬å‡ºå…¥å‚éƒ½ä¸€ç›®äº†ç„¶.</li><li>æˆ‘ä»¬åœ¨æœåŠ¡æ¥å£æ–¹æ³•é‡Œé¢å£°æ˜éœ€è¦å‘å¸ƒçš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶æ¸…å•å°†ä¼šåœ¨æ–‡æ¡£ç«™ç‚¹å¯¹åº”çš„æœåŠ¡æ–¹æ³•ä¸­å¾—åˆ°å±•ç¤ºï¼Œå‡å°‘æœåŠ¡å¼€å‘äººå‘˜çš„æ²Ÿé€šæˆæœ¬ï¼Œä¸€çœ‹ä¾¿çŸ¥ã€‚</li></ul><p><code>== &gt;goods_service.thrift</code></p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> java com.today.api.goods.<span class="keyword">service</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ç”¨æˆ·æœåŠ¡</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="class"><span class="keyword">service</span> <span class="title">GoodsAdminService</span></span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"># å•†å“å®¡æ ¸</span></span><br><span class="line"><span class="comment">## äº‹ä»¶</span></span><br><span class="line"><span class="comment">    1.SkuPriceUpdateApprovedEvent  å•†å“å˜ä»·å®¡æ ¸é€šè¿‡äº‹ä»¶</span></span><br><span class="line"><span class="comment">    2.SkuAttributeUpdateApprovedEvent  å•†å“å±æ€§å®¡æ ¸é€šè¿‡äº‹ä»¶</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line">    <span class="built_in">i64</span> approveSku(<span class="comment">/** å®¡æ ¸è¯·æ±‚å®ä½“**/</span><span class="number">1</span>:goods_request.ApproveSkuRequest request)</span><br><span class="line">    (events=<span class="string">"com.today.api.goods.events.SkuPriceUpdateApprovedEvent,com.today.api.goods.events.SkuAttributeUpdateApprovedEvent"</span>)</span><br><span class="line">    ...more</span><br><span class="line">&#125;(group=<span class="string">"goods"</span>)</span><br></pre></td></tr></table></figure><ul><li>åœ¨æ–‡æ¡£ç«™ç‚¹æ–¹æ³•ä¸Šæ•ˆæœå¦‚ä¸‹ï¼š<br><img src="http://oqr3htxnb.bkt.clouddn.com/18-3-11/65554100.jpg" alt=""></li><li>æ˜¾ç¤ºç‹¬ç«‹çš„äº‹ä»¶æ¸…å•<br><img src="http://oqr3htxnb.bkt.clouddn.com/18-3-11/90371526.jpg" alt=""></li></ul><blockquote><p>æ³¨ï¼šå¦‚æœæƒ³è¦äº†è§£æ›´å¤šæœ‰å…³æ–‡æ¡£ç«™ç‚¹çš„å†…å®¹ï¼Œè¯·ç•™æ„åæœŸçš„ dapeng æ–‡æ¡£ç«™ç‚¹ä¸“é¢˜</p></blockquote><ul><li>å®šä¹‰äº‹ä»¶å‘å¸ƒä»»åŠ¡idl</li></ul><p><code>==&gt; goods_event_task.thrift</code></p><figure class="highlight thrift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> java com.today.api.goods.<span class="keyword">service</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å•†å“äº‹ä»¶å‘å¸ƒä»»åŠ¡</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="class"><span class="keyword">service</span> <span class="title">GoodsScheduledService</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"># äº‹ä»¶å‘å¸ƒ</span></span><br><span class="line"><span class="comment">## æ³¨æ„äº‹é¡¹</span></span><br><span class="line"><span class="comment">    1.å•†å“æœåŠ¡çš„äº‹ä»¶å‘å¸ƒä»»åŠ¡</span></span><br><span class="line"><span class="comment">    2.ä¸éœ€åœ¨æ–‡æ¡£ç«™ç‚¹æµ‹è¯•</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line">    <span class="keyword">void</span> publishEventMsg()</span><br><span class="line">&#125;(group=<span class="string">"Scheduler"</span>)</span><br></pre></td></tr></table></figure><ul><li>ä¸ºå‘å¸ƒä»»åŠ¡æœåŠ¡æä¾›ä»¥ä¸‹å®ç°æ¨¡ç‰ˆ</li></ul><p><code>==&gt; task/GoodsScheduledServiceImpl.scala</code><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ScheduledTask</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsScheduledServiceImpl</span> <span class="keyword">extends</span> <span class="title">GoodsScheduledService</span></span>&#123;</span><br><span class="line">  <span class="meta">@Resource</span>(name = <span class="string">"messageTask"</span>)</span><br><span class="line">  <span class="keyword">var</span> msgScheduler: <span class="type">MsgPublishTask</span> = _</span><br><span class="line"></span><br><span class="line">  <span class="meta">@ScheduledTaskCron</span>(cron = <span class="string">"*/2 * * * * ?"</span>)</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">publishEventMsg</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//EventBuså·²ç»å¤„ç†äº†å¤šèŠ‚ç‚¹åŒæ—¶è§¦å‘çš„é—®é¢˜äº†</span></span><br><span class="line">    msgScheduler.doPublishMessages()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li><p>å…³é”®æ€§çš„beané…ç½®</p></li><li><p>æ‰€æœ‰çš„äº‹ä»¶æ¶ˆæ¯ï¼Œæœ€ç»ˆéƒ½ä¼šå‘é€åˆ° kafka çš„é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…è®¢é˜…è€…æ¶ˆè´¹ï¼›æ‰€ä»¥æ¯ä¸€ä¸ªé…ç½®éƒ½å°†å¿…ä¸å¯å°‘ã€‚<br><code>==&gt; spring/services.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--messageTask äº‹ä»¶å‘å¸ƒä»»åŠ¡bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"messageTask"</span> <span class="attr">class</span>=<span class="string">"com.today.eventbus.scheduler.MsgPublishTask"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"topic"</span> <span class="attr">value</span>=<span class="string">"$&#123;KAFKA_TOPIC&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"kafkaHost"</span> <span class="attr">value</span>=<span class="string">"$&#123;KAFKA_PRODUCER_HOST&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"tidPrefix"</span> <span class="attr">value</span>=<span class="string">"$&#123;KAFKA_TID_PREFIX&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"tx_goods_dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>topic</code> kafka æ¶ˆæ¯ topicï¼Œé¢†åŸŸåŒºåˆ†(å»ºè®®:<code>domain_version_event</code>)</p></li><li><code>kafkaHost</code> kafka é›†ç¾¤åœ°å€(å¦‚:127.0.0.1:9091,127.0.0.1:9092)</li><li><code>tidPrefix</code> kafka äº‹åŠ¡ id å‰ç¼€ï¼Œé¢†åŸŸåŒºåˆ†</li><li><p><code>dataSource</code> ä½¿ç”¨ä¸šåŠ¡çš„ dataSource</p></li><li><p>æœåŠ¡é…ç½®<br><code>==&gt; config_user_service.properties</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># event config</span><br><span class="line">KAFKA_TOPIC=goods_1.0.0_event</span><br><span class="line">KAFKA_PRODUCER_HOST=127.0.0.1:9092</span><br><span class="line">KAFKA_TID_PREFIX=goods_0.0.1</span><br></pre></td></tr></table></figure></li></ul><p></p><h2 id="é€šè¿‡EventBuså‘å¸ƒäº‹ä»¶"><a href="#é€šè¿‡EventBuså‘å¸ƒäº‹ä»¶" class="headerlink" title="é€šè¿‡EventBuså‘å¸ƒäº‹ä»¶"></a>é€šè¿‡EventBuså‘å¸ƒäº‹ä»¶</h2><ul><li>åœ¨åšäº‹ä»¶è§¦å‘å‰,ä½ éœ€è¦å®ç° <code>AbstractEventBus</code> ï¼Œæ¥åšå¥½è‡ªå®šä¹‰çš„æœ¬åœ°ç›‘å¬åˆ†å‘</li></ul><p><code>==&gt; commons/EventBus.scala</code><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">EventBus</span> <span class="keyword">extends</span> <span class="title">AbstractEventBus</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * äº‹ä»¶åœ¨è§¦å‘åï¼Œå¯èƒ½å­˜åœ¨é¢†åŸŸå†…çš„è®¢é˜…è€…ï¼Œä»¥åŠè·¨é¢†åŸŸçš„è®¢é˜…è€…</span></span><br><span class="line"><span class="comment">    * é¢†åŸŸå†…çš„è®¢é˜…è€…å¯ä»¥é€šè¿‡å®ç°è¯¥æ–¹æ³•è¿›è¡Œåˆ†å‘</span></span><br><span class="line"><span class="comment">    * åŒæ—¶,ä¹Ÿä¼šå°†äº‹ä»¶å‘é€åˆ°å…¶ä»–é¢†åŸŸçš„äº‹ä»¶æ¶ˆæ¯è®¢é˜…è€…</span></span><br><span class="line"><span class="comment">    * @param event</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">dispatchEvent</span></span>(event: <span class="type">Any</span>): <span class="type">Unit</span> = &#123;&#125;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">getInstance</span></span>: <span class="type">EventBus</span>.<span class="keyword">this</span>.<span class="keyword">type</span> = <span class="keyword">this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li><p>äº¤ç”± spring æ‰˜ç®¡<br><code>==&gt; spring/services.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"eventBus"</span> <span class="attr">class</span>=<span class="string">"com.today.service.commons.EventBus"</span> <span class="attr">factory-method</span>=<span class="string">"getInstance"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"tx_goods_dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>äº‹ä»¶å‘å¸ƒ</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">EventBus</span>.fireEvent(<span class="type">RegisteredEvent</span>(event_id,user.id))</span><br></pre></td></tr></table></figure></li></ul><h2 id="é€šè¿‡EventBusæ¥æ”¶äº‹ä»¶"><a href="#é€šè¿‡EventBusæ¥æ”¶äº‹ä»¶" class="headerlink" title="é€šè¿‡EventBusæ¥æ”¶äº‹ä»¶"></a>é€šè¿‡EventBusæ¥æ”¶äº‹ä»¶</h2><ul><li>å¯¹äºé¢†åŸŸå†…äº‹ä»¶è®¢é˜…è€…</li></ul><p><code>EventBus</code> çš„ <code>dispatchEvent</code> æ–¹æ³•æä¾›é¢†åŸŸå†…è®¢é˜…è€…çš„äº‹ä»¶åˆ†å‘ï¼Œä»¥ä¾¿æœ¬åœ°è®¢é˜…è€…å¯ä»¥è®¢é˜…åˆ°å…³æ³¨çš„äº‹ä»¶æ¶ˆæ¯ã€‚è¿™äº›é¢†åŸŸå†…çš„è®¢é˜…è€…ï¼Œåªéœ€è¦åœ¨ <code>dispatchEvent</code> ä¸­æ¨¡å¼åŒ¹é…è¿›è¡Œåˆ†å‘ã€‚æ˜¯ä¸æ˜¯å·²ç»æ˜¯ç›¸å½“çš„ç®€æ´å‘¢ï¼Ÿ</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"> <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">dispatchEvent</span></span>(event: <span class="type">Any</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">     event <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> e:<span class="type">SkuPriceUpdateApprovedEvent</span> =&gt;</span><br><span class="line">        <span class="comment">// do somthing </span></span><br><span class="line">      <span class="keyword">case</span> _ =&gt;</span><br><span class="line">        <span class="type">LOGGER</span>.info(<span class="string">" nothing "</span>)</span><br><span class="line"> &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li><p>å¯¹äºè·¨é¢†åŸŸäº‹ä»¶è®¢é˜…è€…</p></li><li><p>ä¾èµ–</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--if =&gt; maven project--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.today<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>event-bus_2.12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--if =&gt; sbt project--&gt;</span> </span><br><span class="line">"com.today" % "event-bus_2.12" % "0.1-SNAPSHOT"</span><br></pre></td></tr></table></figure><ul><li><p>æ³¨è§£æ‰«ææ”¯æŒé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"postProcessor"</span> <span class="attr">class</span>=<span class="string">"com.today.eventbus.MsgAnnotationBeanPostProcessor"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è®¢é˜…äº‹ä»¶æ¶ˆæ¯<br>åŒä¸€ä¸ªé¢†åŸŸçš„äº‹ä»¶åœ¨åŒä¸€ä¸ªæ¶ˆè´¹è€…ç±»ä¸­å¤„ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// java</span></span><br><span class="line"><span class="meta">@KafkaConsumer</span>(groupId = <span class="string">"goodsEventConsumer"</span>, topic = <span class="string">"goods_1.0.0_event"</span>,kafkaHostKey = <span class="string">"kafka.consumer.host"</span>))</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsEventsConsumer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@KafkaListener</span>(serializer = SkuAttributeUpdateApprovedEventSerializer.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribeSkuAttributeUpdateApprovedEvent</span><span class="params">(SkuAttributeUpdateApprovedEvent event)</span> </span>&#123;</span><br><span class="line">        System.out.println(event.skuId);</span><br><span class="line">        <span class="comment">// do somthing</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//scala</span></span><br><span class="line">serializer = classOf[RegisteredEventSerializer]</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p><code>GoodsEventsConsumer</code> ä¹Ÿéœ€è¦åœ¨ spring ä¸Šä¸‹æ–‡ä¸­æ‰˜ç®¡ã€‚</p></li></ul><blockquote><p>@KafkaConsumer </p></blockquote><ul><li><code>groupId</code>ï¼škafka Consumer groupIdï¼Œé¢†åŸŸåŒºåˆ†</li><li><code>topic</code> ï¼škafka æ¶ˆæ¯ topic </li><li><code>kafkaHostKey</code>ï¼š  <ul><li>å¯è‡ªè¡Œé…ç½®çš„ kafka åœ°å€ï¼Œé»˜è®¤å€¼ä¸º <code>dapeng.kafka.consumer.host</code> ï¼Œå¯ä»¥è‡ªå®šä¹‰è¦†ç›–é»˜è®¤å€¼</li><li>ç”¨æˆ·åªè¦è´Ÿè´£æŠŠè¿™äº›é…ç½®æ”¾åˆ° env æˆ–è€… properties é‡Œé¢</li><li>å¦‚ï¼š<code>System.setProperty(&quot;kafka.consumer.host&quot;,&quot;127.0.0.1:9092&quot;);</code></li></ul></li></ul><blockquote><p>@KafkaListener </p></blockquote><ul><li>serializer äº‹ä»¶æ¶ˆæ¯è§£ç å™¨ï¼Œç”±äº‹ä»¶å‘é€æ–¹æä¾›.</li></ul><h2 id="é¢†åŸŸå†…æ¶ˆè´¹äº‹ä»¶ä¸è·¨é¢†åŸŸæ¶ˆè´¹äº‹ä»¶çš„ä¸åŒ"><a href="#é¢†åŸŸå†…æ¶ˆè´¹äº‹ä»¶ä¸è·¨é¢†åŸŸæ¶ˆè´¹äº‹ä»¶çš„ä¸åŒ" class="headerlink" title="é¢†åŸŸå†…æ¶ˆè´¹äº‹ä»¶ä¸è·¨é¢†åŸŸæ¶ˆè´¹äº‹ä»¶çš„ä¸åŒ"></a>é¢†åŸŸå†…æ¶ˆè´¹äº‹ä»¶ä¸è·¨é¢†åŸŸæ¶ˆè´¹äº‹ä»¶çš„ä¸åŒ</h2><p>é€šè¿‡ä»¥ä¸Šå·²ç»çŸ¥é“åœ¨äº‹ä»¶ä¸­ï¼Œå­˜åœ¨é¢†åŸŸå†…çš„è®¢é˜…è€…æ¶ˆè´¹äº‹ä»¶æ¶ˆæ¯ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨è·¨é¢†åŸŸçš„äº‹ä»¶è®¢é˜…è€…æ¶ˆè´¹äº‹ä»¶æ¶ˆæ¯ã€‚ä¸‹é¢å°†åˆ†æè¿™ä¸¤è€…çš„ä¸åŒï¼š</p><ul><li>é¢†åŸŸå†…çš„äº‹ä»¶è®¢é˜…è€…ï¼Œé€šå¸¸æ˜¯<strong>ä¸èƒ½è„±ç¦»é¢†åŸŸçš„å­˜åœ¨ï¼Œå­˜åœ¨é¢†åŸŸå†…å¼ºå…³ç³»çš„ï¼Œä½†åˆéœ€è¦è§£è€¦ï¼</strong> </li><li>è€Œè·¨é¢†åŸŸçš„äº‹ä»¶æ¶ˆæ¯è®¢é˜…ï¼Œé€šå¸¸<strong>åªéœ€ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œä»–ä»¬ç›¸å¯¹äº‹ä»¶å‘é€æ–¹æ²¡æœ‰å¼ºä¾èµ–å…³ç³»</strong>ã€‚<blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨ eventbus ä¸­ï¼Œé¢†åŸŸå†…æ¶ˆè´¹äº‹ä»¶ä¹‹åè¿˜æ˜¯ä¼šå°†äº‹ä»¶æ¶ˆæ¯å¹¿æ’­å‡ºå»ã€‚å› ä¸ºä¸èƒ½ä¿è¯ä¸ä¼šæœ‰å…¶ä»–é¢†åŸŸå¯¹å‘ç”Ÿçš„äº‹ä»¶æ„Ÿå…´è¶£ï¼</p></blockquote></li></ul><blockquote><p>å¦‚å•†å“é¢†åŸŸçš„å•†å“å˜ä»·å®¡æ ¸é€šè¿‡åï¼Œè§¦å‘äº†å®¡æ ¸é€šè¿‡äº‹ä»¶ï¼š</p></blockquote><ul><li>äº‹ä»¶è§¦å‘åå°†ä½¿ä»·æ ¼ç”Ÿæ•ˆï¼Œè¿™éƒ¨åˆ†ç”Ÿæ•ˆæ“ä½œå¯ä»¥é€šè¿‡é¢†åŸŸå†…çš„äº‹ä»¶è®¢é˜…è¿›è¡Œè§£è€¦ã€‚</li><li>å› ä¸ºæ›´æ–°äº†å•†å“ä»·æ ¼ï¼Œå¯èƒ½å­˜åœ¨åº“å­˜ç³»ç»Ÿæˆ–è€…å…¶ä»–ä¸šåŠ¡ç³»ç»Ÿå¯¹å•†å“æ•°æ®æ•æ„Ÿï¼Œå¯ä»¥é€šè¿‡è·¨é¢†åŸŸäº‹ä»¶å‘é€-è®¢é˜…ï¼Œåšå•†å“çš„æ•°æ®æ¨é€</li></ul><h2 id="é™„-binlog-kafkaåŠ¨æ€ç¼“å­˜æ›´æ–°æ”¯æŒ"><a href="#é™„-binlog-kafkaåŠ¨æ€ç¼“å­˜æ›´æ–°æ”¯æŒ" class="headerlink" title="é™„:binlog-kafkaåŠ¨æ€ç¼“å­˜æ›´æ–°æ”¯æŒ"></a>é™„:binlog-kafkaåŠ¨æ€ç¼“å­˜æ›´æ–°æ”¯æŒ</h2><blockquote><p>@BinlogListener</p></blockquote><ul><li>eventbuså°†è®¢é˜…è€… api è¿›è¡Œäº†æœ‰è¶£çš„æ‹“å±•ï¼ŒåŠ å…¥binlog-kafkaåŠ¨æ€ç¼“å­˜æ›´æ–°æ”¯æŒ</li><li>ä½¿ç”¨æ–¹æ³•ä¸äº‹ä»¶çš„è®¢é˜…è€…æ–¹æ³•ç±»ä¼¼ï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯ä½ ä¸å†éœ€è¦æ¶ˆæ¯è§£ç å™¨ï¼</li></ul><pre><code class="java"><span class="meta">@BinlogListener</span>  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">binlogListener</span><span class="params">(List&lt;BinlogEvent&gt; events)</span></span>{      <span class="comment">// do somthing</span>  }</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»ä½“æ¥è¯´ï¼ŒEventBus çš„å¼•å…¥å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œä¸è®ºæ˜¯äº‹ä»¶çš„å‘é€è¿˜æ˜¯è®¢é˜…ï¼Œéƒ½æ˜¯æ˜“ç”¨çš„ï¼Œæ²¡æœ‰å¤šä½™çš„é…ç½®ã€‚å¯¹äºç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„æ”¯æŒä¹Ÿåšçš„éå¸¸ä¼˜ç§€ï¼Œå¸Œæœ›åœ¨æ—¥å¸¸å¼€å‘ä¸­èƒ½å¤Ÿæ›´åŠ çµæ´»çš„è¿ç”¨ã€‚å°½é‡å‡å°‘ä¸å¿…è¦çš„è€¦åˆï¼å¹¶èƒ½ç»å—å®è·µè€ƒéªŒï¼</p><ul><li>åŸæ–‡åœ°å€: <a href="http://git66.com/2018/03/10/DDD-event-bus/">http://git66.com/2018/03/10/DDD-event-bus/</a></li><li>åŒæ­¥ç®€ä¹¦åœ°å€: <a href="https://www.jianshu.com/p/88abce9326aa" target="_blank" rel="noopener">https://www.jianshu.com/p/88abce9326aa</a></li></ul><blockquote><p>æœ‰å…³eventBusçš„å…·ä½“å®ç°ç»†èŠ‚ï¼Œå°†ç”±å°ä¼™ä¼´ hz.lei æ¥è¿›è¡Œå‰–æï¼</p></blockquote><ul><li>hz.lei: <a href="https://www.jianshu.com/p/f89741097113" target="_blank" rel="noopener">DDD-äº‹ä»¶æ€»çº¿å®ç°æ¶æ„åŸç†åˆ†æ</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/dapeng-soa&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;@å¤§é¹å¼€æº&lt;/a&gt;:åˆ«çœ‹æˆ‘æœ‰ç‚¹èŒï¼Œæˆ‘å¯ä»¥ç§’å˜å¤§é¹ğŸ˜„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://oqr3htxnb.bkt.clouddn.com/18-3-10/59987509.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;äº†è§£-DDD-ä¸é¢†åŸŸäº‹ä»¶&quot;&gt;&lt;a href=&quot;#äº†è§£-DDD-ä¸é¢†åŸŸäº‹ä»¶&quot; class=&quot;headerlink&quot; title=&quot;äº†è§£ DDD ä¸é¢†åŸŸäº‹ä»¶&quot;&gt;&lt;/a&gt;äº†è§£ DDD ä¸é¢†åŸŸäº‹ä»¶&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;åœ¨è¿‡å»çš„ 30 å¤šå¹´ï¼Œå°±å·²ç»æœ‰é¢†åŸŸå»ºæ¨¡å’Œè®¾è®¡çš„æ€æ½®ï¼›Eric Evans å°†å…¶å®šä¹‰ä¸ºé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain-Driven Designï¼Œç®€ç§°DDDï¼‰ã€‚é¢†åŸŸæ¨¡å‹æ˜¯é¢†åŸŸé©±åŠ¨çš„æ ¸å¿ƒï¼Œè€Œé¢†åŸŸäº‹ä»¶åˆä½œä¸ºé¢†åŸŸæ¨¡å‹ä¸­çš„é‡è¦æ¨¡å—ï¼Œè§£å†³äº†å¼€å‘è€…æ—¥å¸¸å¼€å‘ä¸­çš„å¾ˆå¤šç—›ç‚¹ï¼Œæ¯”å¦‚ï¼Œä»£ç è€¦åˆé™ä½ï¼Œæ‹“å±•æ€§å¢å¼ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é¢†åŸŸæ¨¡å‹ä¸æ˜¯é«˜å¤§ä¸Šçš„ä¸œè¥¿ï¼Œæ‰€æœ‰çš„é¢†åŸŸæ¨¡å‹æŠ½è±¡éƒ½æ¥è‡ªäºå…·ä½“çš„ä¸šåŠ¡åŠä¸šåŠ¡çš„éœ€æ±‚,è€Œè„±ç¦»ä¸šåŠ¡éœ€æ±‚çš„åº”ç”¨è®¾è®¡æ˜¯æ²¡æœ‰ä»»ä½•ä»·å€¼çš„ï¼&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚åœ¨Todayçš„æ–°é›¶å”®ç”µå•†æ¶æ„ä¸­:é—¨åº—ã€é‡‡è´­ã€è®¢å•ã€ä¾›åº”å•†ã€ç‰©æµã€å•†å“ã€å°è´¦ç­‰ç­‰éƒ½æ˜¯åº”ç”¨è®¾è®¡ä¸­çš„ä¸åŒé¢†åŸŸæ¨¡å‹ï¼Œå¿…ç„¶è¿˜å­˜åœ¨æˆ–å¤šæˆ–å°‘çš„å­åŸŸæ¨¡å‹ã€‚è€Œå¯¹äºæŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œè¿™äº›æŠ½è±¡å‡ºæ¥çš„é¢†åŸŸï¼Œå°±ä»£è¡¨åº”ç”¨æ¶æ„å­˜åœ¨è‹¥å¹²å­ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿä¸ç³»ç»Ÿé—´ï¼ŒåŠ¿å¿…ä¼šå­˜åœ¨æŸäº›å…³è”ã€‚æ¯”å¦‚è¯´Aé¢†åŸŸâ€œå‘ç”ŸæŸä»¶äº‹æƒ…â€ã€â€œå½“ä»€ä¹ˆäº§ç”Ÿå˜åŒ–çš„æ—¶å€™â€ã€â€œå¦‚æœä»€ä¹ˆçŠ¶æ€å˜æ›´â€â€¦ï¼Œéƒ½å°†å¯èƒ½æˆä¸ºBé¢†åŸŸæ‰€è¦å…³å¿ƒçš„äº‹ä»¶ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="DDD" scheme="http://git66.com/tags/DDD/"/>
    
      <category term="é¢†åŸŸé©±åŠ¨è®¾è®¡" scheme="http://git66.com/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="é¢†åŸŸäº‹ä»¶" scheme="http://git66.com/tags/%E9%A2%86%E5%9F%9F%E4%BA%8B%E4%BB%B6/"/>
    
      <category term="eventbus" scheme="http://git66.com/tags/eventbus/"/>
    
      <category term="dapeng" scheme="http://git66.com/tags/dapeng/"/>
    
  </entry>
  
  <entry>
    <title>ã€scalaã€‘å‡½æ•°çš„æ¼”å˜è¿‡ç¨‹,å‡½æ•°å¼çš„ä¼˜ç‚¹</title>
    <link href="http://git66.com/2018/01/06/scala-function-5w/"/>
    <id>http://git66.com/2018/01/06/scala-function-5w/</id>
    <published>2018-01-06T14:05:50.000Z</published>
    <updated>2018-03-06T15:15:56.499Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>scalaä¸­ï¼Œå¸¦æœ‰å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³çš„ä»£ç å¾ˆå¤šï¼Œå¦‚ä½•å»ç†è§£æ‰æ›´åŠ å®¹æ˜“ï¼Ÿ</p></blockquote><p><img src="http://oqr3htxnb.bkt.clouddn.com/18-1-6/5222114.jpg" alt=""></p><a id="more"></a><ul><li><p>ä¼ ç»Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def plusOne(num:Int):Int = &#123;</span><br><span class="line">    num+1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ”¹é©è¿‡ç¨‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(Int)=&gt;Int // å‡½æ•°çš„&quot;ç±»å‹&quot;æå–</span><br><span class="line"></span><br><span class="line">(num)=&gt;&#123;</span><br><span class="line">    num+1 // å‡½æ•°çš„&quot;å€¼&quot;æå–</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(num)=&gt;num+1</span><br></pre></td></tr></table></figure></li><li><p>ç»“åˆæ”¹é©æˆæœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">val plusOne:Int=&gt;Int=&#123;</span><br><span class="line">    (num)=&gt;num+1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿˜å¯ä»¥å˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val plusOne=(num:Int) =&gt; num+1</span><br></pre></td></tr></table></figure></li><li><p>å‡½æ•°çš„å­—é¢é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(num:Int) =&gt; num+1</span><br></pre></td></tr></table></figure></li></ul><h3 id="ä½•å¤„ä½¿ç”¨"><a href="#ä½•å¤„ä½¿ç”¨" class="headerlink" title="ä½•å¤„ä½¿ç”¨"></a>ä½•å¤„ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">val nums=List[Int](1,2,3)</span><br><span class="line">@#</span><br><span class="line">map(f:Int =&gt; B)</span><br><span class="line">// è¿™æ˜¯scalaä¸­mapæ–¹æ³•çš„å®šä¹‰</span><br><span class="line">// è¿™é‡ŒæŒ‡å‡ºmapæ–¹æ³•éœ€è¦æ¥å—ä¸€ä¸ªIntç±»å‹çš„å€¼fï¼Œä»»æ„çš„è¡¨è¾¾å¼è¿ç®—B</span><br><span class="line">// å›è¿‡å¤´å†æŠŠå‡½æ•°çš„çš„å˜é©è¿‡ç¨‹æƒ³ä¸€éé‚£å®ƒåº”è¯¥æ˜¯æ€æ ·&quot;ä¸€ç±»çš„å‡½æ•°&quot;</span><br><span class="line"></span><br><span class="line">//ä¸‹é¢æ˜¯æˆ‘çš„ç†è§£</span><br><span class="line">(x:Int) =&gt; B // æ­¤æ—¶Bçœ‹ä½œæœ€åçš„è¿ç®—ç»“æœå¾—åˆ°çš„ç±»å‹</span><br><span class="line"></span><br><span class="line">(x)=&gt;&#123;</span><br><span class="line">    B // æ­¤æ—¶Bçœ‹ä½œæ˜¯ä¸€ä¸ªè¿‡ç¨‹</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">val plusOne=(x:Int) =&gt; x+1</span><br><span class="line">val mString=(x:Int) =&gt; x.toString</span><br><span class="line"></span><br><span class="line">@A</span><br><span class="line">nums.map((x:Int) =&gt; x+1)</span><br><span class="line"></span><br><span class="line">@B</span><br><span class="line">nums.map(plusOne)</span><br><span class="line"></span><br><span class="line">@C</span><br><span class="line">nums.map(mString)</span><br></pre></td></tr></table></figure><ul><li>@Aå’Œ@Bè¾¾åˆ°äº†åŒæ ·çš„æ•ˆæœ</li><li>plusOneå’ŒmStringæ˜¯ä¸€ç±»å‡½æ•°ï¼Œå¯æ’æ‹”(å¼•ç”¨é€æ˜)</li><li>plusOneå’ŒmStringéƒ½æ˜¯ä»å€¼=&gt;å€¼çš„è¿‡ç¨‹ï¼Œæ˜¯ä¸€æ¡çº¿(çº¯å‡½æ•°)ï¼Œè¿™å°±æ¶‰åŠåˆ°å‡½æ•°çš„å‰¯ä½œç”¨</li></ul><h3 id="å‡½æ•°å‰¯ä½œç”¨-æ‘˜è‡ªç»´åŸº"><a href="#å‡½æ•°å‰¯ä½œç”¨-æ‘˜è‡ªç»´åŸº" class="headerlink" title="å‡½æ•°å‰¯ä½œç”¨(æ‘˜è‡ªç»´åŸº)"></a>å‡½æ•°å‰¯ä½œç”¨(æ‘˜è‡ªç»´åŸº)</h3><blockquote><p>å‡½æ•°å‰¯ä½œç”¨æŒ‡å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé™¤äº†è¿”å›å‡½æ•°å€¼ä¹‹å¤–ï¼Œè¿˜å¯¹ä¸»è°ƒç”¨å‡½æ•°äº§ç”Ÿé™„åŠ çš„å½±å“ã€‚ä¾‹å¦‚ä¿®æ”¹å…¨å±€å˜é‡ï¼ˆå‡½æ•°å¤–çš„å˜é‡ï¼‰æˆ–ä¿®æ”¹å‚æ•°ã€‚</p></blockquote><ul><li>çº¯å‡½æ•°<ul><li>è¾“å…¥è¾“å‡ºæ•°æ®æµå…¨æ˜¯æ˜¾å¼ï¼ˆExplicitï¼‰çš„ </li><li>å‡½æ•°ä¸å¤–ç•Œäº¤æ¢æ•°æ®åªæœ‰ä¸€ä¸ªå”¯ä¸€æ¸ é“â€”â€”å‚æ•°å’Œè¿”å›å€¼</li><li>æ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°</li></ul></li><li>éçº¯å‡½æ•°<ul><li>å‡½æ•°é€šè¿‡éšå¼ï¼ˆImplicitï¼‰æ–¹å¼ï¼Œä»å¤–ç•Œè·å–æ•°æ®ï¼Œæˆ–è€…å‘å¤–éƒ¨è¾“å‡ºæ•°æ®</li><li>æ¯”å¦‚ï¼Œè¯»å–å…¨å±€å˜é‡ï¼Œä¿®æ”¹å…¨å±€å˜é‡</li></ul></li><li>å¼•ç”¨é€æ˜<ul><li>å¼•ç”¨é€æ˜ï¼ˆReferential Transparentï¼‰çš„æ¦‚å¿µä¸å‡½æ•°çš„å‰¯ä½œç”¨ç›¸å…³ï¼Œä¸”å—å…¶å½±å“</li><li>å¦‚æœç¨‹åºä¸­ä»»æ„ä¸¤å¤„å…·æœ‰<strong>ç›¸åŒè¾“å…¥å€¼çš„å‡½æ•°</strong>è°ƒç”¨èƒ½å¤Ÿäº’ç›¸ç½®æ¢ï¼Œè€Œä¸å½±å“ç¨‹åºçš„åŠ¨ä½œï¼Œé‚£ä¹ˆè¯¥ç¨‹åºå°±å…·æœ‰å¼•ç”¨é€æ˜æ€§</li></ul></li></ul><h3 id="èŒƒä¾‹"><a href="#èŒƒä¾‹" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><ul><li><p>çº¯å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f(x) &#123; </span><br><span class="line">   return x + 1 </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>éçº¯å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = 0 </span><br><span class="line">q(x) &#123; </span><br><span class="line">   b = a </span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line">p(x)&#123; </span><br><span class="line">    printâ€œhelloâ€ </span><br><span class="line">&#125;</span><br><span class="line">// p(x)é€šè¿‡I/O APIè¾“å‡ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚p(x)æ˜¯éçº¯å‡½æ•°ã€‚</span><br></pre></td></tr></table></figure></li></ul><h3 id="çº¯å‡½æ•°ä¼˜ç‚¹"><a href="#çº¯å‡½æ•°ä¼˜ç‚¹" class="headerlink" title="çº¯å‡½æ•°ä¼˜ç‚¹"></a>çº¯å‡½æ•°ä¼˜ç‚¹</h3><ul><li>æ— çŠ¶æ€ã€‚çº¿ç¨‹å®‰å…¨ã€‚ä¸éœ€è¦çº¿ç¨‹åŒæ­¥ã€‚</li><li>çº¯å‡½æ•°ç›¸äº’è°ƒç”¨ç»„è£…èµ·æ¥çš„å‡½æ•°ï¼Œè¿˜æ˜¯çº¯å‡½æ•°ã€‚</li><li>åº”ç”¨ç¨‹åºæˆ–è€…è¿è¡Œç¯å¢ƒï¼ˆRuntimeï¼‰å¯ä»¥å¯¹çº¯å‡½æ•°çš„è¿ç®—ç»“æœè¿›è¡Œç¼“å­˜ï¼Œè¿ç®—åŠ å¿«é€Ÿåº¦ã€‚</li></ul><p>å‚è€ƒ</p><p><a href="http://blog.csdn.net/bluishglc/article/details/45291533" target="_blank" rel="noopener">http://blog.csdn.net/bluishglc/article/details/45291533</a></p><p><a href="https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0%E5%89%AF%E4%BD%9C%E7%94%A8" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0%E5%89%AF%E4%BD%9C%E7%94%A8</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;scalaä¸­ï¼Œå¸¦æœ‰å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³çš„ä»£ç å¾ˆå¤šï¼Œå¦‚ä½•å»ç†è§£æ‰æ›´åŠ å®¹æ˜“ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://oqr3htxnb.bkt.clouddn.com/18-1-6/5222114.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="scala" scheme="http://git66.com/tags/scala/"/>
    
      <category term="å‡½æ•°å¼ç¼–ç¨‹" scheme="http://git66.com/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Angular(4)ä¸­åŠ è½½Arcgis for JavaScriptåœ°å›¾</title>
    <link href="http://git66.com/2017/09/16/Angular-load-ArcGis-for-JavaScript/"/>
    <id>http://git66.com/2017/09/16/Angular-load-ArcGis-for-JavaScript/</id>
    <published>2017-09-16T06:40:36.000Z</published>
    <updated>2018-03-08T13:47:14.816Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><blockquote><p>è¿‘æœŸæˆ‘å¸é¡¹ç›®çš„éœ€è¦ï¼Œé‡‡ç”¨Angular(4)+SpringBootå‰åç«¯åˆ†ç¦»çš„æ¶æ„ã€‚å¹¶ä¸”åœ¨éœ€è¦åœ¨é¡¹ç›®ä¸­å®ç°Arcgisåœ°å›¾ã€‚  </p></blockquote><h2 id="å¯»"><a href="#å¯»" class="headerlink" title="å¯»"></a>å¯»</h2><p>åƒæˆ‘è¿™ç§èœé¸¡é‡åˆ°è¿™ç§æ²¡æœ‰å¹²è¿‡çš„äº‹æƒ…è‚¯å®šæ˜¯å…ˆé—®ç™¾åº¦å’Œè°·æ­Œ,ä¸¤ä¸ªå…³é”®è¯æ•²ä¸‹ã€‚å‡ ä¹æœç´¢çš„å†…å®¹é‡Œå¾ˆå°‘æœ‰ä¸¤ä¸ªå…³é”®å­—å…±å­˜çš„ã€‚ä½†æ˜¯æˆ‘è¿™æ…§çœ¼è¯†å¾—å¥½ä»£ç ï¼Œäºæ˜¯å‘ç°äº†è¿™: <a href="https://github.com/Esri/angular-esri-map" target="_blank" rel="noopener">https://github.com/Esri/angular-esri-map</a></p><p>Esriæ˜¯ç¾å›½ç¯å¢ƒç³»ç»Ÿç ”ç©¶æ‰€å…¬å¸,å¤šå¹´æ¥ï¼ŒESRIå…¬å¸å§‹ç»ˆå°†GISè§†ä¸ºä¸€é—¨ç§‘å­¦.ä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯å®˜æ–¹å®ä¾‹å‘€ã€‚</p><a id="more"></a><p>è¿™æ ·å°±å®Œäº†å—ï¼Ÿä¸ï¼Œäº‹æƒ…æ€»æ˜¯æ²¡é‚£ä¹ˆç®€å•çš„ã€‚æˆ‘ä»¥è´Ÿå…«çº§çš„è‹±æ–‡æ°´å¹³å¼€å§‹çœ‹è¿™ä¸ªé¡¹ç›®çš„README,ç¬¬ä¸€è¡Œã€‚å¿ƒéƒ½ç¢äº†[æ‰‹åŠ¨å¿ƒç¢]ä»–æ˜¯è¿™æ ·è¯´çš„ã€‚</p><blockquote><p>A collection of directives to help you use Esri maps and services in your AngularJS v1.x applications.</p></blockquote><p>wtf?==&gt;AngularJS v1.x applicationsï¼Œæˆ‘çš„é¡¹ç›®ç”¨çš„å¯æ˜¯4.xï¼Œè¿™ä¸æ‰¯æ·¡ï¼Ÿ</p><p>ç»§ç»­é¨æ¸¸åœ¨GayHub[æ‰‹åŠ¨æ»‘ç¨½]çš„ä»£ç æµ·æ´‹é‡Œã€‚çš‡å¤©ä¸è´Ÿæœ‰å¿ƒäººè®©æˆ‘æ‰¾åˆ°äº†ä»–:<br><a href="https://github.com/tomwayson/angular2-esri-example" target="_blank" rel="noopener">https://github.com/tomwayson/angular2-esri-example</a></p><p>åœ¨è¿™é‡Œæˆ‘å°è¯•å°†ä»–çš„é¡¹ç›®cloneåˆ°æœ¬åœ°ï¼Œçš„ç¡®å¯ä»¥è·‘èµ·æ¥ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°åœ°å›¾,ä½†å°è¯•è·å–æ ¸å¿ƒä»£ç ä½†æ˜¯åœ¨åŒ…ä¸‹è½½çš„æ—¶å€™å°±å‡ºç°äº†å¾ˆå¤šé—®é¢˜äºæ˜¯æ”¾å¼ƒäº†[çœŸçš„æ˜¯æ— é™å·®åŒ…]ã€‚</p><h2 id="é›¾"><a href="#é›¾" class="headerlink" title="é›¾"></a>é›¾</h2><p>å› ä¸ºä¹‹å‰çœ‹åˆ°æ˜¯2.xç‰ˆæœ¬å°±æœºé‡å°è¯•ä¾¿æ²¡æœ‰ä»”ç»†é˜…è¯»æœ¬é¡¹ç›®çš„è¯´æ˜æ–‡æ¡£ã€‚å›å»çœ‹ä»–çš„è¯´æ˜æ–‡æ¡£å¹¶æŠŠ<code>Resources</code>èŠ‚ç‚¹ä¸‹çš„ä¸œè¥¿éƒ½æŒ¨ä¸ªçœ‹äº†ä¸€é,å‘ç°äº†å…¶ä¸­ä¸€é¡¹è²Œä¼¼å¾ˆæœ‰ç”¨ï¼š</p><ul><li><a href="https://github.com/tomwayson/esri-angular-cli-example" target="_blank" rel="noopener">Example of how to use the ArcGIS API for JavaScript in an angular-cli application</a></li><li>ã€è¯‘ã€‘å¦‚ä½•åœ¨ Angular CLI ç¨‹åºä¸­ä½¿ç”¨ArcGIS API for JavaScriptçš„ç¤ºä¾‹</li></ul><p>äºæ˜¯å¼€å§‹é˜…è¯»è¿™ä¸ªç¤ºä¾‹çš„è¯´æ˜æ–‡æ¡£ï¼Œä»–åœ¨æ–‡ä¸­æåˆ°:</p><blockquote><p>This repository is an example of one way to use the ArcGIS API for JavaScript in an application generated with angular-cli.<br>æ­¤å­˜å‚¨åº“æ˜¯åœ¨ä½¿ç”¨angular-cliç”Ÿæˆçš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ArcGIS API for JavaScriptçš„ä¸€ç§æ–¹æ³•çš„ç¤ºä¾‹</p></blockquote><p>è¿˜æœ‰ä¸€å¥:</p><blockquote><p>Adding the ArcGIS API to your own angular-cli application<br>å°†ArcGIS APIæ·»åŠ åˆ°æ‚¨è‡ªå·±çš„Angular-cliåº”ç”¨ç¨‹åº</p><p>Rather than clone this repository, you should create your own application with the angular-cli and then follow the instructions below to add the above libraries:<br>è€Œä¸æ˜¯å…‹éš†æ­¤å­˜å‚¨åº“ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨angular-cliåˆ›å»ºè‡ªå·±çš„åº”ç”¨ç¨‹åºï¼Œç„¶åæŒ‰ç…§ä»¥ä¸‹è¯´æ˜æ·»åŠ ä»¥ä¸Šåº“ï¼š</p></blockquote><p>ä¸‹é¢çš„æ˜¯è¯´æ˜ï¼š</p><ul><li><a href="https://github.com/tomwayson/angular-esri-loader/blob/master/README.md#in-an-angular-cli-application" target="_blank" rel="noopener">angular2-esri-loader</a> - a low level service needed to load and use ArcGIS modules (v3.x or v4.x) in your Angular applications<ul><li>åœ¨Angularåº”ç”¨ç¨‹åºä¸­åŠ è½½å’Œä½¿ç”¨ArcGISæ¨¡å—ï¼ˆv3.xæˆ–v4.xï¼‰æ‰€éœ€çš„ä½çº§æœåŠ¡</li></ul></li><li><a href="https://github.com/TheKeithStewart/angular-esri-components#setup" target="_blank" rel="noopener">angular-esri-components</a> - a set of reusable components for use with v4.x (only) of the ArcGIS API<ul><li>ä¸€ç»„ï¼ˆä»…ï¼‰å¯ç”¨äºArcGIS API v4.xçš„å¯é‡ç”¨ç»„ä»¶</li></ul></li></ul><hr><p>ä¸Šé¢çš„æ„æ€å·²ç»å¾ˆæ¸…æ¥šã€‚è¿™ä¸ªé¡¹ç›®ä¸å»ºè®®cloneï¼Œè€Œæ˜¯ä½¿ç”¨angular2-esri-loader æ¥åŠ è½½ArcGISæ¨¡å—ï¼Œangular-esri-componentsç»„ä»¶æ˜¯åªèƒ½åœ¨Arcgis4.xç‰ˆæœ¬ä¸­ä½¿ç”¨çš„ã€‚</p><p>å½“ç‚¹å¼€<a href="https://github.com/tomwayson/angular-esri-loader/blob/master/README.md#in-an-angular-cli-application" target="_blank" rel="noopener">angular2-esri-loader</a>è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œä¼šå¾ˆæ¸…æ¥šçš„çœ‹åˆ°å¦‚ä½•å®‰è£…è¿™ä¸ªAngularçš„gisåŠ è½½åº“ï¼Œå¹¶ä¸”å†™äº†ç¤ºä¾‹ç¨‹åºã€‚å¯¹äºangularæœ‰ä¸€å®šçš„äº†è§£çš„è¯ï¼Œè¿™äº›ä»£ç æˆ–è®¸å°±èƒ½å¾ˆæ¸…æ™°çš„è¡¨è¾¾å‡ºå®ƒåœ¨åšä»€ä¹ˆã€‚</p><p>ç¤ºä¾‹çš„ä»£ç å°±ä¸åˆ—å‡ºï¼Œå¯ä»¥åˆ°githubä¸Šé˜…è¯»ã€‚å¤§ä½“æµç¨‹æ˜¯ï¼š</p><ul><li>npmå®‰è£…<a href="https://github.com/tomwayson/angular-esri-loader" target="_blank" rel="noopener">angular-esri-loader</a>,Angularç‰ˆæœ¬ä¸åŒåˆ™å®‰è£…çš„å‘½ä»¤å’Œåº“ä¹Ÿä¼šå­˜åœ¨å·®å¼‚</li><li>EsriLoaderModuleæ¨¡å—åŠ è½½åˆ°ç¨‹åºä¸­</li><li>ä½¿ç”¨EsriLoaderServiceç»„ä»¶åŠ è½½åœ°å›¾</li><li>æ–‡æ¡£ä¸­åŠ è½½çš„æ˜¯åŸºç¡€å›¾å±‚ï¼Œä½†ä¸€èˆ¬å¼€å‘æ—¶ä¼šåŠ è½½ç¼“å­˜åœ°å›¾æœåŠ¡æˆ–è€…å…¶ä»–ç±»å‹åœ°å›¾æœåŠ¡ã€‚è¿™å°†åœ¨æˆ‘çš„çš„ç¤ºä¾‹é¡¹ç›®ä¸­çœ‹åˆ°</li></ul><p>é¡¹ç›®ç¤ºä¾‹:<br><a href="https://git.oschina.net/StruggleYang/ngGisDemo" target="_blank" rel="noopener">https://git.oschina.net/StruggleYang/ngGisDemo</a></p><p>é¡¹ç›®æ•ˆæœ:  </p><p><img src="http://oqr3htxnb.bkt.clouddn.com/17-9-16/48529141.jpg" alt=""></p><h2 id="å·®"><a href="#å·®" class="headerlink" title="å·®"></a>å·®</h2><p>ä½ å¦‚æœçœ‹è¿‡Arcgis for JavaScriptçš„ä»£ç ã€‚é‚£ä¹ˆJavaScriptä»£ç ï¼Œå¦‚ä½•è½¬æ¢ä¸ºAngular(TypeScript)çš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä¹Ÿæ²¡æœ‰åšè¿‡å¤šçš„äº†è§£ï¼Œåªæ˜¯ç…§è‘«èŠ¦ç”»ç“¢å†™çš„ä¸€äº›:  </p><p>è¿™é‡Œæ¨èå»çœ‹ä¸€ä¸‹é˜®ä¸€å³°çš„:<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">ES6æ ‡å‡†å…¥é—¨</a>å¯ä»¥æä¾›ä¸€äº›å‚è€ƒ  </p><p>ä¸‹é¢å°†åšå‡ºåŸç”Ÿçš„Arcgis for JavaScriptä»£ç å’ŒAngularä¸­çš„ä¹¦å†™å¯¹æ¯”ã€‚</p><p>å˜é‡å£°æ˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ‰å¯èƒ½ä½ éœ€è¦åœ¨åœ°å›¾åˆå§‹åŒ–å‰é¦–å…ˆå£°æ˜å˜é‡ï¼Œä»¥ä¾¿ä½ åœ¨ä»»ä½•åœ°æ–¹éƒ½æ˜¯å¯ç”¨çš„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> map; <span class="comment">// js</span></span><br><span class="line"></span><br><span class="line">map: any; <span class="comment">// ts</span></span><br></pre></td></tr></table></figure><p>åœ°å›¾çš„æ¨¡å—åŠ è½½ï¼ŒArcgisçš„apiæ˜¯åŸºäºdojoæ¡†æ¶çš„ï¼Œå¦‚ä¸‹:</p><ul><li>JavaScriptä¸­åŠ è½½åœ°å›¾æ¨¡å—</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map;</span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>([<span class="string">"esri/map"</span>, <span class="string">"dojo/domReady!"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">Map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="string">"map"</span>, &#123;</span><br><span class="line">    center: [<span class="number">-118</span>, <span class="number">34.5</span>],</span><br><span class="line">    zoom: <span class="number">8</span>,</span><br><span class="line">    basemap: <span class="string">"topo"</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>Angularä¸­åŠ è½½åœ°å›¾(åŸºäºangular-esri-loaderåŠ è½½å™¨)<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œä»£ç å¹¶ä¸å…¨ï¼Œå…·ä½“è¯·æŸ¥çœ‹ä¸Šé¢çš„ç¤ºä¾‹é¡¹ç›®</span></span><br><span class="line">.. çœç•¥å¯¼å…¥</span><br><span class="line"></span><br><span class="line"><span class="meta">@ViewChild</span>(<span class="string">'map'</span>) mapEl: ElementRef;</span><br><span class="line"> map: <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"> ngOnInit() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.esriLoader.load(&#123;</span><br><span class="line">    <span class="comment">// åœ¨jsä¸­æ˜¯ä¸ç®¡è¿™ä¸ªurlçš„ï¼Œå› ä¸ºå®ƒåœ¨htmlä¸­å·²ç»å¼•å…¥å¯¹åº”çš„ç‰ˆæœ¬</span></span><br><span class="line">      url: <span class="string">'//js.arcgis.com/3.18/'</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.esriLoader.loadModules([<span class="string">'esri/map'</span>]).then(<span class="function">(<span class="params">[Map]</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.map = <span class="keyword">new</span> Map(<span class="keyword">this</span>.mapEl.nativeElement, &#123;</span><br><span class="line">          center: [<span class="number">-118</span>, <span class="number">34.5</span>],</span><br><span class="line">          zoom: <span class="number">8</span>,</span><br><span class="line">          basemap: <span class="string">'topo'</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>dojoäº‹ä»¶æ·»åŠ :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// dojoç‚¹å‡»äº‹ä»¶æ·»åŠ  by JavaScript</span></span><br><span class="line">dojo.connect(map, <span class="string">'onClick'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> emp = evt.mapPoint;</span><br><span class="line">    <span class="keyword">var</span> cur_wkid = emp.spatialReference.wkid; </span><br><span class="line">    ... more code</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">// dojoç‚¹å‡»äº‹ä»¶æ·»åŠ  by Angular</span></span><br><span class="line">dojo.connect(<span class="keyword">this</span>.map, <span class="string">'onClick'</span>, (evt) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> emp = evt.mapPoint;</span><br><span class="line">    <span class="keyword">const</span> cur_wkid = emp.spatialReference.wkid; </span><br><span class="line">    ... more code</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°çš„åŒºåˆ«è¿˜æœ‰å˜é‡çš„å£°æ˜åŒºåˆ«ã€‚</p><h2 id="èŠ±"><a href="#èŠ±" class="headerlink" title="èŠ±"></a>èŠ±</h2><p>è¿™å°±ç»“æŸäº†ï¼Ÿ</p><p>ä¸ä¸ä¸ï¼Œè¿œè¿œè¿˜ä¸åªè¿™äº›ã€‚ä¸è®ºæ˜¯Angularè¿˜æ˜¯Arcgis,å¾ˆå¤šä¸œè¥¿éƒ½æ²¡æœ‰åšè¿‡å¤šçš„äº†è§£å’Œæ·±å…¥ã€‚ä¸çŸ¥é“é‚£è¡Œä»£ç å­˜åœ¨éšæ‚£ã€‚æ‰€ä»¥é©å‘½å°šæœªæˆåŠŸï¼Œè¿˜å¾—åŠ å€å­¦ä¹ å’Œå®è·µå·©å›ºã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;è¿‘æœŸæˆ‘å¸é¡¹ç›®çš„éœ€è¦ï¼Œé‡‡ç”¨Angular(4)+SpringBootå‰åç«¯åˆ†ç¦»çš„æ¶æ„ã€‚å¹¶ä¸”åœ¨éœ€è¦åœ¨é¡¹ç›®ä¸­å®ç°Arcgisåœ°å›¾ã€‚  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å¯»&quot;&gt;&lt;a href=&quot;#å¯»&quot; class=&quot;headerlink&quot; title=&quot;å¯»&quot;&gt;&lt;/a&gt;å¯»&lt;/h2&gt;&lt;p&gt;åƒæˆ‘è¿™ç§èœé¸¡é‡åˆ°è¿™ç§æ²¡æœ‰å¹²è¿‡çš„äº‹æƒ…è‚¯å®šæ˜¯å…ˆé—®ç™¾åº¦å’Œè°·æ­Œ,ä¸¤ä¸ªå…³é”®è¯æ•²ä¸‹ã€‚å‡ ä¹æœç´¢çš„å†…å®¹é‡Œå¾ˆå°‘æœ‰ä¸¤ä¸ªå…³é”®å­—å…±å­˜çš„ã€‚ä½†æ˜¯æˆ‘è¿™æ…§çœ¼è¯†å¾—å¥½ä»£ç ï¼Œäºæ˜¯å‘ç°äº†è¿™: &lt;a href=&quot;https://github.com/Esri/angular-esri-map&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/Esri/angular-esri-map&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Esriæ˜¯ç¾å›½ç¯å¢ƒç³»ç»Ÿç ”ç©¶æ‰€å…¬å¸,å¤šå¹´æ¥ï¼ŒESRIå…¬å¸å§‹ç»ˆå°†GISè§†ä¸ºä¸€é—¨ç§‘å­¦.ä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯å®˜æ–¹å®ä¾‹å‘€ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Angular" scheme="http://git66.com/tags/Angular/"/>
    
      <category term="WebGis" scheme="http://git66.com/tags/WebGis/"/>
    
      <category term="Arcgis for JavaScript" scheme="http://git66.com/tags/Arcgis-for-JavaScript/"/>
    
      <category term="åœ°å›¾" scheme="http://git66.com/tags/%E5%9C%B0%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªå‘½ä»¤,è§£å†³hexoå¤šæœºæ›´æ–°æ“ä½œ</title>
    <link href="http://git66.com/2017/09/09/hexo-all-update-by-shell/"/>
    <id>http://git66.com/2017/09/09/hexo-all-update-by-shell/</id>
    <published>2017-09-08T23:44:46.000Z</published>
    <updated>2018-03-06T15:45:50.794Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å› ä¸ºæœ¬åšå®¢æ˜¯åŸºäºHexo+GitHub-Pages,æ‰€ä»¥åœ¨<code>hexo -d</code>åç”Ÿæˆçš„é™æ€æ–‡ä»¶éƒ½å­˜æ”¾äºgithubï¼Œæ‰€ä»¥è¿™æ˜¯ä¸ç”¨æ‹…å¿ƒçš„ã€‚æœ¬åœ°çš„hexoåšå®¢çš„æºæ–‡ä»¶å†…å­˜æ”¾ç€å¤§é‡çš„æ–‡ç« markdownæ–‡ä»¶,æ‰€ä»¥é—®é¢˜æ¥äº†ã€‚å¦‚æœæ¢ç”µè„‘æˆ–è€…ç¡¬ä»¶æŸåï¼Œæˆ–è€…æœ‰åœ¨å…¶ä»–æœºå™¨æ›´æ–°æ–‡ç« çš„éœ€æ±‚ã€‚å°±éœ€è¦åšä¸€ä»¶äº‹æƒ…å°±æ˜¯å°†æºæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°hexoåšå®¢æºæ–‡ä»¶çš„æ ¹ç›®å½•æ•´ä¸ªå¤‡ä»½ã€‚</p><a id="more"></a><p>åœ¨é‚£ä¹ˆç°åœ¨å°±å¿…é¡»åšä¸€äº›å‰ç½®æ“ä½œï¼Œå°±æ˜¯æŠŠä½ çš„hexoåšå®¢æºæ–‡ä»¶å¤‡ä»½åˆ°GitHubæˆ–è€…å…¶ä»–ä»£ç æ‰˜ç®¡å¹³å°ï¼Œè¿™é‡Œçš„æ“ä½œå°±ä¸å†™å‡ºæ¥äº†ï¼Œå¯ä»¥å‚è€ƒ<a href="http://www.struy.top/2017/09/02/git%E5%88%9D%E8%AF%86/" target="_blank" rel="noopener">ç½ªæ¶çš„èµ·æºï¼Œgitåˆè¯†</a>é‡Œçš„å¦‚ä½•å°†ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚</p><blockquote><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¼€æºä¸­å›½çš„<a href="https://git.oschina.net/" target="_blank" rel="noopener">ç äº‘</a>,æˆ‘å°±æ˜¯ç”¨çš„ç äº‘[æ‰‹åŠ¨æ»‘ç¨½]ï¼Œæ“ä½œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>æ¸…é™¤hexoçš„<code>public</code>ç›®å½•=&gt;é‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶=&gt;æ›´æ–°github pagesçš„æ–‡ç« å†…å®¹=&gt;æ‹‰å–å…¶ä»–æœºå™¨çš„æäº¤=&gt;å°†æ‰€æœ‰çš„æ–‡ç« Markdownæºæ–‡ä»¶æ”¹åŠ¨addåˆ°æœ¬åœ°æš‚å­˜=&gt;æäº¤=&gt;pushæºæ–‡ä»¶åˆ°å¦ä¸€ä¸ªå¤‡ä»½ä»“åº“</p></blockquote><p>é‚£ä¹ˆè¿™ä¸ªå‘½ä»¤å¦‚ä½•å®ç°ï¼Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« çš„é¢åŸºç¡€ä¸Šï¼Œæˆ‘å¯¹ä¸‰ä¸ªå‘½ä»¤åšå‡ºäº†æ‹“å±•ï¼Œä½¿å®ƒæœ‰ä¸€äº›åŸºæœ¬çš„åŠŸèƒ½ï¼Œæ¯”å¦‚<code>help</code>,é˜²æ­¢è‡ªå·±ä¹Ÿå¿˜äº†è¿™ä¸ªå‘½ä»¤å¹²å˜›çš„ã€‚åŠ å…¥äº†åªæ˜¯æœ¬åœ°é¢„è§ˆåšå®¢çš„æŒ‡ä»¤<code>-s</code>ã€‚å·²ç»ä¸€äº›å‹å¥½çš„æç¤º,è®©ä½ çŸ¥é“å®ƒéƒ½åšäº†ä»€ä¹ˆã€‚é‚£ä¹ˆæ¥çœ‹çœ‹è¿™ä¸ªå‘½ä»¤çš„è„šæœ¬é•¿ä»€ä¹ˆæ ·å§ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  by StruggleYang</span></span><br><span class="line"><span class="comment">#  this is update hexo page or post and backup source</span></span><br><span class="line">this=<span class="variable">$0</span></span><br><span class="line">message=<span class="variable">$1</span></span><br><span class="line"><span class="built_in">help</span>=<span class="string">"help"</span></span><br><span class="line">server=<span class="string">"-s"</span></span><br><span class="line"><span class="comment"># Always pull the latest</span></span><br><span class="line">git pull origin master &amp;&amp;</span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$message</span>"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$message</span>"</span> = <span class="string">"<span class="variable">$help</span>"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$this</span>&gt;&gt;help : "</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"There is only one parameter: commit-message  or -s [locahost server preview Blog] "</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"After the command, add updates to this blog and submit it to the backup repository!"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">"<span class="variable">$message</span>"</span> = <span class="string">"<span class="variable">$server</span>"</span> ]  </span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$this</span> ====hexo &gt;&gt; clean &gt;&gt; generate &gt;&gt; server "</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"==========hexo clean  ...==========="</span> &amp;&amp;</span><br><span class="line">hexo clean &amp;&amp; </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"==========hexo generate ...========="</span> &amp;&amp;</span><br><span class="line">hexo g &amp;&amp; </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"==========hexo server ...========="</span> &amp;&amp;</span><br><span class="line">hexo s</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$this</span> ==== [hexo] &gt;&gt; clean &gt;&gt; generate &gt;&gt; deploy ==|~|== [git] &gt;&gt; add &gt;&gt; commit &gt;&gt; push "</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"==========hexo clean  ...==========="</span> &amp;&amp;</span><br><span class="line">hexo clean &amp;&amp; </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"==========hexo generate ...========="</span> &amp;&amp;</span><br><span class="line">hexo g &amp;&amp; </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"==========hexo deploy ...==========="</span> &amp;&amp;</span><br><span class="line">hexo d &amp;&amp; </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"==========backup hexo source to git.osc ...========="</span> &amp;&amp;</span><br><span class="line">git add -A . &amp;&amp; </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"==========commit message: [ <span class="variable">$message</span> ]========="</span> &amp;&amp;</span><br><span class="line">git commit -m <span class="string">"<span class="variable">$message</span>"</span> &amp;&amp; git push origin master</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$this</span>&gt;&gt;help : "</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"There is only one parameter: commit-message  or help or -s [locahost server preview Blog]"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"After the command, add updates to this blog and submit it to the backup repository!"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">" ==========Over==========="</span></span><br></pre></td></tr></table></figure><p>å‡è®¾å·²ç»å°†æ­¤è„šæœ¬å‘½åä¸º<code>up.sh</code>  </p><p>å½“æˆ‘è¾“å…¥ <code>sh up.sh</code>æ—¶ï¼š<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sh up.sh</span><br><span class="line">        up.sh&gt;&gt;<span class="built_in">help</span> :</span><br><span class="line">        There is only one parameter: commit-message  or <span class="built_in">help</span> or -s [locahost server preview Blog]</span><br><span class="line">        After the command, add updates to this blog and submit it to the backup repository!</span><br><span class="line"> ==========Over===========</span><br></pre></td></tr></table></figure></p><p>å½“æˆ‘è¾“å…¥<code>sh up.sh help</code>æç¤ºå’Œä»¥ä¸Šä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘æ˜¯å¸Œæœ›èƒ½å¤Ÿåœ¨æ¯æ¬¡æ›´æ–°å’Œæäº¤æ—¶ï¼Œèƒ½å¤Ÿè¶³å¤Ÿä¾¿æ·ï¼Œå¹¶ä¸”èƒ½å¤Ÿæç¤ºæˆ‘å¡«å†™commitçš„desc<br>è¿˜æœ‰ä¸€ä¸ªæŒ‡ä»¤æ˜¯<code>-s</code> ï¼Œè¿™ä¸ªæŒ‡ä»¤çš„ä½œç”¨æ˜¾è€Œæ˜“è§åªæ˜¯å°†hexoçš„pageé‡æ–°ç”Ÿæˆå¹¶ä¸”èƒ½å¤Ÿæœ¬åœ°é¢„è§ˆã€‚è·å–å¹¶ä¸æƒ³æäº¤æ›´æ–°ï¼Œæˆ–è€…åªæ˜¯è°ƒè¯•ï¼</p><p>å½“æˆ‘çœŸæ­£çš„éœ€è¦æ›´æ–°æ–‡ç« æˆ–è€…åšå®¢çš„å¸ƒå±€ï¼Œå¹¶ä¸”å¤‡ä»½å…ƒæ•°æ®ï¼<br>åªéœ€è¦è¿™æ ·å†™:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sh up.sh &quot;this is commit message test&quot;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œå¦‚ä¸‹:<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">F:\<span class="title">hexo</span> (<span class="title">master</span>)                                                                                  </span></span><br><span class="line"><span class="function">Î» <span class="title">sh</span> <span class="title">up.sh</span> "<span class="title">this</span> <span class="title">is</span> <span class="title">commit</span> <span class="title">message</span> <span class="title">test</span>"                                                                            </span></span><br><span class="line"><span class="function">        <span class="title">up.sh</span> ==== [<span class="title">hexo</span>] &gt;&gt; <span class="title">clean</span> &gt;&gt; <span class="title">generate</span> &gt;&gt; <span class="title">deploy</span> ==|~|== [<span class="title">git</span>] &gt;&gt; <span class="title">add</span> &gt;&gt; <span class="title">commit</span> &gt;&gt; <span class="title">push</span>                        </span></span><br><span class="line"><span class="function">==========<span class="title">hexo</span> <span class="title">clean</span>  ...===========                                                                                   </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Deleted</span> <span class="title">database</span>.                                                                                                </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Deleted</span> <span class="title">public</span> <span class="title">folder</span>.                                                                                           </span></span><br><span class="line"><span class="function">==========<span class="title">hexo</span> <span class="title">generate</span> ...=========                                                                                   </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Start</span> <span class="title">processing</span>                                                                                                 </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Files</span> <span class="title">loaded</span> <span class="title">in</span> 1.4 <span class="title">s</span>                                                                                            </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Generated</span>: <span class="title">content.json</span>                                                                                          </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Generated</span>: <span class="title">index.html</span>                                                                                            </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Generated</span>: <span class="title">tools</span>/<span class="title">index.html</span>                                                                                      </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Generated</span>: <span class="title">soul</span>/<span class="title">index.html</span> </span></span><br><span class="line"><span class="function">........çœç•¥éƒ¨åˆ†                                                                                  </span></span><br><span class="line"><span class="function">==========<span class="title">hexo</span> <span class="title">deploy</span> ...===========                                                                                   </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Deploying</span>: <span class="title">git</span>                                                                                                   </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Clearing</span> .<span class="title">deploy_git</span> <span class="title">folder</span>...                                                                                   </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Copying</span> <span class="title">files</span> <span class="title">from</span> <span class="title">public</span> <span class="title">folder</span>...                                                                              </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Copying</span> <span class="title">files</span> <span class="title">from</span> <span class="title">extend</span> <span class="title">dirs</span>...     </span></span><br><span class="line"><span class="function">........çœç•¥éƒ¨åˆ†                                                                             </span></span><br><span class="line"><span class="function"><span class="title">INFO</span>  <span class="title">Deploy</span> <span class="title">done</span>: <span class="title">git</span>                                                                                                 </span></span><br><span class="line"><span class="function">==========<span class="title">backup</span> <span class="title">hexo</span> <span class="title">source</span> <span class="title">to</span> <span class="title">git.osc</span> ...=========                                                                   </span></span><br><span class="line"><span class="function"><span class="title">warning</span>: <span class="title">LF</span> <span class="title">will</span> <span class="title">be</span> <span class="title">replaced</span> <span class="title">by</span> <span class="title">CRLF</span> <span class="title">in</span> <span class="title">source</span>/<span class="title">_posts</span>/<span class="title">hexo</span>-<span class="title">all</span>-<span class="title">update</span>-<span class="title">by</span>-<span class="title">shell.md</span>.                                     </span></span><br><span class="line"><span class="function"><span class="title">The</span> <span class="title">file</span> <span class="title">will</span> <span class="title">have</span> <span class="title">its</span> <span class="title">original</span> <span class="title">line</span> <span class="title">endings</span> <span class="title">in</span> <span class="title">your</span> <span class="title">working</span> <span class="title">directory</span>.                                                </span></span><br><span class="line"><span class="function">==========<span class="title">commit</span> <span class="title">message</span>: [ <span class="title">this</span> <span class="title">is</span> <span class="title">commit</span> <span class="title">message</span> <span class="title">test</span> ]=========                                                     </span></span><br><span class="line"><span class="function">3 <span class="title">files</span> <span class="title">changed</span>, 34 <span class="title">insertions</span>(+), 2 <span class="title">deletions</span>(-)</span></span><br><span class="line"><span class="function"><span class="title">Counting</span> <span class="title">objects</span>: 27, <span class="title">done</span>.</span></span><br><span class="line"><span class="function"><span class="title">Delta</span> <span class="title">compression</span> <span class="title">using</span> <span class="title">up</span> <span class="title">to</span> 4 <span class="title">threads</span>.</span></span><br><span class="line"><span class="function"><span class="title">Compressing</span> <span class="title">objects</span>: 100% (27/27), <span class="title">done</span>.</span></span><br><span class="line"><span class="function"><span class="title">Writing</span> <span class="title">objects</span>: 100% (27/27), 14.86 <span class="title">KiB</span> | 0 <span class="title">bytes</span>/<span class="title">s</span>, <span class="title">done</span>.</span></span><br><span class="line"><span class="function"><span class="title">Total</span> 27 (<span class="title">delta</span> 14), <span class="title">reused</span> 0 (<span class="title">delta</span> 0)</span></span><br><span class="line"><span class="function"><span class="title">To</span> <span class="title">https</span>://<span class="title">git.oschina.net</span>/<span class="title">StruggleYang</span>/<span class="title">hexo.git</span></span></span><br><span class="line"><span class="function">   <span class="title">d9838c0</span>..50<span class="title">bb11d</span>  <span class="title">master</span> -&gt; <span class="title">master</span>                          </span></span><br><span class="line"><span class="function"> ==========<span class="title">Over</span>===========</span></span><br></pre></td></tr></table></figure></p><h2 id="å¦‚ä½•å¤šæœºæ›´æ–°"><a href="#å¦‚ä½•å¤šæœºæ›´æ–°" class="headerlink" title="å¦‚ä½•å¤šæœºæ›´æ–°"></a>å¦‚ä½•å¤šæœºæ›´æ–°</h2><p>ç­‰ä½ æ¢äº†ç”µè„‘æˆ–è€…å…¬å¸çš„ç”µè„‘æ¥æ›´æ–°çš„çš„æ—¶å€™ã€‚å‰ææ˜¯è¿™å°ç”µè„‘æ˜¯éœ€è¦æœ‰node.jså’Œnpmä»¥åŠhexoç¯å¢ƒçš„ã€‚é‚£åªéœ€è¦å°†å¤‡ä»½çš„å…ƒæ•°æ®cloneåˆ°ä½ æƒ³è¦çš„ä½ç½®ã€‚  </p><p>æ‰§è¡Œ:  </p><pre><code>$ npm install</code></pre><blockquote><p>ç„¶åæ›´æ–°æ–‡ç« ï¼Œç»§ç»­ä½¿ç”¨è¿™ä¸ªè„šæœ¬æ¥ä½¿å¾—hexoå˜å¾—æ›´ä¸ºè½»æ¾ï¼</p><p>äº‹å®è¯æ˜ï¼Œè¿™æ ·çš„æ–¹å¼æš‚æ—¶æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ã€‚å¹¶ä¸”éå¸¸çš„æ–¹ä¾¿ï¼</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æ€è·¯&quot;&gt;&lt;a href=&quot;#æ€è·¯&quot; class=&quot;headerlink&quot; title=&quot;æ€è·¯&quot;&gt;&lt;/a&gt;æ€è·¯&lt;/h2&gt;&lt;p&gt;å› ä¸ºæœ¬åšå®¢æ˜¯åŸºäºHexo+GitHub-Pages,æ‰€ä»¥åœ¨&lt;code&gt;hexo -d&lt;/code&gt;åç”Ÿæˆçš„é™æ€æ–‡ä»¶éƒ½å­˜æ”¾äºgithubï¼Œæ‰€ä»¥è¿™æ˜¯ä¸ç”¨æ‹…å¿ƒçš„ã€‚æœ¬åœ°çš„hexoåšå®¢çš„æºæ–‡ä»¶å†…å­˜æ”¾ç€å¤§é‡çš„æ–‡ç« markdownæ–‡ä»¶,æ‰€ä»¥é—®é¢˜æ¥äº†ã€‚å¦‚æœæ¢ç”µè„‘æˆ–è€…ç¡¬ä»¶æŸåï¼Œæˆ–è€…æœ‰åœ¨å…¶ä»–æœºå™¨æ›´æ–°æ–‡ç« çš„éœ€æ±‚ã€‚å°±éœ€è¦åšä¸€ä»¶äº‹æƒ…å°±æ˜¯å°†æºæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°hexoåšå®¢æºæ–‡ä»¶çš„æ ¹ç›®å½•æ•´ä¸ªå¤‡ä»½ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://git66.com/tags/hexo/"/>
    
      <category term="shell" scheme="http://git66.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>ç½ªæ¶çš„èµ·æºï¼Œgitåˆè¯†</title>
    <link href="http://git66.com/2017/09/02/git-0/"/>
    <id>http://git66.com/2017/09/02/git-0/</id>
    <published>2017-09-02T01:46:00.000Z</published>
    <updated>2018-03-06T15:15:56.497Z</updated>
    
    <content type="html"><![CDATA[<h2 id="gitå’Œsvnçš„åŒºåˆ«"><a href="#gitå’Œsvnçš„åŒºåˆ«" class="headerlink" title="gitå’Œsvnçš„åŒºåˆ«"></a>gitå’Œsvnçš„åŒºåˆ«</h2><ul><li>SVNã€cvsé›†ä¸­å¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ  </li><li>Gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</li></ul><h2 id="gitå®‰è£…"><a href="#gitå®‰è£…" class="headerlink" title="gitå®‰è£…"></a>gitå®‰è£…</h2><p>Linux å°è¯•è¾“å…¥gitå¯æŸ¥çœ‹æ˜¯å¦å®‰è£…ï¼Œå¦‚æœæœªå®‰è£…æŒ‰ç…§æç¤ºå®‰è£…</p><p>windowsç›´æ¥å®˜ç½‘ä¸‹æ¡Œé¢ç‰ˆ</p><p>å®‰è£…å®Œæˆåï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥è®¾ç½®ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;Your Name&quot;</span><br><span class="line">$ git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure><p>å› ä¸ºGitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªæœºå™¨éƒ½å¿…é¡»è‡ªæŠ¥å®¶é—¨ï¼šä½ çš„åå­—å’ŒEmailåœ°å€</p><p>æ³¨æ„git configå‘½ä»¤çš„â€“globalå‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚</p><h2 id="åˆ›å»ºç‰ˆæœ¬ä»“åº“"><a href="#åˆ›å»ºç‰ˆæœ¬ä»“åº“" class="headerlink" title="åˆ›å»ºç‰ˆæœ¬ä»“åº“"></a>åˆ›å»ºç‰ˆæœ¬ä»“åº“</h2><blockquote><p>ä»€ä¹ˆæ˜¯ç‰ˆæœ¬åº“å‘¢ï¼Ÿç‰ˆæœ¬åº“åˆåä»“åº“ï¼Œè‹±æ–‡årepositoryï¼Œä½ å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è¢«Gitç®¡ç†èµ·æ¥ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€åˆ é™¤ï¼ŒGitéƒ½èƒ½è·Ÿè¸ªï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è¿½è¸ªå†å²ï¼Œæˆ–è€…åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»å¯ä»¥â€œè¿˜åŸâ€ã€‚  </p></blockquote><a id="more"></a>  <p>åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬åº“éå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åœ°æ–¹ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir learngit</span><br><span class="line">$ cd learngit</span><br><span class="line">$ pwd</span><br><span class="line">/Users/michael/learngit</span><br></pre></td></tr></table></figure><p>pwdå‘½ä»¤ç”¨äºæ˜¾ç¤ºå½“å‰ç›®å½•</p><p><strong>Windowsç³»ç»Ÿï¼Œä¸ºäº†é¿å…é‡åˆ°å„ç§è«åå…¶å¦™çš„é—®é¢˜ï¼Œè¯·ç¡®ä¿ç›®å½•åï¼ˆåŒ…æ‹¬çˆ¶ç›®å½•ï¼‰ä¸åŒ…å«ä¸­æ–‡ã€‚</strong>  </p><p>ç¬¬äºŒæ­¥ï¼Œé€šè¿‡git initå‘½ä»¤æŠŠè¿™ä¸ªç›®å½•å˜æˆGitå¯ä»¥ç®¡ç†çš„ä»“åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">Initialized empty Git repository in /Users/michael/learngit/.git/</span><br></pre></td></tr></table></figure><p>å½“å‰ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª.gitçš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•æ˜¯Gitæ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“çš„ï¼Œæ²¡äº‹åƒä¸‡ä¸è¦æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªç›®å½•é‡Œé¢çš„æ–‡ä»¶ï¼Œä¸ç„¶æ”¹ä¹±äº†ï¼Œå°±æŠŠGitä»“åº“ç»™ç ´å</p><p>å¦‚æœæ²¡æœ‰çœ‹åˆ°.gitç›®å½•ï¼Œé‚£æ˜¯å› ä¸ºè¿™ä¸ªç›®å½•é»˜è®¤æ˜¯éšè—çš„ï¼Œç”¨ls -ahå‘½ä»¤å°±å¯ä»¥çœ‹è§ã€‚</p><p>åœ¨å½“å‰ç›®å½•ä¸­æ·»åŠ ä»»æ„æ–‡ä»¶ï¼šreadme.txt(ç¤ºä¾‹è€Œå·²)</p><p>å°†æ–‡ä»¶æ·»åŠ åˆ°ä»“åº“<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add readme.txt</span><br></pre></td></tr></table></figure></p><p>å°†æ–‡ä»¶æäº¤ä»“åº“ä¸­</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &quot;wrote a readme file&quot;</span><br><span class="line">[master (root-commit) cb926e7] wrote a readme file</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line"> create mode 100644 readme.txt</span><br></pre></td></tr></table></figure><h2 id="ä¸€äº›å¸¸ç”¨å‘½ä»¤"><a href="#ä¸€äº›å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ä¸€äº›å¸¸ç”¨å‘½ä»¤"></a>ä¸€äº›å¸¸ç”¨å‘½ä»¤</h2><p>ä¿®æ”¹äº†æ–‡ä»¶<code>git status</code>æŸ¥çœ‹çŠ¶æ€    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"># On branch master</span><br><span class="line"># Changes not staged for commit:</span><br><span class="line">#   (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">#   (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line">#</span><br><span class="line">#    modified:   readme.txt</span><br><span class="line">#</span><br><span class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span><br></pre></td></tr></table></figure><p><code>git status</code>å‘½ä»¤å¯ä»¥è®©æˆ‘ä»¬æ—¶åˆ»æŒæ¡ä»“åº“å½“å‰çš„çŠ¶æ€ï¼Œä¸Šé¢çš„å‘½ä»¤å‘Šè¯‰æˆ‘ä»¬ï¼Œreadme.txtè¢«ä¿®æ”¹è¿‡äº†ï¼Œä½†è¿˜æ²¡æœ‰å‡†å¤‡æäº¤çš„ä¿®æ”¹ã€‚</p><p><code>git diff</code>æŸ¥çœ‹å…·ä½“ä¿®æ”¹çš„å†…å®¹å·®å¼‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git diff readme.txt </span><br><span class="line">diff --git a/readme.txt b/readme.txt</span><br><span class="line">index 46d49bf..9247db6 100644</span><br><span class="line">--- a/readme.txt</span><br><span class="line">+++ b/readme.txt</span><br><span class="line">@@ -1,2 +1,2 @@</span><br><span class="line">-Git is a version control system.</span><br><span class="line">+Git is a distributed version control system.</span><br><span class="line"> Git is free software.</span><br></pre></td></tr></table></figure><h2 id="ç‰ˆæœ¬å›é€€"><a href="#ç‰ˆæœ¬å›é€€" class="headerlink" title="ç‰ˆæœ¬å›é€€"></a>ç‰ˆæœ¬å›é€€</h2><p><code>git log</code>å‘½ä»¤æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">commit 3628164fb26d48395383f8f31179f24e0882e1e0</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Tue Aug 20 15:11:49 2013 +0800</span><br><span class="line"></span><br><span class="line">    append GPL</span><br><span class="line"></span><br><span class="line">commit ea34578d5496d7dd233c827ed32a8cd576c5ee85</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Tue Aug 20 14:53:12 2013 +0800</span><br><span class="line"></span><br><span class="line">    add distributed</span><br><span class="line"></span><br><span class="line">commit cb926e7ea50ad11b8f9e909c05226233bf755030</span><br><span class="line">Author: Michael Liao &lt;askxuefeng@gmail.com&gt;</span><br><span class="line">Date:   Mon Aug 19 17:51:55 2013 +0800</span><br><span class="line"></span><br><span class="line">    wrote a readme file</span><br></pre></td></tr></table></figure><p><code>git log --pretty=oneline</code>æ˜¾ç¤ºç®€ç•¥ä¿¡æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=oneline</span><br><span class="line">3628164fb26d48395383f8f31179f24e0882e1e0 append GPL</span><br><span class="line">ea34578d5496d7dd233c827ed32a8cd576c5ee85 add distributed</span><br><span class="line">cb926e7ea50ad11b8f9e909c05226233bf755030 wrote a readme file</span><br></pre></td></tr></table></figure><blockquote><p>ç±»ä¼¼3628164â€¦882e1e0çš„æ˜¯commit idï¼ˆç‰ˆæœ¬å·ï¼‰ï¼Œå’ŒSVNä¸ä¸€æ ·ï¼ŒGitçš„commit idä¸æ˜¯1ï¼Œ2ï¼Œ3â€¦â€¦é€’å¢çš„æ•°å­—ï¼Œè€Œæ˜¯ä¸€ä¸ªSHA1è®¡ç®—å‡ºæ¥çš„ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—ï¼Œç”¨åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œè€Œä¸”ä½ çœ‹åˆ°çš„commit idå’Œæˆ‘çš„è‚¯å®šä¸ä¸€æ ·ï¼Œä»¥ä½ è‡ªå·±çš„ä¸ºå‡†ã€‚ä¸ºä»€ä¹ˆcommit idéœ€è¦ç”¨è¿™ä¹ˆä¸€å¤§ä¸²æ•°å­—è¡¨ç¤ºå‘¢ï¼Ÿå› ä¸ºGitæ˜¯åˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œåé¢æˆ‘ä»¬è¿˜è¦ç ”ç©¶å¤šäººåœ¨åŒä¸€ä¸ªç‰ˆæœ¬åº“é‡Œå·¥ä½œï¼Œå¦‚æœå¤§å®¶éƒ½ç”¨1ï¼Œ2ï¼Œ3â€¦â€¦ä½œä¸ºç‰ˆæœ¬å·ï¼Œé‚£è‚¯å®šå°±å†²çªäº†ã€‚</p></blockquote><p>å›é€€ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure><p>å›é€€ä¸Šä¸€ä¸ªçš„ä¸Šä¸€ä¸ªç‰ˆæœ¬<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^^</span><br></pre></td></tr></table></figure></p><p>ç‰ˆæœ¬å¤šäº†å°±</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~100</span><br></pre></td></tr></table></figure><p>é€šè¿‡commit idå›é€€ç‰ˆæœ¬æˆ–å›åˆ°æœ€æ–°ç‰ˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard 3628164</span><br></pre></td></tr></table></figure><p>ç‰ˆæœ¬å·æ²¡å¿…è¦å†™å…¨ï¼Œå‰å‡ ä½å°±å¯ä»¥äº†ï¼ŒGitä¼šè‡ªåŠ¨å»æ‰¾ã€‚</p><p>Gitçš„ç‰ˆæœ¬å›é€€é€Ÿåº¦éå¸¸å¿«ï¼Œå› ä¸ºGitåœ¨å†…éƒ¨æœ‰ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„HEADæŒ‡é’ˆï¼Œå½“ä½ å›é€€ç‰ˆæœ¬çš„æ—¶å€™ï¼ŒGitä»…ä»…æ˜¯æŠŠHEADä»æŒ‡å‘ä½ å›é€€çš„ç‰ˆæœ¬</p><blockquote><p>ç°åœ¨ï¼Œä½ å›é€€åˆ°äº†æŸä¸ªç‰ˆæœ¬ï¼Œå…³æ‰äº†ç”µè„‘ï¼Œç¬¬äºŒå¤©æ—©ä¸Šå°±åæ‚”äº†ï¼Œæƒ³æ¢å¤åˆ°æ–°ç‰ˆæœ¬æ€ä¹ˆåŠï¼Ÿæ‰¾ä¸åˆ°æ–°ç‰ˆæœ¬çš„commit idæ€ä¹ˆåŠï¼Ÿ</p></blockquote><p>Gitæä¾›äº†ä¸€ä¸ªå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure></p><p>ç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line">ea34578 HEAD@&#123;0&#125;: reset: moving to HEAD^</span><br><span class="line">3628164 HEAD@&#123;1&#125;: commit: append GPL</span><br><span class="line">ea34578 HEAD@&#123;2&#125;: commit: add distributed</span><br><span class="line">cb926e7 HEAD@&#123;3&#125;: commit (initial): wrote a readme file</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥æ‰¾åˆ°æŸä¸ªç‰ˆæœ¬çš„commit idäº†</p><h2 id="å·¥ä½œåŒºä¸æš‚å­˜åŒº"><a href="#å·¥ä½œåŒºä¸æš‚å­˜åŒº" class="headerlink" title="å·¥ä½œåŒºä¸æš‚å­˜åŒº"></a>å·¥ä½œåŒºä¸æš‚å­˜åŒº</h2><p>æ“ä½œgitçš„ç›®å½•å°±æ˜¯å·¥ä½œåŒº</p><p>ç‰ˆæœ¬åº“ï¼š<br>åœ¨git initæ—¶ï¼Œä¼šåœ¨å½“å‰å·¥ä½œåŒºç›®å½•ä¸‹ç”Ÿæˆ.gitç›®å½•ã€‚è¿™ä¸å±äºå·¥ä½œåŒºçš„ï¼Œè€Œå±äºGitç‰ˆæœ¬åº“</p><p>Gitçš„ç‰ˆæœ¬åº“é‡Œå­˜äº†å¾ˆå¤šä¸œè¥¿ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ç§°ä¸ºstageï¼ˆæˆ–è€…å«indexï¼‰çš„æš‚å­˜åŒºï¼Œè¿˜æœ‰Gitä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯masterï¼Œä»¥åŠæŒ‡å‘masterçš„ä¸€ä¸ªæŒ‡é’ˆå«HEADã€‚</p><p><img src="https://www.liaoxuefeng.com/files/attachments/001384907702917346729e9afbf4127b6dfbae9207af016000/0" alt="image"></p><p>æŠŠæ–‡ä»¶å¾€Gitç‰ˆæœ¬åº“é‡Œæ·»åŠ çš„æ—¶å€™ï¼Œæ˜¯åˆ†ä¸¤æ­¥æ‰§è¡Œçš„ï¼š</p><p>ç¬¬ä¸€æ­¥æ˜¯ç”¨git addæŠŠæ–‡ä»¶æ·»åŠ è¿›å»ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼›</p><p>ç¬¬äºŒæ­¥æ˜¯ç”¨git commitæäº¤æ›´æ”¹ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚</p><h2 id="æ’¤é”€ä¿®æ”¹"><a href="#æ’¤é”€ä¿®æ”¹" class="headerlink" title="æ’¤é”€ä¿®æ”¹"></a>æ’¤é”€ä¿®æ”¹</h2><p><code>git checkout -- file</code>å¯ä»¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼š </p><p>ä¸€ç§æ˜¯æ–‡ä»¶è‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼›</p><p>ä¸€ç§æ˜¯readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚</p><p>æ€»ä¹‹ï¼Œå°±æ˜¯è®©è¿™ä¸ªæ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚</p><h2 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h2><p>ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm file</span><br></pre></td></tr></table></figure></p><p>æäº¤</p><h2 id="è¿œç¨‹ä»“åº“ï¼ˆgithubï¼‰"><a href="#è¿œç¨‹ä»“åº“ï¼ˆgithubï¼‰" class="headerlink" title="è¿œç¨‹ä»“åº“ï¼ˆgithubï¼‰"></a>è¿œç¨‹ä»“åº“ï¼ˆgithubï¼‰</h2><p>ç¬¬1æ­¥ï¼šåˆ›å»ºSSH Keyã€‚åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰.sshç›®å½•ï¼Œå¦‚æœæœ‰ï¼Œå†çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰<code>id_rsa</code>å’Œ<code>id_rsa.pub</code>è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œå¯ç›´æ¥è·³åˆ°ä¸‹ä¸€æ­¥ã€‚<br>å¦‚æœæ²¡æœ‰ï¼Œæ‰“å¼€Shellï¼ˆWindowsä¸‹æ‰“å¼€Git Bashï¼‰ï¼Œåˆ›å»ºSSH Keyï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</span><br></pre></td></tr></table></figure><p>id_rsaæ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºå»ï¼Œid_rsa.pubæ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚</p><p>ç¬¬2æ­¥ï¼šç™»é™†GitHubï¼Œæ‰“å¼€â€œAccount settingsâ€ï¼Œâ€œSSH Keysâ€é¡µé¢ï¼š</p><p>ç„¶åï¼Œç‚¹â€œAdd SSH Keyâ€ï¼Œå¡«ä¸Šä»»æ„Titleï¼Œåœ¨Keyæ–‡æœ¬æ¡†é‡Œç²˜è´´id_rsa.pubæ–‡ä»¶çš„å†…å®¹</p><p>ä¸ºä»€ä¹ˆGitHubéœ€è¦SSH Keyå‘¢ï¼Ÿ  </p><p>å› ä¸ºGitHubéœ€è¦è¯†åˆ«å‡ºä½ æ¨é€çš„æäº¤ç¡®å®æ˜¯ä½ æ¨é€çš„ï¼Œè€Œä¸æ˜¯åˆ«äººå†’å……çš„ï¼Œè€ŒGitæ”¯æŒSSHåè®®ï¼Œæ‰€ä»¥ï¼ŒGitHubåªè¦çŸ¥é“äº†ä½ çš„å…¬é’¥ï¼Œå°±å¯ä»¥ç¡®è®¤åªæœ‰ä½ è‡ªå·±æ‰èƒ½æ¨é€</p><h2 id="æ·»åŠ è¿œç¨‹ä»“åº“"><a href="#æ·»åŠ è¿œç¨‹ä»“åº“" class="headerlink" title="æ·»åŠ è¿œç¨‹ä»“åº“"></a>æ·»åŠ è¿œç¨‹ä»“åº“</h2><p>1.åœ¨githubä¸Šåˆ›å»ºç©ºä»“åº“</p><p>2.å…³è”æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git@github.com:youname/learngit.git</span><br></pre></td></tr></table></figure></p><p>3.åˆæ¬¡æ¨é€æœ¬åœ°ä»“åº“çš„å†…å®¹åˆ°è¿œç¨‹ä»“åº“ä¸­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br><span class="line">Counting objects: 19, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (19/19), done.</span><br><span class="line">Writing objects: 100% (19/19), 13.73 KiB, done.</span><br><span class="line">Total 23 (delta 6), reused 0 (delta 0)</span><br><span class="line">To git@github.com:michaelliao/learngit.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br><span class="line">Branch master set up to track remote branch master from origin.</span><br></pre></td></tr></table></figure><p>4.å¾€åçš„æ¯æ¬¡æ¨é€<code>$ git push origin master</code></p><h2 id="SSHè­¦å‘Š"><a href="#SSHè­¦å‘Š" class="headerlink" title="SSHè­¦å‘Š"></a>SSHè­¦å‘Š</h2><p>ç¬¬ä¸€æ¬¡ä½¿ç”¨Gitçš„cloneæˆ–è€…pushå‘½ä»¤è¿æ¥GitHubæ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªè­¦å‘Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The authenticity of host &apos;github.com (xx.xx.xx.xx)&apos; can&apos;t be established.</span><br><span class="line">RSA key fingerprint is xx.xx.xx.xx.xx.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)?</span><br></pre></td></tr></table></figure><p>è¾“å…¥yeså›è½¦å³å¯ã€‚</p><h2 id="ä»è¿œç¨‹ä»“åº“å…‹éš†"><a href="#ä»è¿œç¨‹ä»“åº“å…‹éš†" class="headerlink" title="ä»è¿œç¨‹ä»“åº“å…‹éš†"></a>ä»è¿œç¨‹ä»“åº“å…‹éš†</h2><p><code>git clone</code>å…‹éš†ä¸€ä¸ªæœ¬åœ°åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/username/gitTest.git</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ”¯ç®¡ç†"><a href="#åˆ†æ”¯ç®¡ç†" class="headerlink" title="åˆ†æ”¯ç®¡ç†"></a>åˆ†æ”¯ç®¡ç†</h2><p>åˆ†æ”¯ä½œç”¨ï¼š</p><blockquote><p>å‡è®¾ä½ å‡†å¤‡å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦ä¸¤å‘¨æ‰èƒ½å®Œæˆï¼Œç¬¬ä¸€å‘¨ä½ å†™äº†50%çš„ä»£ç ï¼Œå¦‚æœç«‹åˆ»æäº¤ï¼Œç”±äºä»£ç è¿˜æ²¡å†™å®Œï¼Œä¸å®Œæ•´çš„ä»£ç åº“ä¼šå¯¼è‡´åˆ«äººä¸èƒ½å¹²æ´»äº†ã€‚å¦‚æœç­‰ä»£ç å…¨éƒ¨å†™å®Œå†ä¸€æ¬¡æäº¤ï¼Œåˆå­˜åœ¨ä¸¢å¤±æ¯å¤©è¿›åº¦çš„å·¨å¤§é£é™©ã€‚</p></blockquote><p>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œmasteråˆ†æ”¯æ˜¯ä¸€æ¡çº¿ï¼ŒGitç”¨masteræŒ‡å‘æœ€æ–°çš„æäº¤ï¼Œå†ç”¨HEADæŒ‡å‘masterï¼Œå°±èƒ½ç¡®å®šå½“å‰åˆ†æ”¯ï¼Œä»¥åŠå½“å‰åˆ†æ”¯çš„æäº¤ç‚¹ï¼š  </p><p><img src="https://www.liaoxuefeng.com/files/attachments/0013849087937492135fbf4bbd24dfcbc18349a8a59d36d000/0" alt="image">    </p><p>æ¯æ¬¡æäº¤ï¼Œmasteråˆ†æ”¯éƒ½ä¼šå‘å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè¿™æ ·ï¼Œéšç€ä½ ä¸æ–­æäº¤ï¼Œmasteråˆ†æ”¯çš„çº¿ä¹Ÿè¶Šæ¥è¶Šé•¿ï¼š  </p><p>å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚devæ—¶ï¼ŒGitæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆå«devï¼ŒæŒ‡å‘masterç›¸åŒçš„æäº¤ï¼Œå†æŠŠHEADæŒ‡å‘devï¼Œå°±è¡¨ç¤ºå½“å‰åˆ†æ”¯åœ¨devä¸Šï¼š</p><p><img src="https://www.liaoxuefeng.com/files/attachments/001384908811773187a597e2d844eefb11f5cf5d56135ca000/0" alt="image"></p><p>Gitåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å¾ˆå¿«ï¼Œå› ä¸ºé™¤äº†å¢åŠ ä¸€ä¸ªdevæŒ‡é’ˆï¼Œæ”¹æ”¹HEADçš„æŒ‡å‘ï¼Œå·¥ä½œåŒºçš„æ–‡ä»¶éƒ½æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼</p><p>ä¸è¿‡ï¼Œä»ç°åœ¨å¼€å§‹ï¼Œå¯¹å·¥ä½œåŒºçš„ä¿®æ”¹å’Œæäº¤å°±æ˜¯é’ˆå¯¹devåˆ†æ”¯äº†ï¼Œæ¯”å¦‚æ–°æäº¤ä¸€æ¬¡åï¼ŒdevæŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè€ŒmasteræŒ‡é’ˆä¸å˜ï¼š</p><p><img src="https://www.liaoxuefeng.com/files/attachments/0013849088235627813efe7649b4f008900e5365bb72323000/0" alt="image"></p><p>å‡å¦‚æˆ‘ä»¬åœ¨devä¸Šçš„å·¥ä½œå®Œæˆäº†ï¼Œå°±å¯ä»¥æŠŠdevåˆå¹¶åˆ°masterä¸Šã€‚Gitæ€ä¹ˆåˆå¹¶å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥æŠŠmasteræŒ‡å‘devçš„å½“å‰æäº¤ï¼Œå°±å®Œæˆäº†åˆå¹¶ï¼š </p><p><img src="https://www.liaoxuefeng.com/files/attachments/00138490883510324231a837e5d4aee844d3e4692ba50f5000/0" alt="image"> </p><p>åˆå¹¶å®Œåˆ†æ”¯åï¼Œç”šè‡³å¯ä»¥åˆ é™¤devåˆ†æ”¯ã€‚åˆ é™¤devåˆ†æ”¯å°±æ˜¯æŠŠdevæŒ‡é’ˆç»™åˆ æ‰ï¼Œåˆ æ‰åï¼Œæˆ‘ä»¬å°±å‰©ä¸‹äº†ä¸€æ¡masteråˆ†æ”¯ï¼š</p><p>åˆ›å»ºdevåˆ†æ”¯ï¼Œç„¶ååˆ‡æ¢åˆ°devåˆ†æ”¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev</span><br><span class="line">Switched to a new branch &apos;dev&apos;</span><br></pre></td></tr></table></figure><p><code>git checkout</code>å‘½ä»¤åŠ ä¸Š-bå‚æ•°è¡¨ç¤ºåˆ›å»ºå¹¶åˆ‡æ¢ï¼Œç›¸å½“äºä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch dev</span><br><span class="line">$ git checkout dev</span><br><span class="line">Switched to branch &apos;dev&apos;</span><br></pre></td></tr></table></figure><p>ç”¨<code>git branch</code>å‘½ä»¤æŸ¥çœ‹å½“å‰åˆ†æ”¯ï¼š<br>*å·ä¸ºå½“å‰åˆ†æ”¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br></pre></td></tr></table></figure></p><h2 id="åˆå¹¶åˆ†æ”¯"><a href="#åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆå¹¶åˆ†æ”¯"></a>åˆå¹¶åˆ†æ”¯</h2><p>git mergeå‘½ä»¤ç”¨äºåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚æ‰€ä»¥åˆå¹¶å‰å…ˆåˆ‡æ¢éœ€è¦åˆå¹¶çš„åˆ†æ”¯ä¹‹å¤–çš„åˆ†æ”¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git merge dev</span><br><span class="line">Updating d17efd8..fec145a</span><br><span class="line">Fast-forward</span><br><span class="line"> readme.txt |    1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure><p>Fast-forward è¡¨ç¤ºæ˜¯å¿«é€Ÿåˆå¹¶</p><h2 id="åˆ é™¤åˆ†æ”¯"><a href="#åˆ é™¤åˆ†æ”¯" class="headerlink" title="åˆ é™¤åˆ†æ”¯"></a>åˆ é™¤åˆ†æ”¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d dev</span><br><span class="line">Deleted branch dev (was fec145a).</span><br></pre></td></tr></table></figure><p>å°ç»“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Gité¼“åŠ±å¤§é‡ä½¿ç”¨åˆ†æ”¯ï¼š</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹åˆ†æ”¯ï¼šgit branch</span><br><span class="line"></span><br><span class="line">åˆ›å»ºåˆ†æ”¯ï¼šgit branch &lt;name&gt;</span><br><span class="line"></span><br><span class="line">åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout &lt;name&gt;</span><br><span class="line"></span><br><span class="line">åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b &lt;name&gt;</span><br><span class="line"></span><br><span class="line">åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge &lt;name&gt;</span><br><span class="line"></span><br><span class="line">åˆ é™¤åˆ†æ”¯ï¼šgit branch -d &lt;name&gt;</span><br></pre></td></tr></table></figure><h2 id="åˆå¹¶åˆ†æ”¯çš„å†²çªå¤„ç†"><a href="#åˆå¹¶åˆ†æ”¯çš„å†²çªå¤„ç†" class="headerlink" title="åˆå¹¶åˆ†æ”¯çš„å†²çªå¤„ç†"></a>åˆå¹¶åˆ†æ”¯çš„å†²çªå¤„ç†</h2><p>åˆå¹¶åˆ†æ”¯æ—¶å¦‚æœæœ‰å†²çªï¼Œåœ¨å½“å‰åˆ†æ”¯ä¿®æ”¹åæäº¤ï¼Œåˆ é™¤è¦åˆå¹¶çš„åˆ†æ”¯</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;gitå’Œsvnçš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#gitå’Œsvnçš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;gitå’Œsvnçš„åŒºåˆ«&quot;&gt;&lt;/a&gt;gitå’Œsvnçš„åŒºåˆ«&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;SVNã€cvsé›†ä¸­å¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ  &lt;/li&gt;
&lt;li&gt;Gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;gitå®‰è£…&quot;&gt;&lt;a href=&quot;#gitå®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;gitå®‰è£…&quot;&gt;&lt;/a&gt;gitå®‰è£…&lt;/h2&gt;&lt;p&gt;Linux å°è¯•è¾“å…¥gitå¯æŸ¥çœ‹æ˜¯å¦å®‰è£…ï¼Œå¦‚æœæœªå®‰è£…æŒ‰ç…§æç¤ºå®‰è£…&lt;/p&gt;
&lt;p&gt;windowsç›´æ¥å®˜ç½‘ä¸‹æ¡Œé¢ç‰ˆ&lt;/p&gt;
&lt;p&gt;å®‰è£…å®Œæˆåï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥è®¾ç½®ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git config --global user.name &amp;quot;Your Name&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ git config --global user.email &amp;quot;email@example.com&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å› ä¸ºGitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªæœºå™¨éƒ½å¿…é¡»è‡ªæŠ¥å®¶é—¨ï¼šä½ çš„åå­—å’ŒEmailåœ°å€&lt;/p&gt;
&lt;p&gt;æ³¨æ„git configå‘½ä»¤çš„â€“globalå‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åˆ›å»ºç‰ˆæœ¬ä»“åº“&quot;&gt;&lt;a href=&quot;#åˆ›å»ºç‰ˆæœ¬ä»“åº“&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºç‰ˆæœ¬ä»“åº“&quot;&gt;&lt;/a&gt;åˆ›å»ºç‰ˆæœ¬ä»“åº“&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯ç‰ˆæœ¬åº“å‘¢ï¼Ÿç‰ˆæœ¬åº“åˆåä»“åº“ï¼Œè‹±æ–‡årepositoryï¼Œä½ å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è¢«Gitç®¡ç†èµ·æ¥ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€åˆ é™¤ï¼ŒGitéƒ½èƒ½è·Ÿè¸ªï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è¿½è¸ªå†å²ï¼Œæˆ–è€…åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»å¯ä»¥â€œè¿˜åŸâ€ã€‚  &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="git" scheme="http://git66.com/tags/git/"/>
    
      <category term="ç‰ˆæœ¬æ§åˆ¶" scheme="http://git66.com/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>hexo+github pagesæ­å»ºé™æ€åšå®¢</title>
    <link href="http://git66.com/2017/09/01/hexo+github%20pages%20blog/"/>
    <id>http://git66.com/2017/09/01/hexo+github pages blog/</id>
    <published>2017-08-31T23:44:46.000Z</published>
    <updated>2018-03-06T15:15:56.497Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä½¿ç”¨github pagesæœåŠ¡æ­å»ºåšå®¢çš„å¥½å¤„æœ‰ï¼š</p><ol><li>å…¨æ˜¯é™æ€æ–‡ä»¶ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼›</li><li>å…è´¹æ–¹ä¾¿ï¼Œä¸ç”¨èŠ±ä¸€åˆ†é’±å°±å¯ä»¥æ­å»ºä¸€ä¸ªè‡ªç”±çš„ä¸ªäººåšå®¢ï¼Œä¸éœ€è¦æœåŠ¡å™¨ä¸éœ€è¦åå°ï¼›</li><li>å¯ä»¥éšæ„ç»‘å®šè‡ªå·±çš„åŸŸåï¼Œä¸ä»”ç»†çœ‹çš„è¯æ ¹æœ¬çœ‹ä¸å‡ºæ¥ä½ çš„ç½‘ç«™æ˜¯åŸºäºgithubçš„ï¼›</li><li>æ•°æ®ç»å¯¹å®‰å…¨ï¼ŒåŸºäºgithubçš„ç‰ˆæœ¬ç®¡ç†ï¼Œæƒ³æ¢å¤åˆ°å“ªä¸ªå†å²ç‰ˆæœ¬éƒ½è¡Œï¼›</li><li>åšå®¢å†…å®¹å¯ä»¥è½»æ¾æ‰“åŒ…ã€è½¬ç§»ã€å‘å¸ƒåˆ°å…¶å®ƒå¹³å°ï¼›</li></ol><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><ul><li>æœ‰ä¸€ä¸ªgithubè´¦å·</li><li>å®‰è£…äº†node.jsã€npmï¼Œå¹¶äº†è§£ç›¸å…³åŸºç¡€çŸ¥è¯†ï¼›</li><li>å®‰è£…äº†git for windowsï¼ˆæˆ–è€…å…¶å®ƒgitå®¢æˆ·ç«¯ï¼‰</li></ul><h3 id="äº†è§£"><a href="#äº†è§£" class="headerlink" title="äº†è§£"></a>äº†è§£</h3><p>nodeä½œç”¨ï¼šç”¨æ¥ç”Ÿæˆé™æ€é¡µé¢çš„ åˆ°Node.jså®˜ç½‘ä¸‹è½½ç›¸åº”å¹³å°çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€è·¯å®‰è£…å³å¯ã€‚<br>gitä½œç”¨ï¼šæŠŠæœ¬åœ°çš„hexoå†…å®¹æäº¤åˆ°githubä¸Šå»</p><h3 id="åœ¨githubä¸Šæ­å»ºgithub-pages"><a href="#åœ¨githubä¸Šæ­å»ºgithub-pages" class="headerlink" title="åœ¨githubä¸Šæ­å»ºgithub pages"></a>åœ¨githubä¸Šæ­å»ºgithub pages</h3><ul><li>æ–°å»ºä¸€ä¸ªåä¸º<code>ä½ çš„ç”¨æˆ·å.github.io</code>çš„ä»“åº“</li><li>ä¹‹åçš„åšå®¢å°±å­˜æ”¾äºæ­¤  </li></ul><a id="more"></a>  <h3 id="ç»‘å®šåŸŸå"><a href="#ç»‘å®šåŸŸå" class="headerlink" title="ç»‘å®šåŸŸå"></a>ç»‘å®šåŸŸå</h3><p>åŸŸåé…ç½®æœ€å¸¸è§æœ‰2ç§æ–¹å¼ï¼ŒCNAMEå’ŒAè®°å½•ï¼ŒCNAMEå¡«å†™åŸŸåï¼ŒAè®°å½•å¡«å†™IPï¼Œç”±äºä¸å¸¦wwwæ–¹å¼åªèƒ½é‡‡ç”¨Aè®°å½•ï¼Œæ‰€ä»¥å¿…é¡»å…ˆpingä¸€ä¸‹<code>ä½ çš„ç”¨æˆ·å.github.io</code>çš„IPï¼Œç„¶ååˆ°ä½ çš„åŸŸåDNSè®¾ç½®é¡µï¼Œå°†Aè®°å½•æŒ‡å‘ä½ pingå‡ºæ¥çš„IPï¼Œå°†CNAMEæŒ‡å‘<code>ä½ çš„ç”¨æˆ·å.github.io</code>ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ— è®ºæ˜¯å¦æ·»åŠ wwwéƒ½å¯ä»¥è®¿é—®ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="http://oqr3htxnb.bkt.clouddn.com/17-9-2/43028527.jpg" alt=""></p><h3 id="é…ç½®æœ¬æœºçš„ssh-key-git"><a href="#é…ç½®æœ¬æœºçš„ssh-key-git" class="headerlink" title="é…ç½®æœ¬æœºçš„ssh key(git)"></a>é…ç½®æœ¬æœºçš„ssh key(git)</h3><h3 id="ä½¿ç”¨hexoå†™åšå®¢"><a href="#ä½¿ç”¨hexoå†™åšå®¢" class="headerlink" title="ä½¿ç”¨hexoå†™åšå®¢"></a>ä½¿ç”¨hexoå†™åšå®¢</h3><p>Hexoæ˜¯ä¸€ä¸ªç®€å•ã€å¿«é€Ÿã€å¼ºå¤§çš„åŸºäº Github Pages çš„åšå®¢å‘å¸ƒå·¥å…·ï¼Œæ”¯æŒMarkdownæ ¼å¼ï¼Œæœ‰ä¼—å¤šä¼˜ç§€æ’ä»¶å’Œä¸»é¢˜ã€‚</p><p>å®˜ç½‘ï¼š <a href="http://hexo.io" target="_blank" rel="noopener">http://hexo.io</a><br>github: <a href="https://github.com/hexojs/hexo" target="_blank" rel="noopener">https://github.com/hexojs/hexo</a></p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>åœ¨ç”µè„‘çš„æŸä¸ªåœ°æ–¹æ–°å»ºä¸€ä¸ªåä¸ºhexoçš„æ–‡ä»¶å¤¹ï¼ˆåå­—å¯ä»¥éšä¾¿å–ï¼‰ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯<code>F:\hexo</code>ï¼Œç”±äºè¿™ä¸ªæ–‡ä»¶å¤¹å°†æ¥å°±ä½œä¸ºä½ å­˜æ”¾ä»£ç çš„åœ°æ–¹ï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦éšä¾¿æ”¾ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /f/Workspaces/hexo/</span><br><span class="line">$ hexo init</span><br></pre></td></tr></table></figure><p>hexoä¼šè‡ªåŠ¨ä¸‹è½½ä¸€äº›æ–‡ä»¶åˆ°è¿™ä¸ªç›®å½•ï¼ŒåŒ…æ‹¬node_modulesï¼Œç›®å½•ç»“æ„å¦‚ä¸‹å›¾ï¼š</p><p><img src="http://oqr3htxnb.bkt.clouddn.com/17-9-2/40428070.jpg" alt=""></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g || hexo generate <span class="comment"># ç”Ÿæˆé™æ€é¡µé¢</span></span><br><span class="line">$ hexo s || hexo server  <span class="comment"># å¯åŠ¨æœåŠ¡æœ¬åœ°é¢„è§ˆ</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ä¹‹åï¼Œhexoå°±ä¼šåœ¨publicæ–‡ä»¶å¤¹ç”Ÿæˆç›¸å…³htmlæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å°†æ¥éƒ½æ˜¯è¦æäº¤åˆ°githubå»çš„ï¼š</p><p><img src="http://oqr3htxnb.bkt.clouddn.com/17-9-2/94846888.jpg" alt=""></p><p><code>hexo s</code>æ˜¯å¼€å¯æœ¬åœ°é¢„è§ˆæœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a></p><h3 id="å…³è”github-pages"><a href="#å…³è”github-pages" class="headerlink" title="å…³è”github pages"></a>å…³è”github pages</h3><p>æ‰“å¼€åšå®¢æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶,åœ¨æœ€ä¸‹æ–¹æ‰¾åˆ°å¹¶ç…§å¦‚ä¸‹ä¿®æ”¹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: https://github.com/StruggleYang/StruggleYang.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤ï¼Œè‡ªåŠ¨ä½¿ç”¨gitéƒ¨ç½²ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>éƒ¨ç½²ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨è¾“å…¥<code>user_name.github.io</code>,æ¯”å¦‚ï¼š</p><p><a href="http://struggleyang.github.io" target="_blank" rel="noopener">http://struggleyang.github.io</a></p><p>user_nameæ˜¯å¯¹åº”çš„githubç”¨æˆ·å</p><h3 id="ä»¥åçš„éƒ¨ç½²ï¼ŒæŒ‰ç…§ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š"><a href="#ä»¥åçš„éƒ¨ç½²ï¼ŒæŒ‰ç…§ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š" class="headerlink" title="ä»¥åçš„éƒ¨ç½²ï¼ŒæŒ‰ç…§ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š"></a>ä»¥åçš„éƒ¨ç½²ï¼ŒæŒ‰ç…§ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  #æ¸…ç†publicä¸‹çš„æ–‡ä»¶,å»ºè®®ä½¿ç”¨ï¼Œæœ‰æ—¶å€™ä¸æ¸…ç†é¡µé¢ä¸ç”Ÿæ•ˆ</span><br><span class="line">hexo generate #ç”Ÿæˆé™æ€æ–‡ä»¶</span><br><span class="line">hexo deploy #éƒ¨ç½²å·²ç»ç”Ÿæˆçš„é™æ€æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="è¯´ä¸ªé—®é¢˜"><a href="#è¯´ä¸ªé—®é¢˜" class="headerlink" title="è¯´ä¸ªé—®é¢˜"></a>è¯´ä¸ªé—®é¢˜</h3><ul><li>ä¸ºäº†ä¿è¯è®¿é—®ï¼Œåœ¨ç»‘å®šåŸŸåæ—¶å¯¹åº”çš„CNAMEç±»å‹è®°å½•éœ€è¦å•ç‹¬å»ºç«‹æ–‡ä»¶å­˜æ”¾åœ¨ç½‘ç«™æ ¹ç›®å½•ï¼ŒCNAMEæ”¾åœ¨sourceé‡Œé¢ã€‚</li><li>åœ¨ä¹‹åçš„æ“ä½œä¸­æ¯æ¬¡æ›´æ–°æ–‡ç« éƒ½éœ€è¦éƒ¨ç½²ï¼Œæ‰€ä»¥æœ‰å¯èƒ½å°†CNAMEæ–‡ä»¶è¢«æ–°ç‰ˆæœ¬æ¸…é™¤</li></ul><h3 id="ä¸€äº›å¸¸ç”¨hexoå‘½ä»¤ï¼š"><a href="#ä¸€äº›å¸¸ç”¨hexoå‘½ä»¤ï¼š" class="headerlink" title="ä¸€äº›å¸¸ç”¨hexoå‘½ä»¤ï¼š"></a>ä¸€äº›å¸¸ç”¨hexoå‘½ä»¤ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;postName&quot; #æ–°å»ºæ–‡ç« </span><br><span class="line">hexo new page &quot;pageName&quot; #æ–°å»ºé¡µé¢</span><br><span class="line">hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•</span><br><span class="line">hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ&apos;ctrl + c&apos;å…³é—­serverï¼‰</span><br><span class="line">hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub</span><br><span class="line">hexo help  #æŸ¥çœ‹å¸®åŠ©</span><br><span class="line">hexo version  #æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬</span><br></pre></td></tr></table></figure><h3 id="ä¸€äº›å¯èƒ½ç”¨çš„è·¯å¾„"><a href="#ä¸€äº›å¯èƒ½ç”¨çš„è·¯å¾„" class="headerlink" title="ä¸€äº›å¯èƒ½ç”¨çš„è·¯å¾„:"></a>ä¸€äº›å¯èƒ½ç”¨çš„è·¯å¾„:</h3><p>æ–‡ç« åœ¨ source/_postsï¼Œç¼–è¾‘å™¨å¯ä»¥ç”¨ Sublimeï¼Œvscodeï¼Œatomï¼Œæœ‰é“äº‘ç¬”è®°ï¼Œæ”¯æŒ markdown è¯­æ³•ã€‚å¦‚æœæƒ³ä¿®æ”¹å¤´åƒå¯ä»¥ç›´æ¥åœ¨ä¸»é¢˜çš„ _config.yml æ–‡ä»¶é‡Œé¢ä¿®æ”¹ï¼Œå‹æƒ…é“¾æ¥ï¼Œä¹‹ç±»çš„éƒ½åœ¨è¿™é‡Œï¼Œä¿®æ”¹åå­—åœ¨ public/index.html é‡Œä¿®æ”¹</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨github pagesæœåŠ¡æ­å»ºåšå®¢çš„å¥½å¤„æœ‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…¨æ˜¯é™æ€æ–‡ä»¶ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼›&lt;/li&gt;
&lt;li&gt;å…è´¹æ–¹ä¾¿ï¼Œä¸ç”¨èŠ±ä¸€åˆ†é’±å°±å¯ä»¥æ­å»ºä¸€ä¸ªè‡ªç”±çš„ä¸ªäººåšå®¢ï¼Œä¸éœ€è¦æœåŠ¡å™¨ä¸éœ€è¦åå°ï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥éšæ„ç»‘å®šè‡ªå·±çš„åŸŸåï¼Œä¸ä»”ç»†çœ‹çš„è¯æ ¹æœ¬çœ‹ä¸å‡ºæ¥ä½ çš„ç½‘ç«™æ˜¯åŸºäºgithubçš„ï¼›&lt;/li&gt;
&lt;li&gt;æ•°æ®ç»å¯¹å®‰å…¨ï¼ŒåŸºäºgithubçš„ç‰ˆæœ¬ç®¡ç†ï¼Œæƒ³æ¢å¤åˆ°å“ªä¸ªå†å²ç‰ˆæœ¬éƒ½è¡Œï¼›&lt;/li&gt;
&lt;li&gt;åšå®¢å†…å®¹å¯ä»¥è½»æ¾æ‰“åŒ…ã€è½¬ç§»ã€å‘å¸ƒåˆ°å…¶å®ƒå¹³å°ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;a href=&quot;#å‡†å¤‡å·¥ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;&lt;/a&gt;å‡†å¤‡å·¥ä½œ&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æœ‰ä¸€ä¸ªgithubè´¦å·&lt;/li&gt;
&lt;li&gt;å®‰è£…äº†node.jsã€npmï¼Œå¹¶äº†è§£ç›¸å…³åŸºç¡€çŸ¥è¯†ï¼›&lt;/li&gt;
&lt;li&gt;å®‰è£…äº†git for windowsï¼ˆæˆ–è€…å…¶å®ƒgitå®¢æˆ·ç«¯ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;äº†è§£&quot;&gt;&lt;a href=&quot;#äº†è§£&quot; class=&quot;headerlink&quot; title=&quot;äº†è§£&quot;&gt;&lt;/a&gt;äº†è§£&lt;/h3&gt;&lt;p&gt;nodeä½œç”¨ï¼šç”¨æ¥ç”Ÿæˆé™æ€é¡µé¢çš„ åˆ°Node.jså®˜ç½‘ä¸‹è½½ç›¸åº”å¹³å°çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¸€è·¯å®‰è£…å³å¯ã€‚&lt;br&gt;gitä½œç”¨ï¼šæŠŠæœ¬åœ°çš„hexoå†…å®¹æäº¤åˆ°githubä¸Šå»&lt;/p&gt;
&lt;h3 id=&quot;åœ¨githubä¸Šæ­å»ºgithub-pages&quot;&gt;&lt;a href=&quot;#åœ¨githubä¸Šæ­å»ºgithub-pages&quot; class=&quot;headerlink&quot; title=&quot;åœ¨githubä¸Šæ­å»ºgithub pages&quot;&gt;&lt;/a&gt;åœ¨githubä¸Šæ­å»ºgithub pages&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æ–°å»ºä¸€ä¸ªåä¸º&lt;code&gt;ä½ çš„ç”¨æˆ·å.github.io&lt;/code&gt;çš„ä»“åº“&lt;/li&gt;
&lt;li&gt;ä¹‹åçš„åšå®¢å°±å­˜æ”¾äºæ­¤  &lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://git66.com/tags/hexo/"/>
    
      <category term="github-pages" scheme="http://git66.com/tags/github-pages/"/>
    
      <category term="blog" scheme="http://git66.com/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>å®‰è£…Linuxåæˆ‘éƒ½åšäº†å“ªäº›äº‹ï¼Ÿ</title>
    <link href="http://git66.com/2017/07/10/installed%20Linux%20more/"/>
    <id>http://git66.com/2017/07/10/installed Linux more/</id>
    <published>2017-07-10T15:18:46.000Z</published>
    <updated>2018-03-06T15:15:56.498Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´çš„Linuxåï¼Œå‰å‰ååå®‰è£…ä¹Ÿæœ‰å‡ åæ¬¡ï¼Œä¹ŸçŠ¯è¿‡ä¸€äº›è‡´å‘½çš„é”™è¯¯ï¼Œä¸ºäº†ä¸‹æ¬¡ä¸å†åˆ°å¤„ç¿»æ–‡æ¡£ï¼Œç°æ€»ç»“ä¸€äº›å®‰è£…åå¿…å¤‡çš„ä¸œè¥¿ä»¥åŠå¸¸ç”¨è½¯ä»¶åŠæ“ä½œï¼Œä»¥ä¾¿æ—¥åæŸ¥é˜…ï¼<br>å¤‡æ³¨ä¸€ä¸‹ï¼š  </p></blockquote><p><strong>æ³¨æ„:è¯·å…ˆé˜…è¯»ä¸€éå…¨æ–‡åå†æ“ä½œï¼Œé€‚ç”¨å‘è¡Œç‰ˆä¸ºUbuntu16.04åŠåŸºäºUbuntu16.04æ„å»ºçš„å‘è¡Œç‰ˆï¼Œå…¶ä»–å‘è¡Œç‰ˆéƒ¨åˆ†ç›¸åŒæˆ–ç±»ä¼¼ï¼Œä¸ä¿è¯æ‰€æœ‰å‘è¡Œç‰ˆçš„é€‚ç”¨ï¼Œå…¶ä½™å‘è¡Œç‰ˆè¯·è‡ªè¡ŒGoogleå¯¹åº”æ•™ç¨‹ï¼Œæœ›æ‚‰çŸ¥</strong>  </p><p><strong>å‘è¡Œç‰ˆï¼šelementary OS 0.4.1 Lokiï¼ˆåŸºäº â€œUbuntu 16.04.2 LTSâ€ æ„å»ºï¼‰</strong></p><p><img src="http://oqr3htxnb.bkt.clouddn.com/17-5-30/29786706.jpg" alt=""></p><p><strong>è­¦å‘Š:æ…ç”¨rmå‘½ä»¤ï¼Œç‰¹åˆ«æ˜¯rootä¸‹çš„rmï¼Œæˆ–è€…å¸¦æœ‰-rfæŒ‡ä»¤çš„rm</strong></p><a id="more"></a><h2 id="å…³äºå®‰è£…-Windows-10-elementary-OS-ï¼š"><a href="#å…³äºå®‰è£…-Windows-10-elementary-OS-ï¼š" class="headerlink" title="å…³äºå®‰è£…(Windows 10 + elementary OS)ï¼š"></a>å…³äºå®‰è£…(Windows 10 + elementary OS)ï¼š</h2><ul><li>å¯¹äºå®‰è£…è€Œå’Œubuntuç±»ä¼¼ï¼Œå¤§è‡´æœ‰å¦‚ä¸‹å‡ ä¸ªè¿‡ç¨‹(åªæœ‰å¤§ä½“è¿‡ç¨‹ï¼Œå…·ä½“è¯·è‡ªè¡Œç™¾åº¦)<ul><li>åœ¨winä¸‹ç”¨ç£ç›˜å·¥å…·å‹ç¼©å‡ºå¤§è‡´æœ€å°50Gçš„ç›˜(ä¸æ ¼å¼åŒ–)</li><li>åˆ»å½•å‘è¡Œç‰ˆé•œåƒåˆ°uç›˜(æ¨èâ€˜è½¯ç¢Ÿé€šâ€™)</li><li>ä¿®æ”¹biosçš„å¯åŠ¨(æ®ç”µè„‘ä¸åŒ)</li><li>uç›˜å¯åŠ¨è¿›å…¥å®‰è£…ï¼ŒæŒ‰ç…§æµç¨‹èµ°å°±æ˜¯äº†</li><li>é‡è¦çš„äº‹æ˜¯å¯¹äºåˆ†åŒºçš„é€‰é¡¹ï¼Œæˆ‘å¤§è‡´æ˜¯<ul><li>/boot- -é€»è¾‘ â€“400M</li><li>/ - -é€»è¾‘ â€“20G(å› ä¸º/usræ²¡æœ‰å•ç‹¬æŒ‚è½½ï¼Œæ‰€ä»¥ç¨å¾®å¤§ç‚¹)</li><li>swap â€“é€»è¾‘ â€“2G</li><li>/home â€“é€»è¾‘ â€“å‰©ä½™å…¨éƒ¨</li></ul></li><li>å®‰è£…å®Œä¹‹åé‡å¯ï¼Œä¼šæ²¡æœ‰å¯åŠ¨é€‰é¡¹ï¼Œè¿›å…¥winç”¨esayBCDè¿›è¡Œå¼•å¯¼çš„ä¿®å¤æ·»åŠ </li></ul></li><li>ä»¥ä¸Šäº‹å¤§è‡´è¿‡ç¨‹ï¼Œå¹¶éæ•™ç¨‹ï¼Œä»…å‚è€ƒ  </li></ul><h2 id="ç³»ç»Ÿæ›´æ–°"><a href="#ç³»ç»Ÿæ›´æ–°" class="headerlink" title="ç³»ç»Ÿæ›´æ–°"></a>ç³»ç»Ÿæ›´æ–°</h2><ul><li>è¿›å…¥ç³»ç»Ÿåšçš„ç¬¬ä¸€ä»¶äº‹æƒ…äº‹è”ç½‘ï¼Œæ­¤å‘è¡Œç‰ˆæœ‰å¾ˆå¤šé©±åŠ¨æ”¯æŒï¼Œå¹¶ä¸”åŸºæœ¬éƒ½æ˜¯å¯ç”¨çš„ï¼Œä¸ç®¡äº‹wifiè¿˜æ˜¯ä»¥å¤ªï¼Œæœ‰äº†ç½‘ç»œä¹‹åï¼Œä½ èƒ½åšçš„äº‹æƒ…å°±å¤šäº†</li><li>è”ç½‘åçš„ç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œå®‰è£…ç³»ç»Ÿæ›´æ–°ï¼šï¼ˆå› ä¸ºè€ƒè™‘åˆ°é€Ÿåº¦å°è¯•åœ¨è¿™é‡Œæ‰¾äº†å›½å†…çš„æ•°æ®æºè¿›è¡Œæ›¿æ¢ï¼Œä½†æ˜¯æ¥æ›´æ–°æ•°æ®æºåå¾ˆå¤šä¸œè¥¿æ‰¾ä¸åˆ°æˆ–è€…ä¾èµ–æœ‰é—®é¢˜äºæ˜¯æ¢äº†å›æ¥,æ‰€ä»¥å»ºè®®ä½¿ç”¨é»˜è®¤æºï¼‰  </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># sudo apt-get update</span><br><span class="line"># sudo apt-get upgrade</span><br><span class="line"># sudo apt-get dist-upgrade</span><br></pre></td></tr></table></figure><p> ä¸Šé¢çš„ä¸œè¥¿æ‰§è¡Œèµ·æ¥é€Ÿåº¦å¯èƒ½ä¼šå¾ˆæ…¢ï¼Œä½†æ˜¯è¿™æ ·çš„è¿‡ç¨‹ä¸ä¼šç»å¸¸å‡ºç°<br> åœ¨å•†åº—å¯¹ä¸€äº›è½¯ä»¶è¿›è¡Œæ›´æ–°ï¼Œå¹¶ä¸”å®‰è£…æ˜¾å¡é©±åŠ¨ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å¯è§†åŒ–çš„ç®€å•æ“ä½œï¼Œè¿™é‡Œä¸å†ç´¯è¿°</p><h2 id="ä¸€äº›å¸¸è§é—®é¢˜"><a href="#ä¸€äº›å¸¸è§é—®é¢˜" class="headerlink" title="ä¸€äº›å¸¸è§é—®é¢˜"></a>ä¸€äº›å¸¸è§é—®é¢˜</h2><p> å®‰è£…ç³»ç»Ÿæ›´æ–°åä½ å¯èƒ½æƒ³å®‰è£…ä¸€äº›è½¯ä»¶äº†ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ä½ æœ‰å¿…è¦è¿›è¡Œå¦‚ä¸‹çš„ä¸€äº›æ“ä½œï¼š</p><ul><li>è¿™ä¸ªæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„é—®é¢˜ï¼Œwinä¸linuxçš„æ—¶é—´åŒæ­¥é—®é¢˜ï¼Œå¤§è‡´å°±æ˜¯æ—¶é—´ç›¸å·®7å°æ—¶ï¼Œç°å°†è¿™äº›æ‚ç¢çš„é—®é¢˜è§£å†³ï¼Œå†å¼€å§‹æ„å»ºç³»ç»Ÿçš„åº”ç”¨</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># timedatectl set-local-rtc 1 --adjust-system-clock</span><br></pre></td></tr></table></figure><p> æœ‰å¯èƒ½åœ¨ç¬¬ä¸€æ¬¡å®‰è£…åæ‰§è¡Œæ­¤æ“ä½œæ— æ•ˆï¼Œä½ å¯ä»¥å¤šè¯•å‡ æ¬¡å¹¶é‡å¯</p><h2 id="å®‰è£…vim"><a href="#å®‰è£…vim" class="headerlink" title="å®‰è£…vim"></a>å®‰è£…vim</h2><p>ä¸ºä»€ä¹ˆè¦å®‰è£…vimï¼Œè™½ç„¶ç³»ç»Ÿå·²ç»æœ‰viï¼Œä½†æ˜¯æ˜“ç”¨æ€§ä¸æ˜¯å¾ˆå¼ºï¼Œvimæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œè€Œä¸”å¯¹viå®Œå…¨å…¼å®¹ï¼Œåé¢çš„æ“ä½œé‡Œéœ€è¦æœ‰å®ƒï¼Œæ‰€ä»¥å…ˆå°†ä»–å®‰è£…äº†ï¼Œæ–¹ä¾¿åé¢æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo apt-get vim</span><br></pre></td></tr></table></figure></p><p>vimçš„ä¸‰ç§æ¨¡å¼ï¼š</p><ul><li>ä¸€èˆ¬æ¨¡å¼ï¼ˆé»˜è®¤è¿›å…¥å°±æ˜¯ä¸€èˆ¬æ¨¡å¼,ä¸€èˆ¬æ¨¡å¼æ—¶æ–‡ä»¶åªè¯»ï¼‰</li><li>ç¼–è¾‘æ¨¡å¼ï¼ˆé”®ç›˜â€˜iâ€™é”®å¯è¿›å…¥ï¼Œå¯ä»¥ç¼–è¾‘æ–‡ä»¶ï¼Œè¿˜æœ‰å…¶ä»–é”®ã€o, O, a, A, r, Rã€‘ï¼ŒESCå¯é€€å‡ºï¼‰</li><li>å‘½ä»¤æ¨¡å¼ï¼ˆã€ : / ? ã€‘å¯è¿›å…¥ï¼Œå¸¸è§æŒ‡ä»¤æœ‰q[é€€å‡º]q![å¼ºåˆ¶é€€å‡º]wq[ä¿å­˜å¹¶é€€å‡º]ï¼Œå…¶ä»–çš„è‡ªè¡Œç™¾åº¦æˆ–è€…Googleï¼‰</li></ul><h2 id="å¼€æœºè‡ªåŠ¨æŒ‚è½½ntfsç£ç›˜"><a href="#å¼€æœºè‡ªåŠ¨æŒ‚è½½ntfsç£ç›˜" class="headerlink" title="å¼€æœºè‡ªåŠ¨æŒ‚è½½ntfsç£ç›˜"></a>å¼€æœºè‡ªåŠ¨æŒ‚è½½ntfsç£ç›˜</h2><p>ä¸ºä»€ä¹ˆè¦å¼€æœºæŒ‚è½½ç£ç›˜ï¼Ÿ<br>å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼Œåœ¨æŸåº”ç”¨ä¸å¾—ä¸éœ€è¦å¼•ç”¨windowsçš„ç£ç›˜æ–‡ä»¶æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šæç¤ºæ‰¾ä¸åˆ°è·¯å¾„ï¼Œé‚£ä½ ä¸å¾—ä¸åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­å°†å…¶æŒ‚è½½ã€‚ä¸ºäº†ä¸€åŠ³æ°¸é€¸ï¼Œå¹¶å‡å°‘ä¸å¿…è¦çš„æ“ä½œã€‚æ‰€ä»¥å»ºè®®æ­¤æ­¥æ‰§è¡Œï¼Œè€Œè¿™ä¸ªæŒ‚è½½è·¯å¾„çš„æ–¹æ³•ä½¿ç”¨äºéƒ¨åˆ†å‘è¡Œç‰ˆä½†åˆæœ‰æ‰€ä¸åŒï¼Œå¦‚Centos7ç³»åˆ—çš„æŒ‚è½½å¯èƒ½éœ€è¦å®‰è£…NTFS3ç­‰ç­‰æ“ä½œï¼Œå…·ä½“å†…å®¹è¿˜è¯·Googleã€‚</p><p>æŒ‚è½½ç£ç›˜çš„åŸºæœ¬æ€è·¯äº‹æ‰¾åˆ°winä¸‹å¯¹åº”ç£ç›˜çš„è®¾å¤‡å·,å°†å…¶<br>æŸ¥çœ‹ç£ç›˜å·ï¼Œæ‰¾åˆ°typeä¸ºntfsç£ç›˜å¯¹åº”çš„è®¾å¤‡å·ï¼Œå†æ ¹æ®è®¾å¤‡çš„å…·ä½“ç±»å‹å¤§å°å’ŒLABELæ¥æ‰¾åˆ°å¹³å¸¸å¯¹åº”çš„æŒ‚è½½è·¯å¾„ï¼Œå†ä¿®æ”¹è®¾ç½®ä½¿å…¶é•¿æœŸæŒ‚è½½ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo fdisk -l</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢æ˜¯æˆ‘çš„ç£ç›˜ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Disk /dev/sda: 465.8 GiB, 500107862016 bytes, 976773168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line">Disklabel type: dos</span><br><span class="line">Disk identifier: 0x98eae607</span><br><span class="line">è®¾å¤‡       å¯åŠ¨     Start    æœ«å°¾    æ‰‡åŒº   Size Id ç±»å‹</span><br><span class="line">/dev/sda1  *           63 125837144 125837082    60G  7 HPFS/NTFS/exFAT</span><br><span class="line">/dev/sda2       125837310 976771071 850933762 405.8G  f W95 æ‰©å±• (LBA)</span><br><span class="line">/dev/sda5       125837312 335552511 209715200   100G  7 HPFS/NTFS/exFAT</span><br><span class="line">/dev/sda6       335552576 671096768 335544193   160G  7 HPFS/NTFS/exFAT</span><br><span class="line">/dev/sda7       671100928 850939903 179838976  85.8G  7 HPFS/NTFS/exFAT</span><br><span class="line">/dev/sda8       850941952 890939391  39997440  19.1G 83 Linux</span><br><span class="line">/dev/sda9       890941440 891719679    778240   380M 83 Linux</span><br><span class="line">/dev/sda10      891721728 893720575   1998848   976M 82 Linux äº¤æ¢ / Solaris</span><br><span class="line">/dev/sda11      893722624 976771071  83048448  39.6G 83 Linux</span><br></pre></td></tr></table></figure></p><p>å¦‚ç°sda1,5,6,7æ ¹æ®å¤§å°å¯ä»¥åˆ¤æ–­å…¶åˆ†åˆ«å¯¹åº”çš„winä¸‹C,D,E,Fç›˜ï¼Œå¹¶ä¸”æœ€åå¯çœ‹å‡ºç±»å‹äº‹ntfsæ ¼å¼ç£ç›˜<br>ç°æŸ¥çœ‹ç£ç›˜çš„idåŠæŒ‚è½½å<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo blkid</span><br></pre></td></tr></table></figure></p><p>ç»“æœ  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda1: UUID=&quot;8E5691D85691C17F&quot; TYPE=&quot;ntfs&quot; PARTUUID=&quot;98eae607-01&quot;</span><br><span class="line">/dev/sda5: LABEL=&quot;Apps&quot; UUID=&quot;20869BF2869BC6A6&quot; TYPE=&quot;ntfs&quot; PARTUUID=&quot;98eae607-05&quot;</span><br><span class="line">/dev/sda6: LABEL=&quot;Docs&quot; UUID=&quot;A040A29940A275A6&quot; TYPE=&quot;ntfs&quot; PARTUUID=&quot;98eae607-06&quot;</span><br><span class="line">/dev/sda7: LABEL=&quot;Project&quot; UUID=&quot;0A38BD1838BD042B&quot; TYPE=&quot;ntfs&quot; PARTUUID=&quot;98eae607-07&quot;</span><br><span class="line">/dev/sda8: UUID=&quot;2a816ddd-f925-442c-8b4c-cc7fd76545b9&quot; TYPE=&quot;ext4&quot; PARTUUID=&quot;98eae607-08&quot;</span><br><span class="line">/dev/sda9: UUID=&quot;74e2bc02-59fc-4517-ae95-18ec46541d9d&quot; TYPE=&quot;ext4&quot; PTTYPE=&quot;dos&quot; PARTUUID=&quot;98eae607-09&quot;</span><br><span class="line">/dev/sda10: UUID=&quot;eb8aded8-9282-426e-9b86-7333bde0d0fe&quot; TYPE=&quot;swap&quot; PARTUUID=&quot;98eae607-0a&quot;</span><br><span class="line">/dev/sda11: UUID=&quot;421078a4-af25-4fa4-a474-b250e0943c0e&quot; TYPE=&quot;ext4&quot; PARTUUID=&quot;98eae607-0b&quot;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo vim /etc/fstab</span><br></pre></td></tr></table></figure></p><p>iè¿›å…¥æ’å…¥æ¨¡å¼åœ¨åé¢æ·»åŠ ï¼š<br>æ³¨ï¼šsyæ˜¯æˆ‘çš„ç”¨æˆ·åï¼Œåœ¨mediaæ–‡ä»¶å¤¹ä¸‹ä½ ä¹Ÿå¯ä»¥çœ‹åˆ°ä½ å¯¹åº”çš„æ–‡ä»¶å¤¹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># disk for Windows10</span><br><span class="line"># c:  for windows10</span><br><span class="line">#/dev/sda1       /media/sy/System                ntfs    defaults        0       0</span><br><span class="line"># D:  for windows10</span><br><span class="line">/dev/sda5       /media/sy/Apps                  ntfs    defaults        0       0</span><br><span class="line"># E:  for windows10</span><br><span class="line">/dev/sda6       /media/sy/Docs                     ntfs    defaults        0       0</span><br><span class="line"># F:  for windows10</span><br><span class="line">/dev/sda7       /media/sy/Project                  ntfs    defaults        0       0</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢æœ‰ä¸‰ä¸ªç£ç›˜æŒ‚è½½ï¼ŒCç›˜æˆ‘ä¸å¸Œæœ›ï¼ˆæ€•è¯¯åˆ äº†windowsä¸‹çš„é‡è¦æ–‡ä»¶ï¼‰è‡ªåŠ¨æŒ‚è½½æ‰€ä»¥ç»™æ³¨é‡Šäº†ã€‚è€Œæ¯ä¸ªç£ç›˜å¯¹åº”ç€å…­ä¸ªå‚æ•°å…¶æ„æ€åˆ†åˆ«æ˜¯ï¼šï¼ˆä»å·¦åˆ°å³ï¼‰</p><ul><li><code>&lt;file system&gt;</code> ï¼šåˆ†åŒºå®šä½ï¼Œå¯ä»¥ç»™ç£ç›˜å·ï¼ŒUUIDæˆ–LABELï¼Œä¾‹å¦‚ï¼š/dev/sda2ï¼ŒUUID=6E9ADAC29ADA85CDæˆ–LABEL=Docs</li><li><code>&lt;mount point&gt;</code> : å…·ä½“æŒ‚è½½ç‚¹çš„ä½ç½®ï¼Œä¾‹å¦‚ï¼š/media/userName/C</li><li><code>&lt;type&gt;</code> : æŒ‚è½½ç£ç›˜ç±»å‹ï¼Œlinuxåˆ†åŒºä¸€èˆ¬ä¸ºext4ï¼Œwindowsåˆ†åŒºä¸€èˆ¬ä¸ºntfs</li><li><code>&lt;options&gt;</code>: æŒ‚è½½å‚æ•°ï¼Œä¸€èˆ¬ä¸ºdefaults</li><li><code>&lt;dump&gt;</code> : ç£ç›˜å¤‡ä»½ï¼Œé»˜è®¤ä¸º0ï¼Œä¸å¤‡ä»½</li><li><code>&lt;pass&gt;</code>: ç£ç›˜æ£€æŸ¥ï¼Œé»˜è®¤ä¸º0ï¼Œä¸æ£€æŸ¥</li></ul><blockquote><p>åœ¨è¿™é‡Œæˆ‘å‘ç°ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼ŒNTFSå¯¹åº”çš„LABELåœ¨windowsä¸‹å¯¹åº”ç£ç›˜çš„åç§°ï¼Œæ‰€ä»¥å»ºè®®åœ¨windowsä¸‹ä½¿ç”¨è‹±æ–‡å‘½åç£ç›˜åç§°</p></blockquote><p>ä»¥ä¸Šæ“ä½œå®Œæˆåä¿å­˜å¹¶é€€å‡ºvimï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹æ£€æŸ¥å¹¶æŒ‚è½½æ–°æ·»é¡¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo mount -a</span><br></pre></td></tr></table></figure></p><p>mount -aä¼š/etc/fstabä¸­çš„é¡¹å…¨éƒ¨æŒ‚è½½ï¼Œå¦‚æœæœ‰é”™ï¼Œåˆ™ä¼šæç¤ºé”™è¯¯ï¼Œç„¶åæ ¹æ®é”™è¯¯æ‰¾å‡ºåŸå› ä¿®æ”¹ã€‚</p><blockquote><p>å¦‚æœè¯´æŸä¸ªç£ç›˜æ²¡æœ‰æ‰¾åˆ°ï¼Œå…ˆæŸ¥çœ‹æ˜¯å¦åœ¨æ–‡ä»¶ç®¡ç†å™¨å·²ç»å°†å…¶æŒ‚è½½ï¼Œå› ä¸ºåœ¨æ£€æŸ¥æ—¶ä¼šå› ä¸ºæ²¡æœ‰æŒ‚è½½è€Œæ‰¾ä¸åˆ°ï¼Œå°†æ‰€æœ‰ç£ç›˜æŒ‚è½½åå†æ¬¡æ‰§è¡Œå³å¯ã€‚</p></blockquote><p><strong>æ³¨æ„ï¼šåƒä¸‡ä¸è¦æŒ‚è½½åˆ°å½“å‰ç”¨æˆ·çš„æ ¹ç›®å½•ï¼Œå› ä¸ºæŒ‚è½½çš„åˆ†åŒºä¼šè¦†ç›–å½“å‰åˆ†åŒºå†…å®¹,é‚£æœ‰å¯èƒ½å°†æ˜¯ä¸€ä¸ªè‡´å‘½çš„æ“ä½œ</strong></p><h2 id="å®‰è£…Gdebiä»¥æ–¹ä¾¿å®‰è£…debè½¯ä»¶åŒ…"><a href="#å®‰è£…Gdebiä»¥æ–¹ä¾¿å®‰è£…debè½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…Gdebiä»¥æ–¹ä¾¿å®‰è£…debè½¯ä»¶åŒ…"></a>å®‰è£…Gdebiä»¥æ–¹ä¾¿å®‰è£…debè½¯ä»¶åŒ…</h2><p>ä¸¤ä¸­æ–¹å¼å®‰è£…ï¼š</p><ul><li>åœ¨åº”ç”¨å•†åº—æ‰¾åˆ°å¹¶å®‰è£…</li><li>é€šè¿‡<code>sudo apt-get install gdebi</code>å®‰è£…</li></ul><h2 id="å®‰è£…æœç‹—è¾“å…¥æ³•"><a href="#å®‰è£…æœç‹—è¾“å…¥æ³•" class="headerlink" title="å®‰è£…æœç‹—è¾“å…¥æ³•"></a>å®‰è£…æœç‹—è¾“å…¥æ³•</h2><p>ç°åœ¨çš„ä½ å¯èƒ½éœ€ä¸€ä¸ªä¸­æ–‡è¾“å…¥æ³•å¯¹ä¸€äº›é—®é¢˜è¿›è¡Œæè¿°å’Œè®°å½•ï¼Œé‚£ä¹ˆå®ƒæ¥äº†<br>å®‰è£…æœç‹—è¾“å…¥æ³•æ˜¯ä¸€ä¸ªç®€å•çš„è¿‡ç¨‹ï¼Œä½†æ˜¯ä¼šéœ€è¦å®‰è£…ä¸€äº›ä¾èµ–æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>æ·»åŠ fcitxçš„é”®ç›˜è¾“å…¥æ³•ç³»ç»Ÿï¼Œå› ä¸ºsogouæ˜¯åŸºäºfcitxçš„ï¼Œè€Œç³»ç»Ÿé»˜è®¤çš„æ˜¯iBusï¼›</li><li>å®‰è£…sogouè¾“å…¥æ³•ï¼›</li><li>è®¾ç½®ç³»ç»Ÿå‚æ•°åŠä¸€äº›æ³¨æ„ç‚¹ã€‚</li></ul><p>å…ˆæ·»åŠ ä»¥ä¸‹æº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo add-apt-repository ppa:fcitx-team/nightly</span><br></pre></td></tr></table></figure></p><blockquote><p>å¦‚æœæç¤ºæºæ‰¾ä¸åˆ°ä¾æ­¤æ‰§è¡Œå®‰è£…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># sudo apt-get install python-software-properties</span><br><span class="line"># sudo apt-get install software-properties-common</span><br><span class="line"># sudo apt-get update</span><br></pre></td></tr></table></figure></p></blockquote><p>æ·»åŠ æºä¹‹åéœ€è¦æ›´æ–°ä¸€ä¸‹ç³»ç»Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>å¼€å§‹å®‰è£…fcitx<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo apt-get install fcitx</span><br></pre></td></tr></table></figure></p><p>ä¸‹è½½æœç‹—è¾“å…¥æ³•å®‰è£…åŒ…ï¼ˆå®˜ç½‘åœ°å€ï¼‰ï¼š</p><p><a href="http://pinyin.sogou.com/linux/?r=pinyin" target="_blank" rel="noopener">http://pinyin.sogou.com/linux/?r=pinyin</a><br>ä¸‹è½½å®Œæ¯•åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­ç”¨Gdebiæ‰“å¼€å¹¶å®‰è£…ã€‚<br>æˆ–è€…åœ¨è½¯ä»¶åŒ…å¯¹åº”çš„ç›®å½•ï¼ˆæ–‡ä»¶åè¦å¯¹åº”ä¿®æ”¹ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo gdebi sogoupinyin.deb</span><br></pre></td></tr></table></figure></p><h2 id="å®‰è£…å¦ä¸€äº›å¸¸ç”¨è½¯ä»¶"><a href="#å®‰è£…å¦ä¸€äº›å¸¸ç”¨è½¯ä»¶" class="headerlink" title="å®‰è£…å¦ä¸€äº›å¸¸ç”¨è½¯ä»¶"></a>å®‰è£…å¦ä¸€äº›å¸¸ç”¨è½¯ä»¶</h2><p>åœ¨è¿™é‡Œè¿™äº›å¸¸ç”¨è½¯ä»¶éƒ½æ˜¯debåŒ…çš„ï¼Œæ‰€ä»¥å®‰è£…è¿‡ç¨‹ä¸å†ç´¯è¿°ï¼Œå®‰è£…åªéœ€è¦gdebiæ‰“å¼€å°±è¡Œï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œè¿›è¡Œå®‰è£…</p><blockquote><p>è¿˜æœ‰ä¸€ç‚¹æ³¨æ„çš„äº‹ï¼Œå°±æ˜¯debåŒ…ç”¨gdebiå®‰è£…æ—¶ä¼šè‡ªåŠ¨å°†å…¶ä¾èµ–çš„åŒ…ä¸‹è½½å®‰è£…ï¼Œæ‰€ä»¥ä¸€äº›è½¯ä»¶ä½ ä¸å¿…å»æ‹…å¿ƒä»–çš„ä¾èµ–</p></blockquote><p>ä¸‹é¢åˆ—å‡ºå¸¸ç”¨çš„ä¸€äº›å¯ä»¥é€šè¿‡debè½¯ä»¶åŒ…ç¨‹åºå®‰è£…çš„æ—¥å¸¸è½¯ä»¶ï¼š</p><ul><li>Google Chromeï¼ˆæˆ‘åªç”¨è¿™ä¸ªæµè§ˆå™¨ï¼‰</li><li>wpsï¼ˆå›½äº§å…è´¹è¿˜æ”¯æŒLinuxï¼Œæ”¯æŒï¼Œè¿™æ ·åŠå…¬æ‰€éœ€å°±æœ‰äº†ï¼‰</li><li>ç½‘æ˜“äº‘éŸ³ä¹ï¼ˆæŠ–è…¿ä¹‹é“ï¼Œå”¯æœ‰ç½‘æ˜“ï¼‰</li><li>Aotmï¼ˆå‰ç«¯å¼€å‘å¾ˆå¥½ç”¨ï¼Œä¸è¿‡æˆ‘å‘ç°å†™MarkDownä¹Ÿå¾ˆå¥½ç”¨ï¼Œæ­¤ç¯‡å°±æ˜¯è¿™è´§å†™çš„ï¼‰<blockquote><p>ä»¥ä¸Šè½¯ä»¶debåŒ…éƒ½å¯ä»¥åœ¨å¯¹åº”çš„å®˜ç½‘è¿›è¡Œä¸‹è½½</p></blockquote></li></ul><p>è¿˜æœ‰ä¸€äº›å¯ä»¥åœ¨åº”ç”¨å•†åº—ä¸‹è½½å®‰è£…çš„ç¨‹åºï¼š</p><ul><li>FileZillaï¼ˆftpä¼ è¾“çœŸçš„å¾ˆæ–¹ä¾¿ï¼‰</li><li>ç³»ç»Ÿç›‘è§†å™¨ï¼ˆæ—¥å¸¸çœ‹èµ„æºå ç”¨ï¼‰</li><li>è¿˜æœ‰å…¶ä»–çš„ä¸€äº›è‡ªå·±å»æ¢ç´¢å§</li></ul><h2 id="å¼€å‘ç¯å¢ƒæ­å»ºï¼ˆJava-JavaWeb-Androidï¼‰"><a href="#å¼€å‘ç¯å¢ƒæ­å»ºï¼ˆJava-JavaWeb-Androidï¼‰" class="headerlink" title="å¼€å‘ç¯å¢ƒæ­å»ºï¼ˆJava||JavaWeb||Androidï¼‰"></a>å¼€å‘ç¯å¢ƒæ­å»ºï¼ˆJava||JavaWeb||Androidï¼‰</h2><p>ä¸Šé¢åšçš„åªæ˜¯å¯¹äºæ—¥å¸¸ä½¿ç”¨è€Œåšçš„ä¸€äº›å®‰è£…å’Œé…ç½®ï¼Œå¯¹äºç¨‹åºå‘˜æ¥è®²ï¼Œè¦å‘æŒ¥æ¡Œé¢ç‰ˆçš„Linuxçš„æœ€å¤§ä½œç”¨è¿˜å·®è¿™äº›ä¸œè¥¿ï¼Œç°ç®€è¦åˆ—å‡ºæ¥ï¼š</p><ul><li>MySQL</li><li>JDK</li><li>Maven</li><li>Tomcat</li><li>IDEA</li><li>ç§‘å­¦ä¸Šç½‘</li></ul><h2 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h2><p>åœ¨ubuntuï¼ˆelementary OSï¼‰ä¸‹å®‰è£…MySQLæ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œåªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure><p>å®‰è£…è¿‡ç¨‹ä¸­ä¼šè®©ä½ è®¾å®šä¸¤æ¬¡mysqlçš„rootå¯†ç ï¼Œè¾“å®Œè¯·æŒ‰tabé”®åˆ°ï¼ˆokï¼‰ç¡®å®šï¼Œå¹¶ç»§ç»­</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># sudo apt-get install mysql-client</span><br><span class="line"></span><br><span class="line"># sudo apt-get install libmysqlclient-dev</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo netstat -tap|grep mysql</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°å‘½ä»¤æ£€æŸ¥åå¦‚æœçœ‹åˆ°mysqlçš„socketå¤„äºlistençŠ¶æ€åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ</p><p>ç™»é™†mysqlæ£€éªŒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># mysql -u root -p</span><br></pre></td></tr></table></figure></p><p>é”®å…¥åˆšæ‰è®¾ç½®çš„å¯†ç ä»¥æ£€éªŒã€‚</p><h2 id="å®‰è£…JDK"><a href="#å®‰è£…JDK" class="headerlink" title="å®‰è£…JDK"></a>å®‰è£…JDK</h2><p>å¸è½½openjdk:  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo apt-get purge openjdk*</span><br></pre></td></tr></table></figure><p>å®˜ç½‘:<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a><br>ä¸‹è½½å®˜æ–¹jdkï¼ˆå¦‚ï¼šjdk-8u102-linux-x64.tar.gzï¼‰<br>åˆ›å»ºJDKå­˜æ”¾è·¯å¾„ã€‚æˆ‘çš„JDKå­˜æ”¾åœ¨â€œ/usr/jdkâ€ï¼Œæ‰€ä»¥ä½¿ç”¨å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo mkdir /usr/jdk</span><br></pre></td></tr></table></figure></p><p>å¤åˆ¶jdk-8u102-linux-x64.tar.gzæ–‡ä»¶åˆ°/usr/jdkï¼Œä¸”ä½¿ç”¨è§£å‹ç¼©å‘½ä»¤â€œtar zxvfâ€è§£å‹ç¼©<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># cd /usr/jdk</span><br><span class="line">// åˆ°è¦å­˜æ”¾jdkçš„ç›®å½•(å‡è®¾æ–‡ä»¶åœ¨ä¸‹è½½ç›®å½•)</span><br><span class="line"># sudo mv /home/Ã—Ã—Ã—/Downloads/jdk-8u102-linux-x64.tar.gz ./</span><br><span class="line">// è¡¨ç¤ºå°†å‹ç¼©åŒ…ç§»åŠ¨åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œæ³¨æ„å‘½ä»¤çš„ç›®å½•</span><br><span class="line"># sudo tar -zxvf jdk-8u102-linux-x64.tar.gz</span><br><span class="line">// è§£å‹åˆ°å½“å‰ç›®å½•</span><br></pre></td></tr></table></figure></p><blockquote><p>ç¯å¢ƒå˜é‡é…ç½®:  </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ä¼šæ‰“å¼€æ–‡ä»¶ï¼Œåœ¨æœ€åæ·»åŠ ï¼š(å¦‚æœå®‰è£…è·¯å¾„æ”¹å˜è¯·å¯¹åº”ä¿®æ”¹)  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/jdk/jdk1.8.0_102</span><br><span class="line">export JRE_HOME=/usr/jdk/jdk1.8.0_102/jre</span><br><span class="line">export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œæˆä¿å­˜å…³é—­ï¼Œå›åˆ°ç»ˆç«¯è¾“å…¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># source /etc/profile</span><br></pre></td></tr></table></figure></p><p>è¾“å…¥javaæˆ–javacæ£€éªŒ</p><h2 id="å®‰è£…Maven"><a href="#å®‰è£…Maven" class="headerlink" title="å®‰è£…Maven"></a>å®‰è£…Maven</h2><p>è¿™ä¸ªä¸œè¥¿ç›´æ¥å‚è€ƒMavenå®˜ç½‘å°±å¯ä»¥æ“ä½œå®Œæˆäº†  </p><p>å®˜ç½‘åœ°å€ï¼š<a href="http://maven.apache.org/" target="_blank" rel="noopener">http://maven.apache.org/</a>  </p><p>ä¸€èˆ¬æƒ…å†µä¸‹æä¾›tar.gzåŒ…å’ŒzipåŒ…  </p><p>å®‰è£…mavençš„å…ˆå†³æ¡ä»¶æ˜¯JDKå“Ÿ</p><p>å‡è®¾ä¸‹è½½ä¸‹æ¥çš„æ˜¯tar.gzåŒ…:<code>apache-maven-3.5.0-bin.tar.gz</code><br>å°†å…¶å­˜æ”¾åˆ°ä½ æƒ³å®‰è£…çš„ç›®å½•ï¼Œåœ¨å­˜æ”¾ç›®å½•ä¸‹æ‰§è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo tar -zxvf apache-maven-3.5.0-bin.tar.gz</span><br></pre></td></tr></table></figure></p><p>ç°å‡è®¾Mavenè¢«å®‰è£…åœ¨/usr/mavenç›®å½•ä¸‹ï¼šï¼ˆæ­¤æ“ä½œå°†å…¶åŠ å…¥ç¯å¢ƒå˜é‡ä½†åªæ˜¯æš‚æ—¶çš„ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># export PATH=/usr/maven/apache-maven-3.5.0/bin:$PATH</span><br></pre></td></tr></table></figure></p><p>ç¯å¢ƒå˜é‡æ°¸ä¹…ç”Ÿæ•ˆ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo vim /etc/profile</span><br></pre></td></tr></table></figure><p>åŠ å…¥ä»¥ä¸‹å˜é‡ï¼š  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#maven</span><br><span class="line">export MAVEN_HOME=/usr/maven/apache-maven-3.5.0</span><br><span class="line">export PATH=$&#123;PATH&#125;:$&#123;MAVEN_HOME&#125;/bin</span><br></pre></td></tr></table></figure><p>wqé€€å‡ºååˆ·æ–°ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># source /etc/profile</span><br></pre></td></tr></table></figure></p><p>æ£€éªŒå®‰è£…:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -v</span><br></pre></td></tr></table></figure></p><p>æ­£ç¡®è¾“å‡º:(ç±»ä¼¼å°±è¡Œï¼Œä¸å¿…ä¸€æ ·)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-04T03:39:06+08:00)</span><br><span class="line">Maven home: /usr/maven/apache-maven-3.5.0</span><br><span class="line">Java version: 1.8.0_131, vendor: Oracle Corporation</span><br><span class="line">Java home: /usr/jdk8/jdk1.8.0_131/jre</span><br><span class="line">Default locale: zh_CN, platform encoding: UTF-8</span><br><span class="line">OS name: &quot;linux&quot;, version: &quot;4.4.0-83-generic&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;</span><br></pre></td></tr></table></figure></p><h2 id="å®‰è£…Tomcat"><a href="#å®‰è£…Tomcat" class="headerlink" title="å®‰è£…Tomcat"></a>å®‰è£…Tomcat</h2><p>Tomcatå®‰è£…ä¸ä¸Šé¢å‡ ä¸ªå®‰è£…æ˜¯ç±»ä¼¼çš„ï¼š</p><p>å®˜ç½‘:<a href="http://tomcat.apache.org/" target="_blank" rel="noopener">http://tomcat.apache.org/</a>  </p><p>ä¸‹è½½tar.gzåŒ…ï¼Œä¸å†ç´¯è¿°å¤åˆ¶å’Œè§£å‹è¿‡ç¨‹ï¼Œè¯·å‚ç…§ä»¥ä¸Šä¸¤ä¸ªè§£å‹è¿‡ç¨‹</p><p>ç°å‡è®¾ä¸‹è½½tomcat7è¢«è§£å‹å®‰è£…åˆ°äº†<code>/usr/tomcat7/</code>ä¸‹ï¼š</p><p>å…ˆå°†tomcatæ–‡ä»¶å¤¹åŠå­æ–‡ä»¶æƒé™æ”¹åˆ°ä»»æ„äººè¯»å†™æ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo chmod -R a+rwx  /usr/tomcat7/*</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°binç›®å½•:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cd /usr/tomcat7/apache-tomcat-7.0.73/bin</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ./startup.sh</span><br></pre></td></tr></table></figure></p><p>æç¤ºjdkç¯å¢ƒé—®é¢˜:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo vim catalina.sh</span><br></pre></td></tr></table></figure></p><p>åŠ å…¥JDKçš„ç¯å¢ƒå˜é‡:ï¼ˆè¯·ç›¸åº”æ”¹å˜ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/jdk8/jdk1.8.0_131</span><br><span class="line">export JRE_HOME=/usr/jdk8/jdk1.8.0_131/jre</span><br></pre></td></tr></table></figure></p><p>æ­£ç¡®è¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Using CATALINA_BASE:   /usr/tomcat7/apache-tomcat-7.0.79</span><br><span class="line">Using CATALINA_HOME:   /usr/tomcat7/apache-tomcat-7.0.79</span><br><span class="line">Using CATALINA_TMPDIR: /usr/tomcat7/apache-tomcat-7.0.79/temp</span><br><span class="line">Using JRE_HOME:        /usr/jdk8/jdk1.8.0_131/jre</span><br><span class="line">Using CLASSPATH:       /usr/tomcat7/apache-tomcat-7.0.79/bin/bootstrap.jar:/usr/tomcat7/apache-tomcat-7.0.79/bin/tomcat-juli.jar</span><br><span class="line">Tomcat started.</span><br></pre></td></tr></table></figure></p><p>åœæ­¢:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./shutdown.sh</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…IDEA"><a href="#å®‰è£…IDEA" class="headerlink" title="å®‰è£…IDEA"></a>å®‰è£…IDEA</h2><p>IDEAçš„å®‰è£…è¿‡ç¨‹æ²¡æœ‰å¤šå¤§å˜åŒ–ï¼Œä¸‹è½½è§£å‹å³å¯ä½¿ç”¨ã€‚</p><p>å®˜ç½‘ï¼š<a href="http://www.jetbrains.com/idea/" target="_blank" rel="noopener">http://www.jetbrains.com/idea/</a>  </p><p>é™¤äº†IDEAå¾ˆå¤šjetbrainså®¶æ—çš„ä¸œè¥¿éƒ½æ˜¯å¾ˆå¥½ç”¨çš„ï¼Œåœ¨Linuxå¹³å°ä¹Ÿæœ‰å¾ˆå¥½çš„æ›´æ–°æ”¯æŒ</p><p>å¦‚æœæ˜¯Androidå¼€å‘è€…ï¼Œandroid studioä¹Ÿä¼šå¾ˆå®¹æ˜“å…¼å®¹æ­¤ç³»ç»Ÿ</p><h2 id="ç§‘å­¦ä¸Šç½‘"><a href="#ç§‘å­¦ä¸Šç½‘" class="headerlink" title="ç§‘å­¦ä¸Šç½‘"></a>ç§‘å­¦ä¸Šç½‘</h2><p><del>å…³äºç§‘å­¦ä¸Šç½‘ï¼Œæˆ‘æ˜¯ç”¨çš„å¥‡å½±shadowsocksã€‚ä¸€èˆ¬æˆ‘ä¹Ÿç”¨çš„ä¸å¤šï¼ŒåŒæ­¥Chromeä¹¦ç­¾å’Œæ’ä»¶æ—¶ï¼Œæ‰¾æ‰¾Googleæ—¶ä¼šç”¨ç”¨ï¼</del></p><h2 id="ä¸€äº›é¢„è§ˆ"><a href="#ä¸€äº›é¢„è§ˆ" class="headerlink" title="ä¸€äº›é¢„è§ˆ"></a>ä¸€äº›é¢„è§ˆ</h2><p><img src="http://oqr3htxnb.bkt.clouddn.com/17-5-30/40219153.jpg" alt=""></p><p><img src="http://oqr3htxnb.bkt.clouddn.com/17-5-30/94337476.jpg" alt=""></p><blockquote><p>è¿˜æœ‰å¾ˆå¤šæœ‰è¶£çš„ä¸œè¥¿è‡ªå·±å»æ¢ç´¢å§ã€‚æ­¤æ–‡ä¸ºè¿ç§»åšæ–‡ã€‚ä¹‹å‰å‘è¡¨äº=&gt;<a href="http://blog.csdn.net/godevelop/article/details/74937795" target="_blank" rel="noopener">æˆ‘çš„CSDN</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åœ¨ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´çš„Linuxåï¼Œå‰å‰ååå®‰è£…ä¹Ÿæœ‰å‡ åæ¬¡ï¼Œä¹ŸçŠ¯è¿‡ä¸€äº›è‡´å‘½çš„é”™è¯¯ï¼Œä¸ºäº†ä¸‹æ¬¡ä¸å†åˆ°å¤„ç¿»æ–‡æ¡£ï¼Œç°æ€»ç»“ä¸€äº›å®‰è£…åå¿…å¤‡çš„ä¸œè¥¿ä»¥åŠå¸¸ç”¨è½¯ä»¶åŠæ“ä½œï¼Œä»¥ä¾¿æ—¥åæŸ¥é˜…ï¼&lt;br&gt;å¤‡æ³¨ä¸€ä¸‹ï¼š  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„:è¯·å…ˆé˜…è¯»ä¸€éå…¨æ–‡åå†æ“ä½œï¼Œé€‚ç”¨å‘è¡Œç‰ˆä¸ºUbuntu16.04åŠåŸºäºUbuntu16.04æ„å»ºçš„å‘è¡Œç‰ˆï¼Œå…¶ä»–å‘è¡Œç‰ˆéƒ¨åˆ†ç›¸åŒæˆ–ç±»ä¼¼ï¼Œä¸ä¿è¯æ‰€æœ‰å‘è¡Œç‰ˆçš„é€‚ç”¨ï¼Œå…¶ä½™å‘è¡Œç‰ˆè¯·è‡ªè¡ŒGoogleå¯¹åº”æ•™ç¨‹ï¼Œæœ›æ‚‰çŸ¥&lt;/strong&gt;  &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‘è¡Œç‰ˆï¼šelementary OS 0.4.1 Lokiï¼ˆåŸºäº â€œUbuntu 16.04.2 LTSâ€ æ„å»ºï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://oqr3htxnb.bkt.clouddn.com/17-5-30/29786706.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è­¦å‘Š:æ…ç”¨rmå‘½ä»¤ï¼Œç‰¹åˆ«æ˜¯rootä¸‹çš„rmï¼Œæˆ–è€…å¸¦æœ‰-rfæŒ‡ä»¤çš„rm&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://git66.com/tags/linux/"/>
    
      <category term="ubuntu" scheme="http://git66.com/tags/ubuntu/"/>
    
  </entry>
  
</feed>
